[{"client_msg_id":"3638e4f8-8c6e-4d48-ae2b-6490472ec431","type":"message","text":"自分はいつもrust-analyzerかgoplsでデバッグしてますねー","user":"UEB17JJJE","ts":"1585013723.047900","thread_ts":"1585013723.047900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"9d5n","elements":[{"elements":[{"text":"自分はいつもrust-analyzerかgoplsでデバッグしてますねー","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"97fc0d19-52e8-46ce-a5a7-7c3e9c88fa9a","type":"message","text":"やっぱこの２つがよくできてますよね。gopls は安定しててそこそこ起動早いし、rust-analyzer はかなり最先端の仕様も取り込んでいて。。。\n\nrust-analyzer の selectionRange は便利ですよ！","user":"U8R597E9H","ts":"1585027134.049200","thread_ts":"1585013723.047900","parent_user_id":"UEB17JJJE","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"9R9D","elements":[{"elements":[{"text":"やっぱこの２つがよくできてますよね。gopls は安定しててそこそこ起動早いし、rust-analyzer はかなり最先端の仕様も取り込んでいて。。。\n\nrust-analyzer の selectionRange は便利ですよ！","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"7bf625e2-0de8-40d1-8ab1-9877648c1be8","type":"message","text":"自作クライアントを vim で使うとものすごく画面がチラついていて、それで自作クライアントのバグに気づいていくつも修正することになった。\nなぜ nvim はチラつかなかったのかが少し不思議。。。","user":"U8R597E9H","ts":"1585027172.050100","thread_ts":"1585027172.050100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"YSFA","elements":[{"elements":[{"text":"自作クライアントを vim で使うとものすごく画面がチラついていて、それで自作クライアントのバグに気づいていくつも修正することになった。\nなぜ nvim はチラつかなかったのかが少し不思議。。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f50ec61e-5ef6-40b7-8d0c-7ac1e1d62165","type":"message","text":"結果的にすごく軽くなりました。","user":"U8R597E9H","ts":"1585027246.050200","thread_ts":"1585027172.050100","parent_user_id":"U8R597E9H","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"hu3F","elements":[{"elements":[{"text":"結果的にすごく軽くなりました。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"89ffb0ac-5db5-4de2-9317-5523f76b11c3","type":"message","text":"<https://vim-jp.slack.com/archives/CJMV3MSLR/p1585030284124300>","user":"U03C6TEAZ","ts":"1585030517.050500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"author_icon":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2019-10-29/814941997319_48.png","author_subname":"[Vim]の新着質問一覧｜teratail（テラテイル）","text":"<https://teratail.com/questions/249056?rss=all|vim-lspの診断スピードを早くしたい>\nvim-lspを入れてみました。おおむね快適に動作しています。  \ndiagnosticsについて、aleやcoc.nvimに比べて診断が走るまで（終わるまで？）に時間がかかるのが気になります。1文字書くたびに診断が走ってほぼリアルタイムで見た目に反映されるくらいが理想なのですが、なにか設定をいじることで診断の周期？を早めることは可能でしょうか。また、このスピードはvimのどの設定に依存して決まっているのでしょうか。  \nvim-lspのオプションのヘルプを引いてみましたがそのようなオプションが見当たらなかったので質問させていただきまし...\n\n<https://teratail.com/questions/249056?rss=all|続きを見る>","fallback":"[March 23rd, 2020 11:11 PM] [Vim]の新着質問一覧｜teratail（テラテイル）: <https://teratail.com/questions/249056?rss=all|vim-lspの診断スピードを早くしたい>\nvim-lspを入れてみました。おおむね快適に動作しています。  \ndiagnosticsについて、aleやcoc.nvimに比べて診断が走るまで（終わるまで？）に時間がかかるのが気になります。1文字書くたびに診断が走ってほぼリアルタイムで見た目に反映されるくらいが理想なのですが、なにか設定をいじることで診断の周期？を早めることは可能でしょうか。また、このスピードはvimのどの設定に依存して決まっているのでしょうか。  \nvim-lspのオプションのヘルプを引いてみましたがそのようなオプションが見当たらなかったので質問させていただきまし...\n\n<https://teratail.com/questions/249056?rss=all|続きを見る>","from_url":"https://vim-jp.slack.com/archives/CJMV3MSLR/p1585030284124300","id":1,"original_url":"https://vim-jp.slack.com/archives/CJMV3MSLR/p1585030284124300","footer":"Posted in #question"}],"blocks":[{"block_id":"YYh7k","elements":[{"elements":[{"type":"link","url":"https://vim-jp.slack.com/archives/CJMV3MSLR/p1585030284124300"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"d6260cbe-979e-472d-abaa-927fb48ac0de","type":"message","text":"vim-lsp の diagnostics は受けすぎなんだと思う。","user":"U03C6TEAZ","ts":"1585030830.051000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"M8N","elements":[{"elements":[{"text":"vim-lsp の diagnostics は受けすぎなんだと思う。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"5a51b263-b0e4-4971-98ec-1bece48bdd23","type":"message","text":"coc.nvim だとデフォルトではインサートモードで diagnostics は反映しないんですよね。","user":"U03C6TEAZ","ts":"1585030851.051600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"a8Mu","elements":[{"elements":[{"text":"coc.nvim だとデフォルトではインサートモードで diagnostics は反映しないんですよね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"26c3e540-595c-46f0-af0e-de5e0ec4ece9","type":"message","text":"vim-lsp は補完メニューで選んでる最中ですら反映する。","user":"U03C6TEAZ","ts":"1585030873.052000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"o4u","elements":[{"elements":[{"text":"vim-lsp は補完メニューで選んでる最中ですら反映する。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"6e7b12b8-f0e3-46b4-94f7-505d429ee566","type":"message","text":"たしかに気になります。cocちゃんと触ってないけどcocの挙動の方が希望に近そう。","user":"UKHUVMBJR","ts":"1585031185.052500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"qtfC","elements":[{"elements":[{"text":"たしかに気になります。cocちゃんと触ってないけどcocの挙動の方が希望に近そう。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f5fcc081-c662-4d64-a257-81d50f86eb9b","type":"message","text":"せめて pumvisible 中は更新を送らなくていいと思う。","user":"U03C6TEAZ","ts":"1585031246.053000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"11Lv","elements":[{"elements":[{"text":"せめて pumvisible 中は更新を送らなくていいと思う。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"3b6c236b-3c5e-44f4-b9cb-97aa2f21ec3d","type":"message","text":"補完メニュー選び終わったら(確定したら)送っていいと思うけど、選んでる最中は鬱陶しい場合ありそうですね…。","user":"U78A6ESHM","ts":"1585031965.053700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"h8l","elements":[{"elements":[{"text":"補完メニュー選び終わったら(確定したら)送っていいと思うけど、選んでる最中は鬱陶しい場合ありそうですね…。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"b721a38e-cb26-4e5a-82b7-0b81323d9ce7","type":"message","text":"これのおかげでモサッとしてるのは確かにあるので。","user":"U03C6TEAZ","ts":"1585031989.054100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"wlL","elements":[{"elements":[{"text":"これのおかげでモサッとしてるのは確かにあるので。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"9a63c567-9891-431d-93f0-631b9440c874","type":"message","text":"この辺は好みがでてくるのでなかなか変更を提案するのも難しいですね。。。\nmattn さんがおっしゃっている方式だと、TextChanged,InsertLeave だけ見ればよくなって、debounce などもあまりかけなくてよくなるかもしれません。","user":"U8R597E9H","ts":"1585032290.055900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"GZ9kd","elements":[{"elements":[{"text":"この辺は好みがでてくるのでなかなか変更を提案するのも難しいですね。。。\nmattn さんがおっしゃっている方式だと、TextChanged,InsertLeave だけ見ればよくなって、debounce などもあまりかけなくてよくなるかもしれません。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"edited":{"user":"U8R597E9H","ts":"1585032319.000000"}},{"client_msg_id":"1c4e5241-7827-48e7-86c1-8d2d169977b6","type":"message","text":"子供がテレビに集中してる間は休憩しても良いよってやつか","user":"UNJ2DANJC","ts":"1585032322.056700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"7SL","elements":[{"elements":[{"text":"子供がテレビに集中してる間は休憩しても良いよってやつか","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"b7fee83e-0b82-4cda-b574-071d6f0e6137","type":"message","text":"diagnostics はサーバも加減してほしい。","user":"U03C6TEAZ","ts":"1585032359.057100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"EcZ","elements":[{"elements":[{"text":"diagnostics はサーバも加減してほしい。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"22717188-ac9e-4bc4-ac23-dcab235e0424","type":"message","text":"全行送ってくるサーバあるからなぁ。","user":"U03C6TEAZ","ts":"1585032381.057600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"P3S5v","elements":[{"elements":[{"text":"全行送ってくるサーバあるからなぁ。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"fcb98aee-b819-471a-a35a-3c43ad960f04","type":"message","text":"LSP ではないけど tsserver がこれで困ってます…。いや tsuquyomi の方でバッファリングしろよって話なんですけど…。","user":"U78A6ESHM","ts":"1585032455.058300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"sz2","elements":[{"elements":[{"text":"LSP ではないけど tsserver がこれで困ってます…。いや tsuquyomi の方でバッファリングしろよって話なんですけど…。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"534a2dc3-9d2c-47c3-ae5e-ac14ea5e1b65","type":"message","text":"InsertMode で diagnostics が増えるような変更は相当長く debounce してもいいんですよね。個人的には完全に止めてしまうのはそこまで好きではないですが。","user":"U8R597E9H","ts":"1585032521.059300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"TJ=","elements":[{"elements":[{"text":"InsertMode で diagnostics が増えるような変更は相当長く debounce してもいいんですよね。個人的には完全に止めてしまうのはそこまで好きではないですが。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f2d4c9e5-52e7-4f11-8e30-c8de2d1363ba","type":"message","text":"せめて都度でも設定できれば、なんですがねぇ...(なにかで崩壊したときに全文もらって復旧はなくもない?)","user":"UAZ33BKV2","ts":"1585032532.059600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"+PW3","elements":[{"elements":[{"text":"せめて都度でも設定できれば、なんですがねぇ...(なにかで崩壊したときに全文もらって復旧はなくもない?)","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"ca9b2cd2-cd7e-4dfd-be4d-a184fc1f6e0f","type":"message","text":"neovim built inはそのへんどんな感じなんだろう","user":"UNJ2DANJC","ts":"1585032617.061100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"L4l","elements":[{"elements":[{"text":"neovim built inはそのへんどんな感じなんだろう","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"edited":{"user":"UNJ2DANJC","ts":"1585032626.000000"}},{"client_msg_id":"c2dbd6bc-f96f-427d-b3c4-30df4e312995","type":"message","text":"サーバからの通知を減らすにはこっちから更新を送らないようにしないといけない。","user":"U03C6TEAZ","ts":"1585032639.062100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"w/cla","elements":[{"elements":[{"text":"サーバからの通知を減らすにはこっちから更新を送らないようにしないといけない。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"67e0eac4-0287-46ab-bf5e-2128643d86db","type":"message","text":"neovim-builtin は変更即時送信、diagnostics 即時反映。 なので結構ちらつきます。（特に virtual-text がちらつくのは不快）","user":"U8R597E9H","ts":"1585032663.062600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"FzzC/","elements":[{"elements":[{"text":"neovim-builtin は変更即時送信、diagnostics 即時反映。 なので結構ちらつきます。（特に virtual-text がちらつくのは不快）","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"87eb73d3-46b7-4cce-a15b-cb0c8003cb4b","type":"message","text":"じぶんは「変更送信→ 200ms debounce」「診断反映 → 増える変更の場合は約 1sec debounce、減る方向は即時反映」にしています。","user":"U8R597E9H","ts":"1585032733.063700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"mHtg","elements":[{"elements":[{"text":"じぶんは「変更送信→ 200ms debounce」「診断反映 → 増える変更の場合は約 1sec debounce、減る方向は即時反映」にしています。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"5a4955a9-1056-4a35-b463-90e10fe6b807","type":"message","text":"reactiveにしすぎるのもUX的にはだめなんだなあ.... ここらへん好みも分かれそうですね...","user":"UNJ2DANJC","ts":"1585032833.065700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"zcV1","elements":[{"elements":[{"text":"reactiveにしすぎるのもUX的にはだめなんだなあ.... ここらへん好みも分かれそうですね...","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"4b786111-2d14-46a0-8070-c8953da4c6a8","type":"message","text":"`Improve diagnostics` ってコミットをこの半年間何回もやっている気がする。。。だいぶ研究が進んできてはいるのでそろそろ持っていきたい。","user":"U8R597E9H","ts":"1585032995.066500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"/Fi6o","elements":[{"elements":[{"style":{"code":true},"text":"Improve diagnostics","type":"text"},{"text":" ってコミットをこの半年間何回もやっている気がする。。。だいぶ研究が進んできてはいるのでそろそろ持っていきたい。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"61e948f4-d6dd-40e1-8e79-504433accdad","type":"message","text":"ちなみにどんな改善持ってらっしゃいます？","user":"U03C6TEAZ","ts":"1585033016.066800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"RPO=","elements":[{"elements":[{"text":"ちなみにどんな改善持ってらっしゃいます？","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"ea568b4b-d677-4671-9a91-8c2861063c96","type":"message","text":"<https://gist.github.com/5a683163b3f94a4920cec5ae472a2837>","user":"U03C6TEAZ","ts":"1585033398.070300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"2w0uO","elements":[{"elements":[{"type":"link","url":"https://gist.github.com/5a683163b3f94a4920cec5ae472a2837"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"e518eb63-ac93-4693-bd35-c280b45896d7","type":"message","text":"これだけでも少し軽くなる気がしますね。","user":"U03C6TEAZ","ts":"1585033404.070700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"nYFDX","elements":[{"elements":[{"text":"これだけでも少し軽くなる気がしますね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"24036634-ba8e-4b85-9b65-658d02cdd9ac","type":"message","text":"まず、変更送信の間隔に律速される仕組みなので、そこを早くしたいなあというのはあるのですが\n\n1. 適用済み診断結果を 0 個として初期化する\n2. 診断結果を受信すると、「適用済み診断結果」と「受信した診断結果」の個数を比較して、減っていれば即時 `適用`\n3. 増えている場合、1sec 適用を遅延させる（この「遅延開始タイミング」の changedtick を一緒に保存しておく）\n4. 遅延完了時に changedtick が変化していなければ `適用`\n    - changedtick が変化していれば「後から診断がくるはず」なので無視する\n\n※ `適用` 時に「適用済み診断結果」を更新する\n\nこんな感じの処理に落ち着きつつあります。","user":"U8R597E9H","ts":"1585033484.072300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"a57+","elements":[{"elements":[{"text":"まず、変更送信の間隔に律速される仕組みなので、そこを早くしたいなあというのはあるのですが\n\n1. 適用済み診断結果を 0 個として初期化する\n2. 診断結果を受信すると、「適用済み診断結果」と「受信した診断結果」の個数を比較して、減っていれば即時 ","type":"text"},{"style":{"code":true},"text":"適用","type":"text"},{"text":"\n3. 増えている場合、1sec 適用を遅延させる（この「遅延開始タイミング」の changedtick を一緒に保存しておく）\n4. 遅延完了時に changedtick が変化していなければ ","type":"text"},{"style":{"code":true},"text":"適用","type":"text"},{"text":"\n    - changedtick が変化していれば「後から診断がくるはず」なので無視する\n\n※ ","type":"text"},{"style":{"code":true},"text":"適用","type":"text"},{"text":" 時に「適用済み診断結果」を更新する\n\nこんな感じの処理に落ち着きつつあります。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"edited":{"user":"U8R597E9H","ts":"1585033524.000000"}},{"client_msg_id":"65b269cc-ad3e-4096-a83e-4088d92a567a","type":"message","text":"なるほど。diagnostics 1件ずつに changedtick 持たせてもいいかもですね。","user":"U03C6TEAZ","ts":"1585033593.073000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"/WkR2","elements":[{"elements":[{"text":"なるほど。diagnostics 1件ずつに changedtick 持たせてもいいかもですね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"57123ef1-0f6e-45a0-a7a1-d12ad5e47ea7","type":"message","text":"<https://github.com/hrsh7th/vim-lamp/search?q=Improve+diagnostic&amp;type=Commits>","user":"U8R597E9H","ts":"1585033719.075000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"6ab2o","elements":[{"elements":[{"type":"link","url":"https://github.com/hrsh7th/vim-lamp/search?q=Improve+diagnostic&type=Commits"}],"type":"rich_text_section"}],"type":"rich_text"}],"edited":{"user":"U8R597E9H","ts":"1585033724.000000"}},{"client_msg_id":"d0e7cb19-dd08-4780-a8ad-9a85aed3b875","type":"message","text":"研究過程ですが、だいぶ固まっているはず。。。","user":"U8R597E9H","ts":"1585033745.075900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"0x1wo","elements":[{"elements":[{"text":"研究過程ですが、だいぶ固まっているはず。。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"27892478-748f-42a7-9db3-ad160445d7d5","type":"message","text":"たぶん現状\n1. 文字をタイプする (この時点では更新通知は flush されてない)\n2. 補完が開始される (この時点で更新通知が flush される) → サーバが解析開始\n3. 同時にサーバが補完メニューを用意\n4. クライアントに補完メニューが表示され、最初の項目が選ばれテキストが変更される\n5. 補完メニューでの変更によってサーバに更新通知が飛ぶ\n6. ↑の2と同時に5の diagnostics がやってくる。\nこんな感じかなぁと思っています。","user":"U03C6TEAZ","ts":"1585033767.076400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"wiUKd","elements":[{"elements":[{"text":"たぶん現状\n1. 文字をタイプする (この時点では更新通知は flush されてない)\n2. 補完が開始される (この時点で更新通知が flush される) → サーバが解析開始\n3. 同時にサーバが補完メニューを用意\n4. クライアントに補完メニューが表示され、最初の項目が選ばれテキストが変更される\n5. 補完メニューでの変更によってサーバに更新通知が飛ぶ\n6. ↑の2と同時に5の diagnostics がやってくる。\nこんな感じかなぁと思っています。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"936833f0-1f97-4505-84f0-3d09360c8fdd","type":"message","text":"pumvisible 中だけでも切れると軽くなりそうな気がする。","user":"U03C6TEAZ","ts":"1585033818.077100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"VGz8Z","elements":[{"elements":[{"text":"pumvisible 中だけでも切れると軽くなりそうな気がする。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"edited":{"user":"U03C6TEAZ","ts":"1585033833.000000"}},{"client_msg_id":"8edd05e7-da8e-45b1-a303-719a887c2c59","type":"message","text":"pumvisible 中に送らない様にすると\n1. 文字をタイプする (この時点では更新通知は flush されてない)\n2. 補完が開始される (この時点で更新通知が flush される) → サーバが解析開始\n3. 同時にサーバが補完メニューを用意\n4. クライアントに補完メニューが表示される\n5. ↑の2の diagnostics がやってくるが捨てる\n6. ポップアップが閉じられたら再度更新要求を飛ばす","user":"U03C6TEAZ","ts":"1585033973.078500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"FSKx","elements":[{"elements":[{"text":"pumvisible 中に送らない様にすると\n1. 文字をタイプする (この時点では更新通知は flush されてない)\n2. 補完が開始される (この時点で更新通知が flush される) → サーバが解析開始\n3. 同時にサーバが補完メニューを用意\n4. クライアントに補完メニューが表示される\n5. ↑の2の diagnostics がやってくるが捨てる\n6. ポップアップが閉じられたら再度更新要求を飛ばす","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"fda34e28-082e-431a-abc8-5aecdb5d406b","type":"message","text":"補完による最小文字とかの補填の動作での発動は抑止できたら、ですかね...想定内なんだから再diagは不要といえばそうですねえ","user":"UAZ33BKV2","ts":"1585034061.079600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"79zjo","elements":[{"elements":[{"text":"補完による最小文字とかの補填の動作での発動は抑止できたら、ですかね...想定内なんだから再diagは不要といえばそうですねえ","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"fa9a0d34-c3a4-48c3-af14-d40d83207db1","type":"message","text":"そこは asyncomplete の方すね。","user":"U03C6TEAZ","ts":"1585034091.079900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"gd+8S","elements":[{"elements":[{"text":"そこは asyncomplete の方すね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"af2d0b64-61df-4472-a955-5e7e7230a16e","type":"message","text":"あー、そっちもか、なるほど","user":"UAZ33BKV2","ts":"1585034108.080300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"BQHx","elements":[{"elements":[{"text":"あー、そっちもか、なるほど","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"ecd2a454-2f62-4821-8502-fc3ca0caa4ee","type":"message","text":"diagnostics、量が多いから捨てても大してパフォーマンスに寄与しない場合がありそう。","user":"U03C6TEAZ","ts":"1585034135.080800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"zp4","elements":[{"elements":[{"text":"diagnostics、量が多いから捨てても大してパフォーマンスに寄与しない場合がありそう。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"7aa78ad5-a68a-463c-922f-1abbb14762a6","type":"message","text":"`foo.` みたいな状態で来た diagnostics って間違いなくエラーなんで捨てていいと思ったりします。","user":"U03C6TEAZ","ts":"1585034310.081300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"4y5n","elements":[{"elements":[{"style":{"code":true},"text":"foo.","type":"text"},{"text":" みたいな状態で来た diagnostics って間違いなくエラーなんで捨てていいと思ったりします。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"99aaabaa-c7fb-4058-8b5a-a476e949aeaf","type":"message","text":"そこなんですよね。 `foo.` の状態で例えば 3sec くらいキーボード叩いてない時に、それでも「診断が表示されてほしくない」のか「いうても 3sec も放置したのだから診断出てほしい」のかが自分の中でも答えでてないです。。。","user":"U8R597E9H","ts":"1585034401.082600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"OS+v","elements":[{"elements":[{"text":"そこなんですよね。 ","type":"text"},{"style":{"code":true},"text":"foo.","type":"text"},{"text":" の状態で例えば 3sec くらいキーボード叩いてない時に、それでも「診断が表示されてほしくない」のか「いうても 3sec も放置したのだから診断出てほしい」のかが自分の中でも答えでてないです。。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"982041fb-ebb3-4a11-8c0b-e4132f9b2790","type":"message","text":"そこをスキップしていいならもはや InsertLeave だけを見て、その間は全部無視するでよくなってだいぶシンプルなんですよね。","user":"U8R597E9H","ts":"1585034436.083100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"HwnR","elements":[{"elements":[{"text":"そこをスキップしていいならもはや InsertLeave だけを見て、その間は全部無視するでよくなってだいぶシンプルなんですよね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"wakaru","users":["U03C6TEAZ","UAZ33BKV2"],"count":2}],"edited":{"user":"U8R597E9H","ts":"1585034445.000000"}},{"client_msg_id":"6dcfce2d-707a-4dfb-b9cf-4727d55449d4","type":"message","text":"`let g:lsp_diagnostics_suppress_on_insert_mode = 1` とかなら普通に通る気もしないでも。。。","user":"U8R597E9H","ts":"1585034549.084400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"eUU","elements":[{"elements":[{"style":{"code":true},"text":"let g:lsp_diagnostics_suppress_on_insert_mode = 1","type":"text"},{"text":" とかなら普通に通る気もしないでも。。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"1ed331b2-dca6-4145-8ca1-e6ffeb977ce1","type":"message","text":"CursorHoldI までいったら余裕があるから更新する、はオプションでアリナシあたりかな","user":"UAZ33BKV2","ts":"1585034569.084600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"EHRK","elements":[{"elements":[{"text":"CursorHoldI までいったら余裕があるから更新する、はオプションでアリナシあたりかな","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"edf4ab67-b90e-4b4a-8d54-a636b1d2f34f","type":"message","text":"vscode 速いすな。","user":"U03C6TEAZ","ts":"1585036932.085600","blocks":[{"block_id":"m7X","elements":[{"elements":[{"text":"vscode 速いすな。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"files":[{"id":"F010A40VAKD","created":1585036922,"timestamp":1585036922,"name":"screenshot.gif","title":"screenshot.gif","mimetype":"image/gif","filetype":"gif","pretty_type":"GIF","user":"U03C6TEAZ","editable":false,"size":86181,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F010A40VAKD/screenshot.gif","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F010A40VAKD/download/screenshot.gif","thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F010A40VAKD-cb44548872/screenshot_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F010A40VAKD-cb44548872/screenshot_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F010A40VAKD-cb44548872/screenshot_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F010A40VAKD-cb44548872/screenshot_360.png","thumb_360_w":360,"thumb_360_h":190,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F010A40VAKD-cb44548872/screenshot_480.png","thumb_480_w":480,"thumb_480_h":254,"thumb_360_gif":"https://files.slack.com/files-tmb/T03C4RC8V-F010A40VAKD-cb44548872/screenshot_360.gif","thumb_480_gif":"https://files.slack.com/files-tmb/T03C4RC8V-F010A40VAKD-cb44548872/screenshot_480.gif","deanimate_gif":"https://files.slack.com/files-tmb/T03C4RC8V-F010A40VAKD-cb44548872/screenshot_deanimate_gif.png","thumb_tiny":"AwAZADCj6Uo6UnpQMUABPPQUn4U7A9aTA9aAEopePWkoAX0o59R+dB7UlAC49x+dIRRRQAUUUUAf/9k=","original_w":639,"original_h":338,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/F010A40VAKD/screenshot.gif","permalink_public":"https://slack-files.com/T03C4RC8V-F010A40VAKD-9ac502e440","is_starred":false,"has_rich_preview":false}],"upload":true},{"client_msg_id":"4227c250-6676-4b75-9327-9f8cff3e1c21","type":"message","text":"下波線だと意外と気にならないから耐えるってことなんだろうか。。。 vim だとどうしても赤字にしたりしないといけないので大仰になるかもですね。","user":"U8R597E9H","ts":"1585037012.086400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"5LXJC","elements":[{"elements":[{"text":"下波線だと意外と気にならないから耐えるってことなんだろうか。。。 vim だとどうしても赤字にしたりしないといけないので大仰になるかもですね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"068ff1c9-1b7e-4c94-b1ef-f54ca0f55e48","type":"message","text":"virtual_text 出さなければ耐える気がしてきたかも。。。","user":"U8R597E9H","ts":"1585037064.086800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"jH2","elements":[{"elements":[{"text":"virtual_text 出さなければ耐える気がしてきたかも。。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"edbfafaa-84df-413b-8f93-f47ac7caf11b","type":"message","text":"自分はnvimはvirtual text切ってますね","user":"UEB17JJJE","ts":"1585037097.087500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Qn5D4","elements":[{"elements":[{"text":"自分はnvimはvirtual text切ってますね","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"a25d2b23-29e3-402e-9ed1-0a1c46890a98","type":"message","text":"言うほど大差ではないんですけどね。モサ感はありますね。","user":"U03C6TEAZ","ts":"1585037137.087700","blocks":[{"block_id":"Hyv/","elements":[{"elements":[{"text":"言うほど大差ではないんですけどね。モサ感はありますね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"files":[{"id":"F010MHUPLGG","created":1585037122,"timestamp":1585037122,"name":"screenshot.gif","title":"screenshot.gif","mimetype":"image/gif","filetype":"gif","pretty_type":"GIF","user":"U03C6TEAZ","editable":false,"size":179716,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F010MHUPLGG/screenshot.gif","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F010MHUPLGG/download/screenshot.gif","thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F010MHUPLGG-3c517394c5/screenshot_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F010MHUPLGG-3c517394c5/screenshot_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F010MHUPLGG-3c517394c5/screenshot_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F010MHUPLGG-3c517394c5/screenshot_360.png","thumb_360_w":360,"thumb_360_h":190,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F010MHUPLGG-3c517394c5/screenshot_480.png","thumb_480_w":480,"thumb_480_h":254,"thumb_360_gif":"https://files.slack.com/files-tmb/T03C4RC8V-F010MHUPLGG-3c517394c5/screenshot_360.gif","thumb_480_gif":"https://files.slack.com/files-tmb/T03C4RC8V-F010MHUPLGG-3c517394c5/screenshot_480.gif","deanimate_gif":"https://files.slack.com/files-tmb/T03C4RC8V-F010MHUPLGG-3c517394c5/screenshot_deanimate_gif.png","thumb_tiny":"AwAZADCgKdn3FNFOBB6/yoATP0/KkzTsr6UmR6UAJmil49KSgCQwuvVR/wB9Cm7SD939aVfumgd/pQAm0/3f1o2n0x+NKOppH6fiaA1F8p/QfmKUQSHoB/30KhoNAH//2Q==","original_w":639,"original_h":338,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/F010MHUPLGG/screenshot.gif","permalink_public":"https://slack-files.com/T03C4RC8V-F010MHUPLGG-abda4a8212","is_starred":false,"has_rich_preview":false}],"upload":true},{"client_msg_id":"5cab3a48-4089-49c0-9df3-390147be2282","type":"message","text":"補完ががんばりすぎじゃない？って感じもする。","user":"U03C6TEAZ","ts":"1585037180.088200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"ExOqH","elements":[{"elements":[{"text":"補完ががんばりすぎじゃない？って感じもする。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"b00aaf7b-6a61-42a2-9c26-112b9fdfe691","type":"message","text":"これ1行だからあんま目立たないけど、これが50行とかだとモサーッとするんだろうなぁ。","user":"U03C6TEAZ","ts":"1585037258.088900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"KxToN","elements":[{"elements":[{"text":"これ1行だからあんま目立たないけど、これが50行とかだとモサーッとするんだろうなぁ。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"169baf8b-dd5e-4704-a907-e6ce17770416","type":"message","text":"あー。そうか、単純に負荷がってのはありそうですね。","user":"U8R597E9H","ts":"1585037328.090000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"e4uZ","elements":[{"elements":[{"text":"あー。そうか、単純に負荷がってのはありそうですね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"a418bc8e-02f7-44e7-b479-114ed779d793","type":"message","text":"大きいファイルで他でエラーが出てるのに、補完をしようとした時とかなんですかね。","user":"U78A6ESHM","ts":"1585037386.090700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"z5bV","elements":[{"elements":[{"text":"大きいファイルで他でエラーが出てるのに、補完をしようとした時とかなんですかね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"fa894d77-6a3d-4159-a8ce-279bbbc09750","type":"message","text":"あと vim が flush するまでの delay が影響してそう。","user":"U03C6TEAZ","ts":"1585038029.091000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"+rN4","elements":[{"elements":[{"text":"あと vim が flush するまでの delay が影響してそう。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"a3c1fa79-fb6a-41a1-ac9a-61277cffb0d6","type":"message","text":"updatetime","user":"U03C6TEAZ","ts":"1585038066.091600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"OXj33","elements":[{"elements":[{"text":"updatetime","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"e9667f54-4f02-4a4a-9104-1a8e5c7c0d6a","type":"message","text":"変更通知までの時間を短くしないとなーとうだうだしてましたが、diagnostics 改善やってみようかな。","user":"U8R597E9H","ts":"1585038082.092000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"=mXkR","elements":[{"elements":[{"text":"変更通知までの時間を短くしないとなーとうだうだしてましたが、diagnostics 改善やってみようかな。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"d9dc0bc5-6407-40e1-b729-6eb801587cb3","type":"message","text":"ファーッ、updatetime=500 とかしたら結構サクサクやw","user":"U03C6TEAZ","ts":"1585038107.092500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"aqPCt","elements":[{"elements":[{"text":"ファーッ、updatetime=500 とかしたら結構サクサクやw","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"naruhodo","users":["UAZ33BKV2","UKHUVMBJR","U8CC7MDCL"],"count":3}]},{"client_msg_id":"dab0f2d9-e68a-466e-873e-235f06724efe","type":"message","text":"でも質問者さんは「診断スピードをはやくしたい」と要望してきていたのか。。。それは現状だとちょっとつらい。。。","user":"U8R597E9H","ts":"1585038135.093300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"2Fu","elements":[{"elements":[{"text":"でも質問者さんは「診断スピードをはやくしたい」と要望してきていたのか。。。それは現状だとちょっとつらい。。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"204a9002-207e-4cda-bfdc-f8b75165201d","type":"message","text":"今の vim-lsp の flush のタイミングは\n1. updatetime 経過する\n2. 補完などアクションが発生する\nのどちらかなんで、補完が更新されない様な数文字のタイプだと updatetime 待たされる感がある。","user":"U03C6TEAZ","ts":"1585038224.094600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"1Mfmw","elements":[{"elements":[{"text":"今の vim-lsp の flush のタイミングは\n1. updatetime 経過する\n2. 補完などアクションが発生する\nのどちらかなんで、補完が更新されない様な数文字のタイプだと updatetime 待たされる感がある。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"5ec34961-d6ae-4d3a-a970-be99647e359a","type":"message","text":"そうなんですよね。なので、listener_add or nvim_buf_attach が使える場合、そっちを利用して diff を取る。とかしないと流石にあの diff が短い間隔で走ると重い。。。","user":"U8R597E9H","ts":"1585038265.095300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"kpcT","elements":[{"elements":[{"text":"そうなんですよね。なので、listener_add or nvim_buf_attach が使える場合、そっちを利用して diff を取る。とかしないと流石にあの diff が短い間隔で走ると重い。。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"25b860a1-f0c1-4354-860c-e54df63236e7","type":"message","text":"それにしても VSCode 狂った速さだ…","user":"U8R597E9H","ts":"1585038715.096200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"sYc","elements":[{"elements":[{"text":"それにしても VSCode 狂った速さだ…","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"58d886c2-b61b-428b-8242-781f48c74cc7","type":"message","text":"診断を早くするためには、変更通知を早くする必要があり、変更通知は温かみのある diff で実装されているので、ここを改善しないといけないという理解です。","user":"U8R597E9H","ts":"1585038990.096800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"UTdmN","elements":[{"elements":[{"text":"診断を早くするためには、変更通知を早くする必要があり、変更通知は温かみのある diff で実装されているので、ここを改善しないといけないという理解です。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"9f7c00ef-e380-481f-bd95-147cd35dd86d","type":"message","text":"あまり細かい diff やると負荷がもっと高くなるのでねー。","user":"U03C6TEAZ","ts":"1585039041.097200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"VWw9","elements":[{"elements":[{"text":"あまり細かい diff やると負荷がもっと高くなるのでねー。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"8baa4e60-b1ec-4efb-a5d2-562098976e53","type":"message","text":"listener 使ってごにょごにょできるならいいけど。","user":"U03C6TEAZ","ts":"1585039060.097600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Rgm","elements":[{"elements":[{"text":"listener 使ってごにょごにょできるならいいけど。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"016b5fa1-2b43-4343-bd06-f2d9d3557ad0","type":"message","text":"僕は updatetime 方面でなんか策がないか考えるか。","user":"U03C6TEAZ","ts":"1585039088.097900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"VrIJ0","elements":[{"elements":[{"text":"僕は updatetime 方面でなんか策がないか考えるか。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"d34d3162-b584-4c0d-be69-71f7ee850c71","type":"message","text":"少なくとも updatetime のデフォルト値 4000 では長すぎる。","user":"U03C6TEAZ","ts":"1585039117.098300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"GIp","elements":[{"elements":[{"text":"少なくとも updatetime のデフォルト値 4000 では長すぎる。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"6abe9132-199f-4049-b367-91a2ad138b0d","type":"message","text":"現状を整理しておくと、↑の vim の動画は\n* updatetime 待ってしまっている\n* asyncomplete が flush する事で更新通知が飛んでいるので updatetime まで待っていないケースもある\n* でも asyncomplete がキャッシュしてるので全ての diagnostics が得られていない\n遅く感じるのは、asyncomplete の delay も絡んでるはず。","user":"U03C6TEAZ","ts":"1585041999.100300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Uo5=","elements":[{"elements":[{"text":"現状を整理しておくと、↑の vim の動画は\n* updatetime 待ってしまっている\n* asyncomplete が flush する事で更新通知が飛んでいるので updatetime まで待っていないケースもある\n* でも asyncomplete がキャッシュしてるので全ての diagnostics が得られていない\n遅く感じるのは、asyncomplete の delay も絡んでるはず。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"2992f880-17ed-4f06-aeff-4d2763fb9e10","type":"message","text":"Split するかどうかで関数名の一部にズレがあるのは好き嫌いありそう。 <https://github.com/prabirshrestha/vim-lsp/pull/763>","user":"U03C6TEAZ","ts":"1585042894.100800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"GitHub","title":"Support opening locations in new window by ronmrdechai · Pull Request #763 · prabirshrestha/vim-lsp","title_link":"https://github.com/prabirshrestha/vim-lsp/pull/763","text":"This patch adds support for opening locations (go to definition, declaration, etc.) in a new window (split) vs the current window or a preview window. I couldn&amp;#39;t find a way to ask for this expl...","fallback":"GitHub: Support opening locations in new window by ronmrdechai · Pull Request #763 · prabirshrestha/vim-lsp","thumb_url":"https://avatars1.githubusercontent.com/u/287744?s=400&v=4","from_url":"https://github.com/prabirshrestha/vim-lsp/pull/763","thumb_width":400,"thumb_height":400,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","id":1,"original_url":"https://github.com/prabirshrestha/vim-lsp/pull/763"}],"blocks":[{"block_id":"Pew","elements":[{"elements":[{"text":"Split するかどうかで関数名の一部にズレがあるのは好き嫌いありそう。 ","type":"text"},{"type":"link","url":"https://github.com/prabirshrestha/vim-lsp/pull/763"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"8dbbed62-1f69-4410-a267-dd36c24713e5","type":"message","text":"LspDefinition vs LspSplitDefinition","user":"U03C6TEAZ","ts":"1585042907.101200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"4mdt","elements":[{"elements":[{"text":"LspDefinition vs LspSplitDefinition","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f697913c-fbff-41c5-ac66-3fd1f70e7fce","type":"message","text":"LspDefinition split とかのほうがよかったりしないかなあ。（省略すると edit 扱い）コメントしてみます。","user":"U8R597E9H","ts":"1585044089.101700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"nQP","elements":[{"elements":[{"text":"LspDefinition split とかのほうがよかったりしないかなあ。（省略すると edit 扱い）コメントしてみます。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"3f42fb46-f534-45b7-8f78-dc51e6e6d482","type":"message","text":"それ私直そうと思ってたやつだな","user":"U03C71D7H","ts":"1585044288.102000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"0OviY","elements":[{"elements":[{"text":"それ私直そうと思ってたやつだな","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"9d8862ce-80e7-4cb4-99ba-ef6d4bb1c813","type":"message","text":"みんな自前でmappingしてるだろうな...","user":"UNJ2DANJC","ts":"1585044868.102800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"fyXjQ","elements":[{"elements":[{"text":"みんな自前でmappingしてるだろうな...","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"ca7ab811-f232-44fb-8670-50211f543a6e","type":"message","text":"自前では無理なんですよね","user":"U03C71D7H","ts":"1585044971.103100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"/Ci","elements":[{"elements":[{"text":"自前では無理なんですよね","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"1338e0cb-cfc1-40af-920c-9c140dbd07c7","type":"message","text":"似たような修正を入れようと思っていたのだけど(ただしもっと Vim way なやつ)、LSP の仕様を把握しきれていなくて `:LspXxx` のコマンド群の違いを理解できておらず、どのコマンドを対応させる必要があるのかわからなくなってそこで作業が止まっていた","user":"U03C71D7H","ts":"1585045073.104200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"rWM","elements":[{"elements":[{"text":"似たような修正を入れようと思っていたのだけど(ただしもっと Vim way なやつ)、LSP の仕様を把握しきれていなくて ","type":"text"},{"style":{"code":true},"text":":LspXxx","type":"text"},{"text":" のコマンド群の違いを理解できておらず、どのコマンドを対応させる必要があるのかわからなくなってそこで作業が止まっていた","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f4c374be-c8a9-4dd9-8c80-2a4671dd0ef3","type":"message","text":"`vsplit \\| LspDefinition` ,,, （ただし、定義箇所が見つからなくても vsplit してしまう）","user":"U8R597E9H","ts":"1585045185.105300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"/tw2","elements":[{"elements":[{"style":{"code":true},"text":"vsplit \\| LspDefinition","type":"text"},{"text":" ,,, （ただし、定義箇所が見つからなくても vsplit してしまう）","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"bd76099d-e8e9-4c72-aaea-508b1a1be154","type":"message","text":"こういうの私はやってました。  `nmap gs :split&lt;CR&gt;&lt;Plug&gt;(lsp-definition)`","user":"UNJ2DANJC","ts":"1585045229.106000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"dh8","elements":[{"elements":[{"text":"こういうの私はやってました。  ","type":"text"},{"style":{"code":true},"text":"nmap gs :split<CR><Plug>(lsp-definition)","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"0f0d9ed2-1c09-44bb-8363-e545da17f9d4","type":"message","text":"ジャンプ先がある時だけ分割ってのが既存のだと無理です","user":"U03C71D7H","ts":"1585045290.106500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"4kKtl","elements":[{"elements":[{"text":"ジャンプ先がある時だけ分割ってのが既存のだと無理です","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"45b62737-181c-4bd8-a7b6-646973275a7a","type":"message","text":"あーなるほど.... 理解しました...","user":"UNJ2DANJC","ts":"1585045317.107000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Ldvo","elements":[{"elements":[{"text":"あーなるほど.... 理解しました...","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"3784b2c5-cbf7-4562-80ff-6f323852ff62","type":"message","text":"もうちょっとだけマシな実装方法があるので急いでないのであればその分割コマンド進めるの待ってもらいたいのだが…いやまあ私がやる必要はないのか…","user":"U03C71D7H","ts":"1585045768.107900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"8tiR","elements":[{"elements":[{"text":"もうちょっとだけマシな実装方法があるので急いでないのであればその分割コマンド進めるの待ってもらいたいのだが…いやまあ私がやる必要はないのか…","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"0d80edd8-e426-42c6-9c43-dc870f66a6bf","type":"message","text":"あそこにコメントすると変わったりするかも。。。（OSS でこういう時どうするのかいまいちわかってないです。。。）","user":"U8R597E9H","ts":"1585045905.110400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"iDZN","elements":[{"elements":[{"text":"あそこにコメントすると変わったりするかも。。。（OSS でこういう時どうするのかいまいちわかってないです。。。）","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"1eed8974-5ed3-4e53-83e3-569d02b7a172","type":"message","text":"俺以外に世界を救える方法は無いと思い込んでモチベを激上げするメソッド","user":"U0M7GCBPD","ts":"1585045925.111000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"YTx5","elements":[{"elements":[{"text":"俺以外に世界を救える方法は無いと思い込んでモチベを激上げするメソッド","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"naruhodo","users":["UAZ33BKV2","U8CC7MDCL"],"count":2}]},{"client_msg_id":"25110644-e1ed-4ed8-b174-c0e4cd150f43","type":"message","text":"たぶん私が実装する前に誰かが進めてしまいそうなのでやり方だけ書き残しておこう…。\nこの手のことをやる場合は &lt;mods&gt; を使うのがセオリーです。\n`:vertical LspDefinition` や `:tab LspDefinition` のようにコマンドを実行することができて、この前置部分をコマンド定義内の `&lt;mods&gt;` で取れます。こちらの方が Vim way だと思います。","user":"U03C71D7H","ts":"1585045958.111500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"4jNsX","elements":[{"elements":[{"text":"たぶん私が実装する前に誰かが進めてしまいそうなのでやり方だけ書き残しておこう…。\nこの手のことをやる場合は <mods> を使うのがセオリーです。\n","type":"text"},{"style":{"code":true},"text":":vertical LspDefinition","type":"text"},{"text":" や ","type":"text"},{"style":{"code":true},"text":":tab LspDefinition","type":"text"},{"text":" のようにコマンドを実行することができて、この前置部分をコマンド定義内の ","type":"text"},{"style":{"code":true},"text":"<mods>","type":"text"},{"text":" で取れます。こちらの方が Vim way だと思います。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"naruhodo","users":["U0M7GCBPD","U9S4G0LJW","UFP0GQZ4K"],"count":3}]},{"client_msg_id":"1161b084-0b6e-4908-8faa-336ddd8c5c1b","type":"message","text":"手元で途中まで実装してたのだけど `LspDefinition` 系のコマンドがいくつかあることが途中でわかってどれが対応すべきコマンドなのか判断できませんでした","user":"U03C71D7H","ts":"1585046068.112300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"vWpcH","elements":[{"elements":[{"text":"手元で途中まで実装してたのだけど ","type":"text"},{"style":{"code":true},"text":"LspDefinition","type":"text"},{"text":" 系のコマンドがいくつかあることが途中でわかってどれが対応すべきコマンドなのか判断できませんでした","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"02378b00-1afb-4ebe-8c42-58e5ffa383d3","type":"message","text":"LSP の仕様書結構量があってなかなか読み進められない","user":"U03C71D7H","ts":"1585046100.112800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"2ocCC","elements":[{"elements":[{"text":"LSP の仕様書結構量があってなかなか読み進められない","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"592ba0c1-a60e-4b5b-9c10-f44825cef603","type":"message","text":"&lt;mods&gt; 使った場合、今 PR 上で提案されている `in_preview` やめて統一しましょう。についてはやらない方針になりそうですね。\n横分割の場合は何を指定するんだろうこれ。。。","user":"U8R597E9H","ts":"1585046589.114300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"uaDZ","elements":[{"elements":[{"text":"<mods> 使った場合、今 PR 上で提案されている ","type":"text"},{"style":{"code":true},"text":"in_preview","type":"text"},{"text":" やめて統一しましょう。についてはやらない方針になりそうですね。\n横分割の場合は何を指定するんだろうこれ。。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"05514192-490d-417c-96e1-7af569cf2502","type":"message","text":"belowright とかでいいのでは","user":"U03C71D7H","ts":"1585046762.114500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"iSt","elements":[{"elements":[{"text":"belowright とかでいいのでは","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"fb5ce358-090a-477b-ae27-c27fd3e28708","type":"message","text":"`:horizontal` があればいいのだけど…思えば標準のコマンドはその場で実行と分割実行だけはコマンド分かれているのよね `:edit` vs `:split`","user":"U03C71D7H","ts":"1585046926.116200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"YXkC","elements":[{"elements":[{"style":{"code":true},"text":":horizontal","type":"text"},{"text":" があればいいのだけど…思えば標準のコマンドはその場で実行と分割実行だけはコマンド分かれているのよね ","type":"text"},{"style":{"code":true},"text":":edit","type":"text"},{"text":" vs ","type":"text"},{"style":{"code":true},"text":":split","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"24af1f74-68ad-4f63-9a94-24d09d9e0774","type":"message","text":"`&lt;mods&gt;` 便利\n分割すべきかしないべきか (split か edit か) みたいなのは modifier では指定できなさそうだけど、そういうのはプラグイン側で踏み込んだオプションを用意するとかで良さそう","user":"U0M7GCBPD","ts":"1585046940.116500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"p1E/N","elements":[{"elements":[{"style":{"code":true},"text":"<mods>","type":"text"},{"text":" 便利\n分割すべきかしないべきか (split か edit か) みたいなのは modifier では指定できなさそうだけど、そういうのはプラグイン側で踏み込んだオプションを用意するとかで良さそう","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"a3b6d71d-6941-4c2f-a737-de9e64b10d23","type":"message","text":"微妙にかぶった","user":"U0M7GCBPD","ts":"1585046966.116800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"oY8Q","elements":[{"elements":[{"text":"微妙にかぶった","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"7cef702f-eed1-4cd6-890c-60eface665ae","type":"message","text":"実際に実装する場合は、 &lt;mods&gt; が空だったら `:edit` 、何か入ってたら `:&lt;mods&gt; split` を実行、みたいになるかな","user":"U03C71D7H","ts":"1585047034.117800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"27=","elements":[{"elements":[{"text":"実際に実装する場合は、 <mods> が空だったら ","type":"text"},{"style":{"code":true},"text":":edit","type":"text"},{"text":" 、何か入ってたら ","type":"text"},{"style":{"code":true},"text":":<mods> split","type":"text"},{"text":" を実行、みたいになるかな","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"sasu_manbou","users":["U0M7GCBPD","U9S4G0LJW","U8CC7MDCL"],"count":3}]},{"client_msg_id":"334d817d-a369-4135-9f23-b73c12c73f16","type":"message","text":"あとキーマッピングには対応できないけど、それくらい各位設定してくれでもいい気がする","user":"U03C71D7H","ts":"1585047073.118400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"UWYWl","elements":[{"elements":[{"text":"あとキーマッピングには対応できないけど、それくらい各位設定してくれでもいい気がする","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"78ca44d9-b27a-4831-85ce-cce90f857573","type":"message","text":"mods が空なら edit で完全理解です。なるほど。","user":"U8R597E9H","ts":"1585047087.118800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"GSesP","elements":[{"elements":[{"text":"mods が空なら edit で完全理解です。なるほど。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f53c188f-0b5c-4045-b460-797c8f83b5de","type":"message","text":"どうせ &lt;Plug&gt; に対するキーマッピングはどのみちユーザーが定義する必要があるし。マッピング先が &lt;Plug&gt; か `:vert LspDefinition` かは大差がない…","user":"U03C71D7H","ts":"1585047124.119700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"a2AF","elements":[{"elements":[{"text":"どうせ <Plug> に対するキーマッピングはどのみちユーザーが定義する必要があるし。マッピング先が <Plug> か ","type":"text"},{"style":{"code":true},"text":":vert LspDefinition","type":"text"},{"text":" かは大差がない…","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"5b238e1e-e42f-4dfe-b3db-b96ef2c52ac0","type":"message","text":"最近、特に意味がない場合はコマンド提供して &lt;Plug&gt; マッピング提供しないほうが筋よさそうだなあと思いつつあります。","user":"U8R597E9H","ts":"1585047175.120900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"mJX","elements":[{"elements":[{"text":"最近、特に意味がない場合はコマンド提供して <Plug> マッピング提供しないほうが筋よさそうだなあと思いつつあります。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"377c2580-01b5-4e81-a9f4-4ddc5f679a10","type":"message","text":"というのを途中までやってたんですけどね(まだ全然出せる段階じゃないけど)。手が遅いと何をやってもダメですね","user":"U03C71D7H","ts":"1585047179.121100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"UAF5","elements":[{"elements":[{"text":"というのを途中までやってたんですけどね(まだ全然出せる段階じゃないけど)。手が遅いと何をやってもダメですね","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"848f9ff4-1d86-4876-8311-54bdc2ddaae3","type":"message","text":"コマンドでできることをそのまま &lt;Plug&gt; 提供するのは意味ないなと私も感じております。","user":"U03C71D7H","ts":"1585047209.121800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"YzB","elements":[{"elements":[{"text":"コマンドでできることをそのまま <Plug> 提供するのは意味ないなと私も感じております。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"c9019d80-4ed3-434d-a5f6-872a4cec5a5c","type":"message","text":"最近今更ながらプラグインのバッファを開く指定方法で良い方法ないかと考えてて、とりあえずプラグイン側は :sb 使って 'switchbuf' オプション指定してくれとか思ってたけど、こっちのがより行儀良い感じがする","user":"U0M7GCBPD","ts":"1585047210.121900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"ZLGrO","elements":[{"elements":[{"text":"最近今更ながらプラグインのバッファを開く指定方法で良い方法ないかと考えてて、とりあえずプラグイン側は :sb 使って 'switchbuf' オプション指定してくれとか思ってたけど、こっちのがより行儀良い感じがする","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"edited":{"user":"U0M7GCBPD","ts":"1585047249.000000"}},{"client_msg_id":"c2bfdf74-21bb-47e6-b6bc-d24a40f3b233","type":"message","text":"_ちなみに自分はなんでも指定できるという意味で `LspDefinition split` 方式も結構好きです。。。_","user":"U8R597E9H","ts":"1585047277.122900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"wQk","elements":[{"elements":[{"style":{"italic":true},"text":"ちなみに自分はなんでも指定できるという意味で ","type":"text"},{"style":{"code":true,"italic":true},"text":"LspDefinition split","type":"text"},{"style":{"italic":true},"text":" 方式も結構好きです。。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"1d996486-7870-4a31-9e77-9bf83f55fae6","type":"message","text":"他にも微妙に改善したいポイントが少なくとも1つある…まあこっちはたぶん誰もやらないだろ…黙っておこw","user":"U03C71D7H","ts":"1585047281.123000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"27gth","elements":[{"elements":[{"text":"他にも微妙に改善したいポイントが少なくとも1つある…まあこっちはたぶん誰もやらないだろ…黙っておこw","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"86b9688c-17a2-4f73-a017-25339e0d0053","type":"message","text":"当面のタスクは LSP の仕様書を一通り読む、です。これができてないと vim-lsp は触れないなと思っている (ただし読むのは日本語訳である)","user":"U03C71D7H","ts":"1585047347.124100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"p8S","elements":[{"elements":[{"text":"当面のタスクは LSP の仕様書を一通り読む、です。これができてないと vim-lsp は触れないなと思っている (ただし読むのは日本語訳である)","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"24705669-9451-48a3-bb50-9600347d8c5c","type":"message","text":"分割の件は週末までに特に進展がなさそうならなんとか作業を進めて別 PR 出そうかな。対応すべきコマンドは 4 つっぽいと言うのはわかったので","user":"U03C71D7H","ts":"1585047953.125600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"GLsy","elements":[{"elements":[{"text":"分割の件は週末までに特に進展がなさそうならなんとか作業を進めて別 PR 出そうかな。対応すべきコマンドは 4 つっぽいと言うのはわかったので","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"4cdefb92-c1f3-495a-87d7-c6ba94426abe","type":"message","text":"僕は定義ジャンプで(LspDefinition等他LSクライアントのも) で split のは当初は欲しかったのですが手癖で慣れてしまいました。やる方法があるってだけでもたしかにありがたい","user":"U7TMPGWJ0","ts":"1585048731.126300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"8p=s","elements":[{"elements":[{"text":"僕は定義ジャンプで(LspDefinition等他LSクライアントのも) で split のは当初は欲しかったのですが手癖で慣れてしまいました。やる方法があるってだけでもたしかにありがたい","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"2871fc5e-dc40-41e9-be9b-fa41cd8ebd97","type":"message","text":"類似した件になるかもですが LspDefinition で readonly で飛べたりしたら安全だなーって思うことはあります。ライブラリに飛んで保存しちゃってフォーマッターかかっちゃったりしてとか怖いときがあります。言語自体のライブラリ(goとかpythonとか)は更に怖い","user":"U7TMPGWJ0","ts":"1585048832.127400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Upi","elements":[{"elements":[{"text":"類似した件になるかもですが LspDefinition で readonly で飛べたりしたら安全だなーって思うことはあります。ライブラリに飛んで保存しちゃってフォーマッターかかっちゃったりしてとか怖いときがあります。言語自体のライブラリ(goとかpythonとか)は更に怖い","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"60086595-cfef-4bc2-b283-a96055eb9fa5","type":"message","text":"`&lt;mods&gt;` は便利ですね","user":"U77U7B85A","ts":"1585048849.128400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"riqN","elements":[{"elements":[{"style":{"code":true},"text":"<mods>","type":"text"},{"text":" は便利ですね","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"39a1ca94-b63e-494f-a0d4-7c4a6faa774a","type":"message","text":"`:tab`みたいなの、ユーザーコマンドは未対応と思っていたけど、ちゃんと手は用意されているのか","user":"U9S4G0LJW","ts":"1585048858.128900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"iXvz","elements":[{"elements":[{"style":{"code":true},"text":":tab","type":"text"},{"text":"みたいなの、ユーザーコマンドは未対応と思っていたけど、ちゃんと手は用意されているのか","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"6f1f0f59-adcf-4d88-b113-9d0cda10c4b2","type":"message","text":"逆にreadonlyでバッファの事故が発生しそうですが。。","user":"U7TMPGWJ0","ts":"1585048865.129100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"IVD","elements":[{"elements":[{"text":"逆にreadonlyでバッファの事故が発生しそうですが。。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"ba67c01d-f5a1-492f-b7fd-040a516bf6ab","type":"message","text":"LspDefinitionでsplitしたくてそれっぽい設定をしようとしてたんですが、tagfuncでいいや...になっちゃいました","user":"U77U7B85A","ts":"1585048899.129700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"cCf","elements":[{"elements":[{"text":"LspDefinitionでsplitしたくてそれっぽい設定をしようとしてたんですが、tagfuncでいいや...になっちゃいました","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"11a4e482-280b-4775-ac6a-5b9781627950","type":"message","text":"ライブラリをchmodしておくと便利(面倒でやらなくなって忘れた頃に事故るやつ)","user":"U9S4G0LJW","ts":"1585048927.130600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"XB2","elements":[{"elements":[{"text":"ライブラリをchmodしておくと便利(面倒でやらなくなって忘れた頃に事故るやつ)","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"8be03315-236b-4b53-aa19-c07d69a67474","type":"message","text":"helpはROになるのでそんな感じで合わせておくとよさそう(必要だったらsetすればいいし)","user":"U9S4G0LJW","ts":"1585049033.132000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"pIA","elements":[{"elements":[{"text":"helpはROになるのでそんな感じで合わせておくとよさそう(必要だったらsetすればいいし)","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"59317859-c067-47e3-82bb-6d991b30df6d","type":"message","text":"`autocmd BufReadPost /path/to/library/* setlocal readonly`","user":"U03C71D7H","ts":"1585049068.132500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"FEDf","elements":[{"elements":[{"style":{"code":true},"text":"autocmd BufReadPost /path/to/library/* setlocal readonly","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"benri","users":["U9S4G0LJW"],"count":1}]},{"client_msg_id":"282db57c-a678-4b07-bfe5-0ac050f2f6d1","type":"message","text":"`/path/to/library/*` は `*/{vendor,node_modules}/*` みたいにすると汎用的になりそう","user":"U03C71D7H","ts":"1585049235.134300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"YhI","elements":[{"elements":[{"style":{"code":true},"text":"/path/to/library/*","type":"text"},{"text":" は ","type":"text"},{"style":{"code":true},"text":"*/{vendor,node_modules}/*","type":"text"},{"text":" みたいにすると汎用的になりそう","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"cfa07246-43b1-4ecd-8bd7-4980a48a420d","type":"message","text":"雑に site-package 以下のものをデバッグプリント仕込んだり、node_modules 以下のトランスパイル後のファイルに console.log 仕込んだりするマンです。\nもちろん元戻しますけど(最悪ライブラリーを入れ直す)","user":"U78A6ESHM","ts":"1585051154.135700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"ymI1","elements":[{"elements":[{"text":"雑に site-package 以下のものをデバッグプリント仕込んだり、node_modules 以下のトランスパイル後のファイルに console.log 仕込んだりするマンです。\nもちろん元戻しますけど(最悪ライブラリーを入れ直す)","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"3BB12B00-0704-4F8D-B74F-1F56CB0849FD","type":"message","text":"標準ライブラリが怖いんですよね。","user":"U7TMPGWJ0","ts":"1585051996.136600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"aru36","elements":[{"elements":[{"text":"標準ライブラリが怖いんですよね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"ff6bcb69-7cd7-4f18-a092-3a9f2e60b315","type":"message","text":"標準ライブラリまでジャンプで飛べる言語最近書いてない気がしてきた","user":"U03C71D7H","ts":"1585052098.137900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"YY9E","elements":[{"elements":[{"text":"標準ライブラリまでジャンプで飛べる言語最近書いてない気がしてきた","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"6026E528-9763-4A32-9168-C649F4BD65D3","type":"message","text":"まー、といっても事故ったことはない気がしますが気がしてるだけなのかも。気をつける","user":"U7TMPGWJ0","ts":"1585052185.140500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Z8G3M","elements":[{"elements":[{"text":"まー、といっても事故ったことはない気がしますが気がしてるだけなのかも。気をつける","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"3010f713-561c-4acc-a13b-e7ef16673d8f","type":"message","text":"venv 作り直し :innocent:","user":"U78A6ESHM","ts":"1585052207.140800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"I20w7","elements":[{"elements":[{"text":"venv 作り直し ","type":"text"},{"name":"innocent","type":"emoji"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"gunnyari","users":["U9S4G0LJW"],"count":1}]},{"client_msg_id":"227cd783-c39e-46f2-b186-2dc1c506afbd","type":"message","text":"gitごと落としてくるやつならcheckoutすれば済むけどそうじゃないのつらそう","user":"U9S4G0LJW","ts":"1585052245.141300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"dHBPl","elements":[{"elements":[{"text":"gitごと落としてくるやつならcheckoutすれば済むけどそうじゃないのつらそう","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"7422eb2a-93a2-4e7d-b419-0e0c48f796fb","type":"message","text":"最近のライブラリーなら割とカジュアルに作り直せそうですね。","user":"U78A6ESHM","ts":"1585052281.141800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"lvIZ0","elements":[{"elements":[{"text":"最近のライブラリーなら割とカジュアルに作り直せそうですね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"ec6662c5-4c95-4bcc-8e9f-2fda26b82bc8","type":"message","text":"まあでも標準ライブラリもどこかにファイルが置いてあるんであれば RO 設定するのはできるのでは?","user":"U03C71D7H","ts":"1585052299.142700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"LQg0G","elements":[{"elements":[{"text":"まあでも標準ライブラリもどこかにファイルが置いてあるんであれば RO 設定するのはできるのでは?","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"3e109b7c-d17b-4358-be88-c54819855720","type":"message","text":"そすねー。","user":"U78A6ESHM","ts":"1585052314.143100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"+3Ov","elements":[{"elements":[{"text":"そすねー。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"3b0cac2e-17c6-4060-85ba-c26fa30fbbe7","type":"message","text":"Pythonのvenvってコピーされてるんじゃなくて本体に飛んじゃうので","user":"U7TMPGWJ0","ts":"1585052315.143300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"x7b","elements":[{"elements":[{"text":"Pythonのvenvってコピーされてるんじゃなくて本体に飛んじゃうので","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f6b6be92-0670-4a5b-94c2-df0aeccf97fc","type":"message","text":"あれ、そうでしたっけ。","user":"U78A6ESHM","ts":"1585052329.143700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"W0F","elements":[{"elements":[{"text":"あれ、そうでしたっけ。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"975a557d-ea1d-40e1-a7b4-ebdcd73a47e7","type":"message","text":"そうですね。RO仕込めば不安がなくなるかも","user":"U7TMPGWJ0","ts":"1585052332.143900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"i+Hx","elements":[{"elements":[{"text":"そうですね。RO仕込めば不安がなくなるかも","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"32ee89b0-320f-48de-a983-a7b14537dc89","type":"message","text":"virtualenv マンだから気にしてなかったw","user":"U78A6ESHM","ts":"1585052338.144100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"LCt","elements":[{"elements":[{"text":"virtualenv マンだから気にしてなかったw","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"73d650bb-2516-4647-8868-0b42f347d4e9","type":"message","text":"じゃあまぁやっておいたほうが安心ですね。","user":"U78A6ESHM","ts":"1585052371.144400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"DWWdz","elements":[{"elements":[{"text":"じゃあまぁやっておいたほうが安心ですね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"69c1cfe8-94df-4371-89ca-5a82fa02df38","type":"message","text":"rust-analyzer の onTypeFormatting や めっちゃくちゃ複雑な補完後の textEdit 処理などで三角測量的に TextEdit の実装がまともになってきました。","user":"U8R597E9H","ts":"1585052651.145400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"OkGV","elements":[{"elements":[{"text":"rust-analyzer の onTypeFormatting や めっちゃくちゃ複雑な補完後の textEdit 処理などで三角測量的に TextEdit の実装がまともになってきました。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"subara","users":["UAZ33BKV2","U9S4G0LJW","U7TMPGWJ0"],"count":3}]},{"client_msg_id":"318b3bf1-bf96-442f-aa88-40866d6bd918","type":"message","text":"daisuzu さんの tagfunc のおかげで LspDefinition は直接使わず、そのまま開きたい時は CTRL-] で 分割したい時は CTRL-W_] で開いた後、縦にしたい時は CTRL-W_L みたいな感じにやってますね","user":"UD73ZNZAP","ts":"1585057385.149700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"ulHl9","elements":[{"elements":[{"text":"daisuzu さんの tagfunc のおかげで LspDefinition は直接使わず、そのまま開きたい時は CTRL-] で 分割したい時は CTRL-W_] で開いた後、縦にしたい時は CTRL-W_L みたいな感じにやってますね","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"3bfb9de7-4ec1-4e32-b947-21dd368ea871","type":"message","text":"`確認したいです`\nasyncompleteなんですが、ソースに vimのdictionary,thesaurusを引いてくるようなのってありましたっけ?(仕組み的に難しいかもですが...)","user":"UAZ33BKV2","ts":"1585061029.150700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"v2gIK","elements":[{"elements":[{"style":{"code":true},"text":"確認したいです","type":"text"},{"text":"\nasyncompleteなんですが、ソースに vimのdictionary,thesaurusを引いてくるようなのってありましたっけ?(仕組み的に難しいかもですが...)","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"85d5fbd5-4662-49c5-87ba-13de7978a50d","type":"message","text":"うーん、やっぱなさそう?","user":"UAZ33BKV2","ts":"1585061489.151000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"VNJnf","elements":[{"elements":[{"text":"うーん、やっぱなさそう?","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"82ec07ca-09c2-4b98-ac77-6288d8c569f8","type":"message","text":"遠い昔にncm2のソースを書いた記憶があって見つかったんですが、asyncompleteと互換性って多分ないですよね・・・？","user":"U8996GYBF","ts":"1585061611.151500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"N/ho","elements":[{"elements":[{"text":"遠い昔にncm2のソースを書いた記憶があって見つかったんですが、asyncompleteと互換性って多分ないですよね・・・？","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"0ffdc70a-82ec-41d2-bd1d-8c2bfd217cff","type":"message","text":"ncm、asyncompleteが必要とかだった気がしたんだけど完全に気のせいっぽい","user":"U8996GYBF","ts":"1585061725.152500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"3ND","elements":[{"elements":[{"text":"ncm、asyncompleteが必要とかだった気がしたんだけど完全に気のせいっぽい","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]}]
