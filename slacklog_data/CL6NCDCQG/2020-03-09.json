[{"client_msg_id":"44f799ec-f109-4891-8c9e-a12fb8134967","type":"message","text":"curl で 4xx 系だった時はコマンドを失敗にしたいのだけど、レスポンスの表示もしたい場合ってどうすればいいでしょう? `--fail` だとレスポンスが表示されず…","user":"U03C71D7H","ts":"1583680818.199200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"uAHL","elements":[{"elements":[{"text":"curl で 4xx 系だった時はコマンドを失敗にしたいのだけど、レスポンスの表示もしたい場合ってどうすればいいでしょう? ","type":"text"},{"style":{"code":true},"text":"--fail","type":"text"},{"text":" だとレスポンスが表示されず…","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"F44B7135-BC99-478A-A55A-72E4BC638FD5","type":"message","text":"-o とか指定してもダメな感じすか？","user":"UDDCM376D","ts":"1583681164.199900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"6XX","elements":[{"elements":[{"text":"-o とか指定してもダメな感じすか？","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"0bb4ebbb-62a2-40ee-afcf-ecde3c1fd5ce","type":"message","text":"ググったらシェルで頑張るという答えとwgetを使うという答えが出てきました:totemoturai:","user":"U9S4G0LJW","ts":"1583681291.200500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Pyk","elements":[{"elements":[{"text":"ググったらシェルで頑張るという答えとwgetを使うという答えが出てきました","type":"text"},{"name":"totemoturai","type":"emoji"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"4ad7f938-97a9-4a1f-b4e3-f32c7bd23dee","type":"message","text":"<https://stackoverflow.com/questions/22506024/get-page-output-with-curl-fail>","user":"U9S4G0LJW","ts":"1583681296.200700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"Stack Overflow","title":"Get page output with curl --fail","title_link":"https://stackoverflow.com/questions/22506024/get-page-output-with-curl-fail","text":"Calling curl without parameters, i get the page output, even with an http status code = 404: $ curl <http://www.google.com/linux;> <!DOCTYPE html> &lt;html lang=en&gt; &lt;meta charset=utf-8...","fallback":"Stack Overflow: Get page output with curl --fail","thumb_url":"https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded","from_url":"https://stackoverflow.com/questions/22506024/get-page-output-with-curl-fail","thumb_width":316,"thumb_height":316,"service_icon":"https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon.png?v=c78bd457575a","id":1,"original_url":"https://stackoverflow.com/questions/22506024/get-page-output-with-curl-fail"}],"blocks":[{"block_id":"32rY","elements":[{"elements":[{"type":"link","url":"https://stackoverflow.com/questions/22506024/get-page-output-with-curl-fail"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"567739a4-844f-4724-aaaa-4b9683a8e055","type":"message","text":"curl単品だと無理っぽい、manにも-f付けないと終了コード22は使われないよって書いてあるし","user":"U9S4G0LJW","ts":"1583681373.201700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"3vAc0","elements":[{"elements":[{"text":"curl単品だと無理っぽい、manにも-f付けないと終了コード22は使われないよって書いてあるし","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"de495960-ef5c-4828-85c2-f2927e421ed7","type":"message","text":"-o指定しても-f付いてたら保存されない","user":"U9S4G0LJW","ts":"1583681399.202000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"DxmR","elements":[{"elements":[{"text":"-o指定しても-f付いてたら保存されない","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"44ce2280-8ce7-4628-b8e7-8fd8d2f164bd","type":"message","text":"15年前からドキュメントに書いてある、と close される issue です。ご確認下さい。 <https://github.com/curl/curl/issues/1978>","user":"U03C6TEAZ","ts":"1583681492.202700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"GitHub","title":"use of --fail hides http headers/body · Issue #1978 · curl/curl","title_link":"https://github.com/curl/curl/issues/1978","text":"I did this % curl --fail --dump-header - --request POST --data-urlencode foo=bar 127.0.0.1:9999 curl: (22) The requested URL returned error: 403 Forbidden % echo $? 22 I expected the following % cu...","fallback":"GitHub: use of --fail hides http headers/body · Issue #1978 · curl/curl","thumb_url":"https://repository-images.githubusercontent.com/569041/a7c0b500-5cae-11e9-9287-1d94b1db9c95","from_url":"https://github.com/curl/curl/issues/1978","thumb_width":500,"thumb_height":250,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","id":1,"original_url":"https://github.com/curl/curl/issues/1978"}],"blocks":[{"block_id":"1/nI9","elements":[{"elements":[{"text":"15年前からドキュメントに書いてある、と close される issue です。ご確認下さい。 ","type":"text"},{"type":"link","url":"https://github.com/curl/curl/issues/1978"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"eyes","users":["U9S4G0LJW"],"count":1}]},{"client_msg_id":"fe9ef34d-1d8e-4902-ac62-4fbb2e2fda5a","type":"message","text":"とてもつらい","user":"U03C71D7H","ts":"1583681746.203100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"svqm","elements":[{"elements":[{"text":"とてもつらい","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"7f288bf3-c5cf-4def-9589-66a20d406ad8","type":"message","text":"GitHub API を curl で叩くのに、失敗したらそこで止まってほしいけど失敗の理由は出力されてほしい…","user":"U03C71D7H","ts":"1583681891.203700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"tSaVo","elements":[{"elements":[{"text":"GitHub API を curl で叩くのに、失敗したらそこで止まってほしいけど失敗の理由は出力されてほしい…","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"19636776-60f8-40fe-9704-fd6468162b40","type":"message","text":"メッセージは stderr にでますけどそれでは不十分？","user":"U03C6TEAZ","ts":"1583682153.204100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"FZuI","elements":[{"elements":[{"text":"メッセージは stderr にでますけどそれでは不十分？","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"8a14735a-e7ff-4d80-9f06-e4ead4f978aa","type":"message","text":"あれ、レスポンスの body でます?","user":"U03C71D7H","ts":"1583682261.204300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"VxwtY","elements":[{"elements":[{"text":"あれ、レスポンスの body でます?","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"126325e8-2d2a-48c3-ace1-4d88f9df8d36","type":"message","text":"メッセージだけ出ます。","user":"U03C6TEAZ","ts":"1583682283.204700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Wks","elements":[{"elements":[{"text":"メッセージだけ出ます。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"88a7c493-11cb-4bd7-b45c-7bdd73bda10f","type":"message","text":"header の。","user":"U03C6TEAZ","ts":"1583682292.205000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"sMJj","elements":[{"elements":[{"text":"header の。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"e771945d-6afd-4c86-9698-f521f6fe5c04","type":"message","text":"API は失敗するとレスポンスの body に失敗の理由を返してくれるので、できればそれを残したい感じです","user":"U03C71D7H","ts":"1583682309.205400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Tyl3","elements":[{"elements":[{"text":"API は失敗するとレスポンスの body に失敗の理由を返してくれるので、できればそれを残したい感じです","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"7d217534-d614-4c99-84bf-a9f0395822db","type":"message","text":"stackoverflow とか見ると wget 使えと書いてますね。","user":"U03C6TEAZ","ts":"1583682346.206100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"fom9","elements":[{"elements":[{"text":"stackoverflow とか見ると wget 使えと書いてますね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"5126b8f1-42dd-4c71-866d-a5ded92367d7","type":"message","text":"wget かー POST が割とダルいイメージ…","user":"U03C71D7H","ts":"1583682382.206500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"a66","elements":[{"elements":[{"text":"wget かー POST が割とダルいイメージ…","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"b412a7d4-8b4f-418a-86f3-b0233e615788","type":"message","text":"がんばるしかないか","user":"U03C71D7H","ts":"1583682469.207500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"+dzb","elements":[{"elements":[{"text":"がんばるしかないか","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f9779e3c-069b-47a9-8155-f47b5a4b2424","type":"message","text":"HTTP のレスポンスが HTML 返すか `{\"error\": \"xxx\"}` 返すかは特にルール無いので(ドキュメント化されてなければ)、もし取れても汎用的に作れるかどうかは分からないすねー。","user":"U03C6TEAZ","ts":"1583682488.207900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"oUFay","elements":[{"elements":[{"text":"HTTP のレスポンスが HTML 返すか ","type":"text"},{"style":{"code":true},"text":"{\"error\": \"xxx\"}","type":"text"},{"text":" 返すかは特にルール無いので(ドキュメント化されてなければ)、もし取れても汎用的に作れるかどうかは分からないすねー。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"ba4f30e6-0dcb-4b6e-ab0b-e32ffe973ef9","type":"message","text":"あー単に人が見る用なので形式はなんでもよいのです。GHA が失敗した時に理由がないとしんどいと言うアレ","user":"U03C71D7H","ts":"1583682536.208700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"43J","elements":[{"elements":[{"text":"あー単に人が見る用なので形式はなんでもよいのです。GHA が失敗した時に理由がないとしんどいと言うアレ","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"naruhodo","users":["U03C6TEAZ"],"count":1}]},{"client_msg_id":"c60274a8-dd41-4af6-92fe-e221fbe61cb5","type":"message","text":"<https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md>\nwget はさすがに入ってそうなのでやるか","user":"U03C71D7H","ts":"1583682628.209200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"GitHub","title":"actions/virtual-environments","title_link":"https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md","text":"GitHub Actions virtual environments. Contribute to actions/virtual-environments development by creating an account on GitHub.","fallback":"GitHub: actions/virtual-environments","thumb_url":"https://avatars2.githubusercontent.com/u/44036562?s=400&v=4","from_url":"https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md","thumb_width":400,"thumb_height":400,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","id":1,"original_url":"https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md"}],"blocks":[{"block_id":"ppB","elements":[{"elements":[{"type":"link","url":"https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md"},{"text":"\nwget はさすがに入ってそうなのでやるか","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f20c4fe5-7272-4afb-90f6-3fa87f68673a","type":"message","text":"wget で検索しているのに curl を含む結果を返してくる Google さん…","user":"U03C71D7H","ts":"1583682671.209700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"HN7W","elements":[{"elements":[{"text":"wget で検索しているのに curl を含む結果を返してくる Google さん…","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"0c79fc9a-406e-47b2-8255-a428d7c53afb","type":"message","text":"curl のコマンドラインを wget に変換するツールほしい","user":"U03C71D7H","ts":"1583682721.210100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"t246","elements":[{"elements":[{"text":"curl のコマンドラインを wget に変換するツールほしい","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"95a6b1be-c8f1-4e7e-a2ad-aa4b627f9e28","type":"message","text":"たぶん書き直せた。 `--content-on-error` 最高","user":"U03C71D7H","ts":"1583683232.210400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"b/E","elements":[{"elements":[{"text":"たぶん書き直せた。 ","type":"text"},{"style":{"code":true},"text":"--content-on-error","type":"text"},{"text":" 最高","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"tiken","users":["U9S4G0LJW"],"count":1}]},{"client_msg_id":"6fa2d02c-2d1f-4184-b22e-fbf06a5fd3b6","type":"message","text":"あとは、 `-v` つけて、 `&lt; HTTP/2 404` とか `&lt; HTTP/1.1 404` を `grep` するとか？","user":"U06ECBRTJ","ts":"1583684763.211800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"hPR9h","elements":[{"elements":[{"text":"あとは、 ","type":"text"},{"style":{"code":true},"text":"-v","type":"text"},{"text":" つけて、 ","type":"text"},{"style":{"code":true},"text":"< HTTP/2 404","type":"text"},{"text":" とか ","type":"text"},{"style":{"code":true},"text":"< HTTP/1.1 404","type":"text"},{"text":" を ","type":"text"},{"style":{"code":true},"text":"grep","type":"text"},{"text":" するとか？","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"5b3bd944-ecde-4d97-bb48-12fa7f65eb35","type":"message","text":"絶対にやりたくない","user":"U03C71D7H","ts":"1583684865.212000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"QDfFi","elements":[{"elements":[{"text":"絶対にやりたくない","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"50e12619-da11-40a8-975a-af1a2e345567","type":"message","text":"もしそれやるなら `-i` がいい。","user":"U03C6TEAZ","ts":"1583684919.212500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"tsh","elements":[{"elements":[{"text":"もしそれやるなら ","type":"text"},{"style":{"code":true},"text":"-i","type":"text"},{"text":" がいい。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"0f47ce6d-f439-4999-b07b-385907c8f02e","type":"message","text":"確かにそうですね","user":"U06ECBRTJ","ts":"1583684948.213200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"eQ9+F","elements":[{"elements":[{"text":"確かにそうですね","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"3896552f-21a0-4e56-8e32-c1ef05aaca84","type":"message","text":"Ruby とかならともかく Bash ではやりたくないですねw","user":"U03C71D7H","ts":"1583684955.213400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"q+C8w","elements":[{"elements":[{"text":"Ruby とかならともかく Bash ではやりたくないですねw","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"8139f4c7-8540-4a80-94ce-e28dd7af622e","type":"message","text":"もしくは、 `--head` か…","user":"U06ECBRTJ","ts":"1583684969.213700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"OaX1","elements":[{"elements":[{"text":"もしくは、 ","type":"text"},{"style":{"code":true},"text":"--head","type":"text"},{"text":" か…","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"75ad8e2b-bb34-400d-9952-604e91c67efa","type":"message","text":"今日のarchlinux活の様子です <https://aur.archlinux.org/packages/acroread/#comment-732753>","user":"U03C4RC8X","ts":"1583688113.214000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"aur.archlinux.org","title":"AUR (en) - acroread","title_link":"https://aur.archlinux.org/packages/acroread/#comment-732753","text":"Adobe Acrobat Reader is a PDF file viewer","fallback":"AUR (en) - acroread","from_url":"https://aur.archlinux.org/packages/acroread/#comment-732753","id":1,"original_url":"https://aur.archlinux.org/packages/acroread/#comment-732753"}],"blocks":[{"block_id":"nG3","elements":[{"elements":[{"text":"今日のarchlinux活の様子です ","type":"text"},{"type":"link","url":"https://aur.archlinux.org/packages/acroread/#comment-732753"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"bf1a2f91-b19b-4748-b98a-9c7d77d4f387","type":"message","text":"<https://ja.wikipedia.org/wiki/Adwaita_(%E3%83%86%E3%83%BC%E3%83%9E)>\nadwaita ってこれだろうけど、 warn として出ても、無視して大丈夫って割と思ってた","user":"U06ECBRTJ","ts":"1583713144.214900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"author_name":"Wikipedia","title":"Adwaita (テーマ)","title_link":"https://ja.wikipedia.org/wiki/Adwaita_(%E3%83%86%E3%83%BC%E3%83%9E)","text":"Adwaita（アドワイタ）は、GTK向けのテーマ。また、同名のアイコンのセットも存在する。GNOMEデスクトップ環境において、バージョン3以降のデフォルトのテーマとなっている。","fallback":"wikipedia: Adwaita (テーマ)","from_url":"https://ja.wikipedia.org/wiki/Adwaita_(%E3%83%86%E3%83%BC%E3%83%9E)","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/wikipedia.png","id":1,"original_url":"https://ja.wikipedia.org/wiki/Adwaita_(%E3%83%86%E3%83%BC%E3%83%9E)"}],"blocks":[{"block_id":"g=T","elements":[{"elements":[{"type":"link","url":"https://ja.wikipedia.org/wiki/Adwaita_(%E3%83%86%E3%83%BC%E3%83%9E)"},{"text":"\nadwaita ってこれだろうけど、 warn として出ても、無視して大丈夫って割と思ってた","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"b629a158-8411-42fe-a5f9-07d48240dd12","type":"message","text":"うむ、おそらくこれは無関係&gt;adwaita","user":"U03C4RC8X","ts":"1583717038.215500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"OA4","elements":[{"elements":[{"text":"うむ、おそらくこれは無関係>adwaita","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]}]
