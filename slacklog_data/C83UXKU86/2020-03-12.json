[{"client_msg_id":"78f0d7ec-709c-4a05-9d40-e2ff4f772aaf","type":"message","text":"今日のオレオレビルドからlambda高速化パッチを入れてみた。常用してみる。\n<https://github.com/k-takata/vim-kt/releases/tag/v8.2.0373>\n体感できる差はないだろうけど。","user":"U6XP9LZ6V","ts":"1583992545.348300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"GitHub","title":"k-takata/vim-kt","title_link":"https://github.com/k-takata/vim-kt/releases/tag/v8.2.0373","text":"K.Takata's private Vim package for Windows. Contribute to k-takata/vim-kt development by creating an account on GitHub.","fallback":"GitHub: k-takata/vim-kt","thumb_url":"https://avatars0.githubusercontent.com/u/840186?s=400&v=4","from_url":"https://github.com/k-takata/vim-kt/releases/tag/v8.2.0373","thumb_width":320,"thumb_height":320,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","id":1,"original_url":"https://github.com/k-takata/vim-kt/releases/tag/v8.2.0373"}],"blocks":[{"block_id":"7md","elements":[{"elements":[{"text":"今日のオレオレビルドからlambda高速化パッチを入れてみた。常用してみる。\n","type":"text"},{"type":"link","url":"https://github.com/k-takata/vim-kt/releases/tag/v8.2.0373"},{"text":"\n体感できる差はないだろうけど。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"goodpoem","users":["U9S4G0LJW","UAZ33BKV2","UEACRCY0Z","U06BRP8VD"],"count":4},{"name":"subara","users":["UAZ33BKV2","U03C6TEAZ","U06BRP8VD"],"count":3}]},{"client_msg_id":"86588aa8-f2a1-4f65-a9a2-837d075a1ab9","type":"message","text":"Vimのhash (dict)の実装、Rubyのhash (st.c)に差し替えたら速くなったりしないかなーって妄想してる。","user":"U6XP9LZ6V","ts":"1583997986.350500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"v=M+L","elements":[{"elements":[{"text":"Vimのhash (dict)の実装、Rubyのhash (st.c)に差し替えたら速くなったりしないかなーって妄想してる。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"348b0ab4-2673-4d2d-b35b-6001ac51c020","type":"message","text":"<https://github.com/ruby/ruby/blob/master/st.c>","user":"U6XP9LZ6V","ts":"1583998048.350700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"GitHub","title":"ruby/ruby","title_link":"https://github.com/ruby/ruby/blob/master/st.c","text":"The Ruby Programming Language [mirror]. Contribute to ruby/ruby development by creating an account on GitHub.","fallback":"GitHub: ruby/ruby","thumb_url":"https://avatars0.githubusercontent.com/u/210414?s=400&v=4","from_url":"https://github.com/ruby/ruby/blob/master/st.c","thumb_width":400,"thumb_height":400,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","id":1,"original_url":"https://github.com/ruby/ruby/blob/master/st.c"}],"blocks":[{"block_id":"uAa+","elements":[{"elements":[{"type":"link","url":"https://github.com/ruby/ruby/blob/master/st.c"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"f2cf7b14-2e22-4a44-bf31-1a6560154ff4","type":"message","text":"Vim の実装は素朴ですからね…\nライセンス的には問題はない?","user":"U03C71D7H","ts":"1583998118.351500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Y7k","elements":[{"elements":[{"text":"Vim の実装は素朴ですからね…\nライセンス的には問題はない?","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"41e70774-29de-4511-831e-6325a023de4b","type":"message","text":"普通に klib 使っちゃダメなのかしら。","user":"U03C6TEAZ","ts":"1583998460.351900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"/T2as","elements":[{"elements":[{"text":"普通に klib 使っちゃダメなのかしら。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"59353a50-f43b-423d-9a14-d9464a7628fe","type":"message","text":"<https://github.com/attractivechaos/klib>","user":"U03C6TEAZ","ts":"1583998461.352100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"GitHub","title":"attractivechaos/klib","title_link":"https://github.com/attractivechaos/klib","text":"A standalone and lightweight C library. Contribute to attractivechaos/klib development by creating an account on GitHub.","fallback":"GitHub: attractivechaos/klib","thumb_url":"https://avatars3.githubusercontent.com/u/563093?s=400&v=4","from_url":"https://github.com/attractivechaos/klib","thumb_width":420,"thumb_height":420,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","id":1,"original_url":"https://github.com/attractivechaos/klib"}],"blocks":[{"block_id":"ez==k","elements":[{"elements":[{"type":"link","url":"https://github.com/attractivechaos/klib"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"fd940350-a77d-4057-b3cc-eac45cbd05a3","type":"message","text":"khash めっちゃ速いで。","user":"U03C6TEAZ","ts":"1583998475.352400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Vs1","elements":[{"elements":[{"text":"khash めっちゃ速いで。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"020dc059-a74e-45d1-9463-57e3caa023e3","type":"message","text":"昔 FNV-1 hashmap を書いた事があるけど khash に勝てなかった。","user":"U03C6TEAZ","ts":"1583998547.352900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"PA=","elements":[{"elements":[{"text":"昔 FNV-1 hashmap を書いた事があるけど khash に勝てなかった。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"a6a30182-cde7-4100-b46f-479c7b9db92c","type":"message","text":"<https://github.com/mattn/picohashmap>","user":"U03C6TEAZ","ts":"1583998553.353100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"GitHub","title":"mattn/picohashmap","title_link":"https://github.com/mattn/picohashmap","text":"Contribute to mattn/picohashmap development by creating an account on GitHub.","fallback":"GitHub: mattn/picohashmap","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","from_url":"https://github.com/mattn/picohashmap","thumb_width":400,"thumb_height":400,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","id":1,"original_url":"https://github.com/mattn/picohashmap"}],"blocks":[{"block_id":"x8h7","elements":[{"elements":[{"type":"link","url":"https://github.com/mattn/picohashmap"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"2ef45e2d-a495-4eb5-aaca-f579e873a7f1","type":"message","text":"vimだと、hashdosは大丈夫、でいいのかな...？","user":"UAZ33BKV2","ts":"1583998568.353600","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"m4T","elements":[{"elements":[{"text":"vimだと、hashdosは大丈夫、でいいのかな...？","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"98e37968-11e7-4ac2-b502-9a8d90ce1041","type":"message","text":"```picohashmap put: 2.781000 [sec]\npicohashmap get: 1.103000 [sec]\nC++ stl put: 5.126669 [sec]\nC++ stl get: 1.272198 [sec]\nklib hash put: 0.252785 [sec]\nklib hash get: 0.036985 [sec]```","user":"U03C6TEAZ","ts":"1583998612.354100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"0WP","elements":[{"elements":[{"text":"picohashmap put: 2.781000 [sec]\npicohashmap get: 1.103000 [sec]\nC++ stl put: 5.126669 [sec]\nC++ stl get: 1.272198 [sec]\nklib hash put: 0.252785 [sec]\nklib hash get: 0.036985 [sec]","type":"text"}],"type":"rich_text_preformatted"}],"type":"rich_text"}]},{"client_msg_id":"4d55410e-4782-4137-a154-1acbf4c2642d","type":"message","text":"klib バケモンすぎる。","user":"U03C6TEAZ","ts":"1583998620.354400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"dvFt7","elements":[{"elements":[{"text":"klib バケモンすぎる。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"d9531c5b-00d8-4b19-85f3-107620f8313f","type":"message","text":"khash が使ってるこれがたぶん凄い効いてる。 <http://research.cs.vt.edu/AVresearch/hashing/quadratic.php>","user":"U03C6TEAZ","ts":"1583998723.354700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"DQsO","elements":[{"elements":[{"text":"khash が使ってるこれがたぶん凄い効いてる。 ","type":"text"},{"type":"link","url":"http://research.cs.vt.edu/AVresearch/hashing/quadratic.php"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"cde02e91-c9be-4fb5-9305-7fa9380f3845","type":"message","text":"すご","user":"UAZ33BKV2","ts":"1583998747.355000","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"bXe","elements":[{"elements":[{"text":"すご","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"0946418c-9554-4321-ba8c-db26d459d30e","type":"message","text":"というところまで思い出して悔しい記憶がよみがえってきた。","user":"U03C6TEAZ","ts":"1583998757.355300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"dZc6","elements":[{"elements":[{"text":"というところまで思い出して悔しい記憶がよみがえってきた。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"c9b5ddd5-531d-451e-84af-f4a07f41aac4","type":"message","text":"Rubyのハッシュは2.4で高速化されたけど、どっちが速いかな？","user":"U6XP9LZ6V","ts":"1583998845.356400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"cBt","elements":[{"elements":[{"text":"Rubyのハッシュは2.4で高速化されたけど、どっちが速いかな？","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"66025c5d-180a-4710-9685-af3ad52d4bfd","type":"message","text":"なんか小細工が見えるw <https://github.com/ruby/ruby/blob/74c398b82f80c30e8123f53e354b6518be3fe9aa/st.c#L739>","user":"U03C6TEAZ","ts":"1583998959.356800","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"GitHub","title":"ruby/ruby","title_link":"https://github.com/ruby/ruby/blob/74c398b82f80c30e8123f53e354b6518be3fe9aa/st.c#L739","text":"The Ruby Programming Language [mirror]. Contribute to ruby/ruby development by creating an account on GitHub.","fallback":"GitHub: ruby/ruby","thumb_url":"https://avatars0.githubusercontent.com/u/210414?s=400&v=4","from_url":"https://github.com/ruby/ruby/blob/74c398b82f80c30e8123f53e354b6518be3fe9aa/st.c#L739","thumb_width":400,"thumb_height":400,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","id":1,"original_url":"https://github.com/ruby/ruby/blob/74c398b82f80c30e8123f53e354b6518be3fe9aa/st.c#L739"}],"blocks":[{"block_id":"g+Z","elements":[{"elements":[{"text":"なんか小細工が見えるw ","type":"text"},{"type":"link","url":"https://github.com/ruby/ruby/blob/74c398b82f80c30e8123f53e354b6518be3fe9aa/st.c#L739"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"902509cb-5263-4ce9-82c7-f3dd32adae2b","type":"message","text":"<https://employment.en-japan.com/engineerhub/entry/2018/01/11/110000>\nちょっと前のhashdosの時の構造説明(1.9があって、1.8の対策なので微妙)","user":"UAZ33BKV2","ts":"1583998991.357400","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"エンジニアHub｜若手Webエンジニアのキャリアを考える！","title":"HashDoS脆弱性との戦い！ Rubyコミッター・卜部昌平が明かすプログラム堅牢化のノウハウ - エンジニアHub｜若手Webエンジニアのキャリアを考える！","title_link":"https://employment.en-japan.com/engineerhub/entry/2018/01/11/110000","text":"過去、HashDosの影響を受けたRuby。言語開発者はいかにしてこうした問題に対応してきたのでしょうか。コミッターである卜部氏の貴重な記録を公開します。","fallback":"エンジニアHub｜若手Webエンジニアのキャリアを考える！: HashDoS脆弱性との戦い！ Rubyコミッター・卜部昌平が明かすプログラム堅牢化のノウハウ - エンジニアHub｜若手Webエンジニアのキャリアを考える！","from_url":"https://employment.en-japan.com/engineerhub/entry/2018/01/11/110000","service_icon":"https://cdn.image.st-hatena.com/image/apple_touch_icon/5b2fd5dcfeaff02ecd23d4dd52498944b6cf5fc7/version=1/https%3A%2F%2Fcdn.user.blog.st-hatena.com%2Fcustom_blog_icon%2F125375497%2F1514216060853259","id":1,"original_url":"https://employment.en-japan.com/engineerhub/entry/2018/01/11/110000"}],"blocks":[{"block_id":"lxC","elements":[{"elements":[{"type":"link","url":"https://employment.en-japan.com/engineerhub/entry/2018/01/11/110000"},{"text":"\nちょっと前のhashdosの時の構造説明(1.9があって、1.8の対策なので微妙)","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"df18dd97-854a-4884-89c9-3020b3593a2b","type":"message","text":"これって分岐予測のヒントですよね。","user":"U03C6TEAZ","ts":"1583999007.357900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"Qs3i","elements":[{"elements":[{"text":"これって分岐予測のヒントですよね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"267424ea-b56f-49b1-8e96-57fb64b4e1dd","type":"message","text":"`__builtin_expect` とか。","user":"U03C6TEAZ","ts":"1583999010.358100","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"GM6/","elements":[{"elements":[{"style":{"code":true},"text":"__builtin_expect","type":"text"},{"text":" とか。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"d530cfc1-0888-4a26-87ed-5e3468a4cc57","type":"message","text":"そこまでやると速いだろうなー。","user":"U03C6TEAZ","ts":"1583999018.358300","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"gka","elements":[{"elements":[{"text":"そこまでやると速いだろうなー。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"54b035ca-7461-413e-b820-a5166eacc599","type":"message","text":"<https://qiita.com/jnchito/items/9f9d45581816f121af07#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%94%B9%E5%96%84-1>","user":"U03C6TEAZ","ts":"1583999094.358500","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"Qiita","title":"サンプルコードでわかる！Ruby 2.4の新機能と変更点 - Qiita","title_link":"https://qiita.com/jnchito/items/9f9d45581816f121af07#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%94%B9%E5%96%84-1","text":"## はじめに 2016年9月にRuby 2.4のpreview2が、11月にpreview3が、12月11日にrc1がリリースされました（[参考1](<https://www.ruby-lang.org/en/news/2016/0>...","fallback":"Qiita: サンプルコードでわかる！Ruby 2.4の新機能と変更点 - Qiita","from_url":"https://qiita.com/jnchito/items/9f9d45581816f121af07#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%94%B9%E5%96%84-1","service_icon":"https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png","id":1,"original_url":"https://qiita.com/jnchito/items/9f9d45581816f121af07#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%94%B9%E5%96%84-1"}],"blocks":[{"block_id":"A3m8a","elements":[{"elements":[{"type":"link","url":"https://qiita.com/jnchito/items/9f9d45581816f121af07#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%94%B9%E5%96%84-1"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"dd7ee70c-3dfe-4db8-9608-c1828d414abc","type":"message","text":"これじゃないすかね。","user":"U03C6TEAZ","ts":"1583999097.358700","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"LI+RC","elements":[{"elements":[{"text":"これじゃないすかね。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]},{"client_msg_id":"97af8df6-e5dc-4f1a-be0f-d6faceebd8f9","type":"message","text":"ちなみに僕のは C++ の stdlib には勝った。","user":"U03C6TEAZ","ts":"1583999156.359200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"jkJT","elements":[{"elements":[{"text":"ちなみに僕のは C++ の stdlib には勝った。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"sasumatsu","users":["UAZ33BKV2","U9S4G0LJW","U6XP9LZ6V","U06ECBRTJ","U7EEZ4LMR"],"count":5},{"name":"puro","users":["U9S4G0LJW","U06ECBRTJ"],"count":2}]},{"client_msg_id":"6022a1d2-708d-4477-8245-42e576d7c202","type":"message","text":".oO( と心を落ち着かせて khash に負けた事を記憶から消し去った )","user":"U03C6TEAZ","ts":"1583999196.359900","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","blocks":[{"block_id":"sPfdx","elements":[{"elements":[{"text":".oO( と心を落ち着かせて khash に負けた事を記憶から消し去った )","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}],"reactions":[{"name":"sweat_smile","users":["U9S4G0LJW","UEACRCY0Z"],"count":2}]},{"client_msg_id":"9ee31247-c1d1-460a-8eaf-0bafea022f5a","type":"message","text":"とりあえず、Rubyのst.[ch]を単体でビルドできるようにしたパッチ。\n<https://github.com/k-takata/ruby/commit/d0f9d3560571463a8fc78020134073b731171cf2>\n少し古いバージョンはonigmoに組み込んであるけど、このバージョンはまだ試してない。","user":"U6XP9LZ6V","ts":"1584018044.363200","team":"T03C4RC8V","user_team":"T03C4RC8V","source_team":"T03C4RC8V","attachments":[{"service_name":"GitHub","title":"st: Make st work without Ruby · k-takata/ruby@d0f9d35","title_link":"https://github.com/k-takata/ruby/commit/d0f9d3560571463a8fc78020134073b731171cf2","text":"Standalone version of Onigmo also uses st.[ch], but some modifications were needed. Import them into Ruby. * `RUBY` and `NOT_RUBY` were used. Use only `RUBY` for consistency. * Define some Ruby-sp...","fallback":"GitHub: st: Make st work without Ruby · k-takata/ruby@d0f9d35","thumb_url":"https://avatars2.githubusercontent.com/u/840186?s=200&v=4","from_url":"https://github.com/k-takata/ruby/commit/d0f9d3560571463a8fc78020134073b731171cf2","thumb_width":200,"thumb_height":200,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","id":1,"original_url":"https://github.com/k-takata/ruby/commit/d0f9d3560571463a8fc78020134073b731171cf2"}],"blocks":[{"block_id":"Ovtx","elements":[{"elements":[{"text":"とりあえず、Rubyのst.[ch]を単体でビルドできるようにしたパッチ。\n","type":"text"},{"type":"link","url":"https://github.com/k-takata/ruby/commit/d0f9d3560571463a8fc78020134073b731171cf2"},{"text":"\n少し古いバージョンはonigmoに組み込んであるけど、このバージョンはまだ試してない。","type":"text"}],"type":"rich_text_section"}],"type":"rich_text"}]}]
