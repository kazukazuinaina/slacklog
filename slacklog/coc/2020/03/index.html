---
# vim:set ts=2 sts=2 sw=2 et:
layout: slacklog
title: vim-jp.slack.com log - &#35coc - 2020年03月
---
<div>
<h2><a href='{{ post.url }}'>{{ page.title }}</a></h2>

<p>参加方法、各チャンネルの概要等は以下を参照して下さい。<br>
<a href='/docs/chat.html'>vim-jpのチャットルームについて</a></p>

{% raw %}
<pre>yutakatay 10日 12:54:44: <https://github.com/neoclide/coc.nvim/releases/tag/v0.0.76>
バージョン上がった :tada:</pre>
<pre>kashew_nuts 13日 16:23:34: 以下のようにしたいんですが、みなさんどのようにnodejsのバージョンを管理されてますか？

* coc.nvim: nodejs 10系に固定
* プロジェクトA(仕事用): nodejs 11系に固定</pre>
<pre>kashew_nuts 13日 16:25:51: nodejs11系に固定できたらいいのですが、以下のIssueを対応してたときにバージョンが合わなくて分けたいと思った次第です。
<https://github.com/neoclide/coc-vetur/issues/28#issuecomment-597628197></pre>
<pre>kashew_nuts 13日 16:32:44: プロジェクトの方ではnodenvを推奨されてるので、この辺やればよさそうかなぁ… <https://empitsu88.hatenablog.com/entry/2018/11/01/000000#プロジェクトごとのバージョン設定></pre>
<pre>yutakatay 13日 16:34:06: 私はnodeをcoc以外で使ってないんであれですが、今の私の環境ならzinit側でローカルに（coc専用として）入れるか、asdfで（プロジェクト専用に）入れるかする気がします。（あ、やったことはないのであくまで妄想です）</pre>
<pre>kashew_nuts 13日 16:34:50: これですかね。なるほど。 <https://github.com/asdf-vm/asdf-nodejs></pre>
<pre>yutakatay 13日 16:35:19: ですね。anyenvでもよいかもしれませんが、thincaさんがなんかこっちのほうが好きっていってたので</pre>
<pre>ycino 13日 16:36:38: `.node-version` でプロジェクトローカルなnodeを入れる？
が普通かもしれないですけど、その場合ってプロジェクト上でvim開いたときglobalなnodeでcocが起動したかはちょっと記憶にないです</pre>
<pre>ycino 13日 16:37:20: 自分なら `nodenv local 11.x` 試すと思うんですけど、多分出来るのかなぁ</pre>
<pre>kashew_nuts 13日 16:38:24: なるほど `.node-version` はあります。</pre>
<pre>lambdalisue 13日 16:38:25: asdf しらんかった</pre>
<pre>ycino 13日 16:39:34: **env系のインターフェイスになれてしまった</pre>
<pre>yutakatay 13日 16:39:39: 私もthincaさんから初めて聞きました。 <#CNX3F8RFC|dotfiles> だったかな？
日本人発ということでanyenvが強い感じですよね。</pre>
<pre>kashew_nuts 13日 16:40:17: 操作するペイン間違えたのかな….ひとまずプロジェクトローカルで期待したバージョンは設定できてるっぽいので、やってみますー。</pre>
<pre>lambdalisue 13日 16:40:40: **env 辛みが多いから asdf 試してみよう....</pre>
<pre>ycino 13日 16:41:21: 多分辛いとこ踏み抜いて慣れてしまったから麻痺してる気がする
どの辺辛いです？</pre>
<pre>lambdalisue 13日 16:41:47: goenv</pre>
<pre>lambdalisue 13日 16:41:55: 辛すぎてやめたくらいは辛い</pre>
<pre>lambdalisue 13日 16:42:31: GOPATH/GOROOT が変わったり、変わらなかったりして成功するはずの go get が成功しないとか多発しました</pre>
<pre>lambdalisue 13日 16:43:01: あと起動速度かなぁ...</pre>
<pre>ycino 13日 16:43:08: goenvは使ってなかった
rbenvとpyenvとnodenv使ってるけどどうにかなってるんですよね
goは確かに辛そう</pre>
<pre>lambdalisue 13日 16:43:21: `eval $(anyenv init -)` これが結構遅い</pre>
<pre>ycino 13日 16:43:26: 起動速度、initのevalがやたら遅いやつですよね
自分は展開して埋め込んでます</pre>
<pre>lambdalisue 13日 16:43:34: 僕も埋め込んでる</pre>
<pre>lambdalisue 13日 16:43:42: 埋め込むと goenv さんががが</pre>
<pre>ycino 13日 16:43:50: pyenvとnodenvとrbenvを全部initしたら400msくらい起動遅くなっちゃう</pre>
<pre>lambdalisue 13日 16:44:22: わかる</pre>
<pre>lambdalisue 13日 16:44:24: ```# anyenv
if type anyenv &gt;/dev/null 2&gt;&amp;1; then
  anyenv::cache() {
    mkdir -p ~/.cache/anyenv
    anyenv init - --no-rehash &gt; ~/.cache/anyenv/init.zsh
    zcompile ~/.cache/anyenv/init.zsh
  }
  if [[ ! -f ~/.cache/anyenv/init.zsh ]]; then
    anyenv::cache
  fi
  source ~/.cache/anyenv/init.zsh
fi```</pre>
<pre>lambdalisue 13日 16:44:38: これが超お便利。更新したら `anyenv::cache` をマニュアルで呼べば良い</pre>
<pre>yutakatay 13日 16:45:32: 私dockerにこもる派なんであんまりenv系使わないんですよね。
開発ツールとコンフリクトするときくらいかな。。。</pre>
<pre>ycino 13日 16:45:38: anyenv使わずそれぞれbrewで入れてるんですよね
展開して少し書き直してます
```path=(~/.rbenv/shims(N-/) $path)
export RBENV_SHELL=zsh
function rbenv() {
  local command
  command="$1"
  if [[ "$#" -gt 0 ]]; then
    shift
  fi

  case "$command" in
    rehash|shell)
      eval "$(rbenv "sh-$command" "$@")";;
    *)
      command rbenv "$command" "$@";;
  esac
}```</pre>
<pre>ycino 13日 16:46:06: 確かにcache効かせればよさそうな感じはする</pre>
<pre>lambdalisue 13日 16:46:10: コマンド呼び出し時まで遅延するタイプ昔使ってたけど問題多いからやめた</pre>
<pre>lambdalisue 13日 16:46:29: 補完されないとか内部実装依存系のプラグインが尽く死ぬとか</pre>
<pre>ycino 13日 16:46:48: あー、それは分かります</pre>
<pre>ycino 13日 16:47:10: nvmとかrvm試してたときめちゃくちゃ遅くて遅延ロードさせようとしたら事故が多かった</pre>
<pre>lambdalisue 13日 16:47:17: env 更新頻度と利用頻度考えるとマニュアルキャッシュ更新が一番しっくりきた</pre>
<pre>lambdalisue 13日 16:47:28: まぁ goenv とか死ぬんですけど</pre>
<pre>ycino 13日 16:47:43: goenv辛いのか、覚えておこう・・・</pre>
<pre>lambdalisue 13日 16:48:49: asdf も shims 系かぁ...</pre>
<pre>ycino 13日 16:49:18: あと、**envってzsh補完ぶっ壊れてないです？
自分で直すの書いてどうにかしたんですけど</pre>
<pre>ycino 13日 16:49:30: anyenvだと通るのかもしれない</pre>
<pre>lambdalisue 13日 16:50:54: 壊れてるかも、あまり意識してなかったです</pre>
<pre>lambdalisue 13日 16:51:02: docker は辛すぎるからちゃんと書いた</pre>
<pre>ycino 13日 16:51:08: Qiitaに書いたスクリプトがzshプラグイン化されてるやつ
<https://github.com/ress997/zsh-completions-anyenv></pre>
<pre>ycino 13日 16:51:46: 自分はバージョンの補完効かないの結構辛かったんですよね
ローカルではfzfで補完させてます</pre>
<pre>lambdalisue 13日 16:52:26: あ `pyenv install |` とかの時の補完なら聴きますね</pre>
<pre>ycino 13日 16:52:37: あれ、今効くのかな</pre>
<pre>lambdalisue 13日 16:52:48: anyenv だからかな？</pre>
<pre>lambdalisue 13日 16:53:32: anyenv の `init` で補完出力されてますね</pre>
<pre>ycino 13日 16:53:33: あー、更新されてるみたい</pre>
<pre>ycino 13日 16:53:42: <https://qiita.com/yuki_ycino/items/883bcda3b6ccbe209220></pre>
<pre>ycino 13日 16:53:56: これ書いた当時は5年放置されてるとかだったみたい</pre>
<pre>lambdalisue 13日 16:54:02: なる</pre>
<pre> 13日 16:54:45: いまは補完ソースしてる</pre>
<pre>ycino 13日 16:56:38: 完全に別の話ですけど
この辺って自分は別PC（仕事のやつとか）のために `~/` 使って書くんですけど、場合によっては手間かかりません？</pre>
<pre>lambdalisue 13日 16:57:10: あ、これ自動生成です</pre>
<pre>lambdalisue 13日 16:57:19: `$(anyenv init -)` の結果</pre>
<pre>ycino 13日 16:57:23: あ、なるほど
anyenvのキャッシュか</pre>
<pre>lambdalisue 13日 16:57:42: 手書きはもちろん `~/` 使います :+1:</pre>
<pre>ycino 13日 16:57:53: ですよね
逆になんかメリットあるのかと思った</pre>
<pre>ycino 13日 16:58:46: このフォントなんでしたっけ、記憶にあるんだけど名前が</pre>
<pre>yutakatay 13日 16:59:20: Cicaくさい</pre>
<pre>lambdalisue 13日 16:59:26: Cica</pre>
<pre>yutakatay 13日 16:59:40: やった</pre>
<pre>lambdalisue 13日 16:59:41: フォントソムリエすごい</pre>
<pre>yutakatay 13日 16:59:46: w</pre>
<pre>lambdalisue 13日 16:59:55: フォムリエ</pre>
<pre>yutakatay 13日 17:00:21: まず香りから判断します :sunglasses:</pre>
<pre>ycino 13日 17:00:56: Cica、使ってたこともあるんだけどなんか癖が強い部分が気になってやめちゃった記憶が蘇ってきた</pre>
<pre>ycino 13日 17:01:31: 今zshの設定見直してたらいらないのが結構残ってそうだ</pre>
<pre> 13日 17:01:42: Cica 脳死で devicon 対応してるのが良い</pre>
<pre>ycino 13日 17:02:15: `SF Mono Square` 使わせて貰ってる</pre>
<pre>yutakatay 13日 17:02:19: 私は字体的にはJetbrains monoのほうが好きですね</pre>
<pre>ycino 13日 17:04:01: ちょっと前までdevicon使ってなかったんですけど、fzf + devicon対応させたら思ったより視認性が上がってよくなったんですよね</pre>
<pre>ycino 13日 17:04:34: colorizeとdeviconは偉大だった</pre>
<pre>ycino 13日 17:06:06: `path=(/usr/local/opt/curl/bin(N-/) $path)` こんな設定してるけどこれなんで必要なんだっけ・・・</pre>
<pre>hrsh7th 13日 17:12:18: Cousine Nerd Font Mono 使っている（有名ではなさそうですが）</pre>
<pre>ycino 13日 17:15:52: ここ完全に <#CNX3F8RFC|dotfiles> と勘違いしてた・・・</pre>
<pre>yutakatay 13日 17:16:37: まあ脱線はいつものことなんで・・・</pre>
<pre>yutakatay 13日 17:16:56: 普通にlinuxでWindowsのアプリの話ししてますしねw</pre>
<pre>yutakatay 17日 12:23:58: cocでtagfuncが実装されました。
`set tagfunc=CocTagFunc`
で使えます。（が、ちょっと重い）

<https://github.com/neoclide/coc.nvim/issues/1054></pre>
<pre>yutakatay 17日 14:03:46: またリリースされた :tada: 　最近リリースがはやい。
（リリースノートはむっちゃ簡素になったけどなにがあったんだろう・・・）
<https://github.com/neoclide/coc.nvim/releases/tag/v0.0.77></pre>
<pre>ycino 17日 15:37:39: tagfuncってC-]の挙動自体を任意の関数で置き換えてタグスタックとか含め管理してくれるようになるやつですよね？確か</pre>
<pre>tyru 17日 15:43:24: ですね</pre>
<pre>ycino 17日 15:43:50: どうしよう、TSだけでもやってみようかな？</pre>
<pre>yaegassy 17日 18:49:45: coc.nvim はプラグインとしてだけじゃなくて npm のパッケージ(モジュール)としても拡張側からimportして使う側面もあるので。npmにpublishするためにバージョンをバンバンあげてるのでしょうかね(想像)。拡張側から新機能を早く使えるように。まー、それでも更新履歴はたしかに欲しいかもですね</pre>
<pre>yaegassy 17日 18:52:27: coc.nvimの主要コントリビュータ達しかみえないところでやり取りしてて、その流れでバージョンをバンバンあげてるとかなのかも(想像)。例えばvim-jpのSlackみたいなのでとか(想像 of 想像)</pre>
<pre>yutakatay 18日 19:29:28: <https://github.com/voldikss/coc-translator>
入れてみましたが普通にいい感じ :musical_note:</pre>
<pre>takets 21日 15:48:57: cocって設定をvimrcに書けなかったっけか</pre>
<pre>takets 21日 15:50:13: deopleteとcocの両方が入っていると、coc側でcompoptの設定が複数有ると言われてエラーになる</pre>
<pre>takets 21日 15:59:00: deopleteを有効にしたとき、vimrc側から `"suggest.autoTrigger":"none"` をセットしてcocのエラーが出ないようにしたいのだけれども、wikiのどこに書いてないのかなぁ</pre>
<pre>takets 21日 16:03:04: `call coc#config('suggest.autoTrigger', 'none')` これか</pre>
<pre> 21日 16:11:14: Deopleteを入れているだけで、問答無用で怒ってくるのか……</pre>
<pre>takets 21日 16:15:37: えぇ……</pre>
<pre>takets 21日 18:00:42: 結局、.config/nvim/plugged/deoplete.nvim/autoload/deoplete/mapping.vim のcompleteopt周りをコメントアウトするワークアラウンドでごまかした。</pre>
<pre>Shougo 21日 18:28:25: cocもcompleteoptを弄っていてコンフリクトするんだろう</pre>
<pre>takets 21日 19:00:58: &gt; cocもcompleteoptを弄っていてコンフリクトするんだろう
ですよね。
補完エンジンを２つ入れて使い分けるなんて奇特なことをしている人なんてごくわずかなので、手元でどうにかするのはやむなし</pre>
<pre>yutakatay 25日 23:37:10: cocの拡張ってdocとかないんでhelp引けないじゃないですか。
パラメーター（coc-settings.jsonに設定するやつ）確認するときどうしてますか？？

私は今はGitHubで見るか `~/.config/coc/extensions/node_modules/xxx/package.json`
を見るかなんですけど、今使ってる設定情報がすべて記載されたjsonなんかを表示できれば個人的にはだいぶ楽になるんですが・・・</pre>
<pre>monaqa 25日 23:44:04: coc-json を入れれば coc-settings.json のキーを打つとき補完候補に出てくるので，そこからそれっぽいやつを見つける...というテキトーな対応しかしてないですね...</pre>
<pre>luma 26日 00:02:05: `:options` の coc 版の機運...ｺﾞｺﾞｺﾞ</pre>
<pre>yutakatay 26日 00:05:12: うーんやっぱりないのかな。みんな困ってないんかな・・・
オプション結構デフォルトいい感じに倒してくれてること多いんでそんなにいじることないですが、オプションをまんべんなく眺めたいときだってあるんじゃないですかね。。。</pre>
<pre>hrsh7th 26日 01:00:09: CocLocalConfig とか出してくれないんですかねー</pre>
<pre>yutakatay 26日 01:20:15: 自分の設定したやつしか出してくれないんですよ :cry:
全体を舐め回したいのに</pre>
<pre>vikke 27日 14:34:02: coc.vimを使ってて、<https://github.com/neoclide/coc.nvim> にあるexample vim configurationを少し弄ってつかってます。
具体的には、僕のvimrcで、
```nnoremap &lt;C-I&gt; &lt;C-O&gt;nnoremap &lt;C-O&gt; &lt;C-I&gt;```
やってるので、 `Introduce function text object` の所をコメントアウトしています。
これでも、C-I, C-Oが `[coc.nvim]Selection range provider not found for current document` と言われるんですけど、後、どこイジるべきですか?</pre>
<pre>hrsh7th 27日 14:47:18: ```" Use &lt;TAB&gt; for selections ranges.
" NOTE: Requires 'textDocument/selectionRange' support from the language server.
" coc-tsserver, coc-python are the examples of servers that support it.
nmap &lt;silent&gt; &lt;TAB&gt; &lt;Plug&gt;(coc-range-select)
xmap &lt;silent&gt; &lt;TAB&gt; &lt;Plug&gt;(coc-range-select)```
ここだと思います。</pre>
<pre>vikke 27日 14:52:48: ありがとうございます。すいません。思った通りになりました。これってどういう機能を削ってるんですか?  選択したレンジに対してTABインデントが使えるとかでうか?</pre>
<pre>hrsh7th 27日 14:54:24: 言語サーバが「今のカーソル位置を含む範囲の階層構造」を返してくる機能が LSP にありまして</pre>
<pre>hrsh7th 27日 14:54:46: &lt;Tab&gt; を連打するといわゆる vim-expand-region 的な動きをするものだと思います。</pre>
<pre>vikke 27日 14:54:56: なるほど。</pre>
<pre>hrsh7th 27日 14:55:03: 今の所対応している言語サーバめっちゃ少ないのでまあ現時点では消えててもいいのかなと。</pre>
<pre>vikke 27日 14:55:14: ありがとうございます。</pre>
<pre>yaegassy 30日 17:00:50: おっ、↑でお話にあがってるの追加されたようですね <https://github.com/neoclide/coc.nvim/commit/2462667c7fbac3bc7f3b17e4fc85bdb5e6b2f14b></pre>
<pre>yaegassy 30日 17:01:44: yutakatay さん案の。</pre>
<pre>yutakatay 30日 17:03:43: あーですね。（まだ使ってないw）</pre>
<pre>yaegassy 30日 17:04:03: `:CocList extentions` -&gt; `任意の拡張でTABキー` で `(c)onfigurations` が追加されてて c タイプするとその拡張の package.json に飛ぶってやつ(？)みたい</pre>
<pre>yutakatay 30日 17:05:10: ですね。つかcocのIssue追っかけてたんですね :subara:</pre>
<pre>yaegassy 30日 17:06:04: いえいえ。たまたまですw</pre>
<pre>yaegassy 30日 17:07:25: まだ、releaseのほうにはあがってないみたいです</pre>
<pre>yutakatay 30日 17:08:08: です。ビルドしないといけないので業務終わってから試すかって思ってました。

CocもNeovimでのまいけるさんみたいなウォッチャーがほしいところありますね・・・追いきれない・・・</pre>
{% endraw %}
