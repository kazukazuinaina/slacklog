---
# vim:set ts=2 sts=2 sw=2 et:
layout: slacklog
title: vim-jp.slack.com log - &#35vim-script - 2020年03月
---
<div>
<h2><a href='{{ post.url }}'>{{ page.title }}</a></h2>

<p>参加方法、各チャンネルの概要等は以下を参照して下さい。<br>
<a href='/docs/chat.html'>vim-jpのチャットルームについて</a></p>

{% raw %}
<pre>tyru 15日 15:50:48: <https://vim-jp.slack.com/archives/C03C4RC9F/p1584197115237900>
これ知らんかった。多分 vimlparser でもサポートされてないな</pre>
<pre>tyru 19日 18:51:15: <https://twitter.com/_tyru_/status/1240576358196973569></pre>
<pre>tyru 19日 18:53:14: <@UBQ2H65JQ> これってどのスクリプトで見たか覚えてるでしょうか？</pre>
<pre>tyru 19日 18:53:38: vimlparser の test は pass してる</pre>
<pre>tyru 19日 18:54:26: いや正確には↑を vimlparser の test に書いても pass する…</pre>
<pre>mattn 19日 18:55:08: うひ</pre>
<pre>thinca 19日 18:57:53: エラーが発生している桁も知りたい</pre>
<pre>mattn 19日 19:00:38: スマホで解像度低いんですが Trailing Character なんですか？</pre>
<pre>mattn 19日 19:07:03: vimlparser のテストで成功して vint でエラーになるとしたら正規表現が間違ってるパターンかも。</pre>
<pre>tyru 19日 19:17:44: です `E488: Trailing characters: -`</pre>
<pre>tyru 19日 19:18:19: でも vimlparser のエラーに見えるんですよね。
vint が E488 出してるのかな</pre>
<pre>tyru 19日 19:19:43: んん？ `vint {vimrc}` すると出ないな…</pre>
<pre>tyru 19日 19:26:21: あー vim-language-server でした。。。</pre>
<pre>tyru 19日 19:27:00: 一旦 `:LspUninstallServer vim-language-server` したらなくなった。</pre>
<pre>tyru 19日 19:27:23: ちなみに vint は efm-langserver 経由で走らせてる</pre>
<pre>rbtnn 19日 19:29:32: スクリプトじゃなくてヘルプを読んでいたら見つけました。
<https://github.com/vim/vim/blob/master/runtime/doc/eval.txt#L1513|https://github.com/vim/vim/blob/master/runtime/doc/eval.txt#L1513></pre>
<pre>tyru 19日 19:30:17: おおなるほど。ありがとうございます。</pre>
<pre>tyru 19日 19:33:49: <@UAZ33BKV2> さんも言ってたと思うんですが、ここと <#CBNFS2BR6|vint> マージしちゃいませんかね？
話題的にかぶる事も多いので。
#vim-script-syntax とか？</pre>
<pre>tyru 19日 19:34:38: 冗長だし #vim-script でいいか</pre>
<pre>thinca 19日 19:34:46: よさそう</pre>
<pre>tyru 19日 19:35:12: じゃあここを #vim-script としてあちらはアーカイブする感じでいいですかね</pre>
<pre>tyru 19日 19:35:28: もうちょっと待つけど</pre>
<pre>k-takata 19日 21:41:32: `:function {'&lt;lambda&gt;42'}` な表記、完全に忘れてたけどドキュメントに書いたの僕だよなー。7.4.2119 でクロージャ対応したときから載ってるし。</pre>
<pre>tyru 25日 19:48:54: #vim-script へのリネーム忘れてた。今やります</pre>
<pre>tyru 25日 19:49:30: あ、権限なかった（終）</pre>
<pre>tyru 25日 19:50:11: ↑どなたかお願いします :bow:</pre>
<pre>tyru 25日 19:50:40: ところで vim-language-server の vimlparser が最新版になりました <https://github.com/iamcco/vim-language-server/pull/35></pre>
<pre>mattn 25日 21:27:46: どね</pre>
<pre>tyru 26日 06:21:47: あざ！</pre>
<pre>tyru 26日 06:23:08: <#CBNFS2BR6|vint> のアーカイブはしなくてもいいか</pre>
<pre>tyru 26日 22:58:08: リストは負のインデックスでアクセスできるのに文字列には負のインデックスでアクセスできないのなんでなんだよ
```
" 3
:echo [1,2,3][-1]
" 空文字
:echo 'foo'[-1]</pre>
<pre>kuu 26日 22:59:56: &gt; 文字列の長さよりも大きなインデックスが指定された場合、結果は空文字列になる。負
&gt; 数のインデックスを指定すると、結果は常に空文字列になる(後方互換性のため)。
&gt; 最後のバイトを得るには[-1:]を使うこと。</pre>
<pre>kuu 26日 23:00:07: Vim scriptですからねー:totemoturai:</pre>
<pre>tyru 26日 23:01:08: お、たしかにスライス使えばいけたのか。毎回諦めてた…</pre>
<pre>tyru 26日 23:01:18: :tiken:</pre>
<pre>tsuyoshi_cho 26日 23:01:26: サモハンキンポー(さもありなん)</pre>
<pre>kuu 26日 23:01:34: これ、今ならscriptversionで挙動変えてもいいのかもしれないな</pre>
<pre>tyru 26日 23:01:45: たしかに</pre>
<pre>tyru 27日 02:10:58: 【悲報】is, isnot が変数名に使えない
```let [ih, is, il] = ihsl
unexpected token: is```
これダメだった</pre>
<pre>tyru 27日 02:11:26: while は OK だった。演算子だけだろうか（とはいえテストケース追加した方が良さそう）</pre>
<pre>tyru 27日 02:15:44: <https://github.com/vim-jp/vim-vimlparser/issues/169></pre>
<pre>thinca 27日 10:27:28: これは vimlparser がパースできないと言う話? Vim 本体?</pre>
<pre>mattn 27日 10:36:22: Vim は出来るぽいすね。</pre>
<pre>mattn 27日 10:37:10: ```let [is, great] = ['マンボウ', 'すごい']
echo is great```</pre>
<pre>thinca 27日 10:37:39: てことは vimlparser の話か</pre>
<pre>thinca 27日 10:38:51: while はコマンドだけど is は式だからかな。処理のされ方が違いそう (※コードは全く読んでない)</pre>
<pre>tyru 27日 17:34:05: そもそも式でなく identifier のはずなんですよねぇ</pre>
<pre>koron 27日 18:13:41: tokenizer が先に token として認識しちゃってそう。
<https://github.com/vim-jp/vim-vimlparser/blob/4139d51700ed72702bd9f7352e5359ac0cf54c6c/autoload/vimlparser.vim#L3301-L3310></pre>
<pre>koron 27日 18:14:37: issueに転載しといた</pre>
<pre>mattn 27日 18:46:12: Vim script は逐次で処理するので事前に tokenizer で種別決定できない辛さがあるなぁ。</pre>
{% endraw %}
