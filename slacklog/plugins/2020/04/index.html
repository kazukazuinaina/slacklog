---
# vim:set ts=2 sts=2 sw=2 et:
layout: slacklog
title: vim-jp.slack.com log - &#35plugins - 2020年04月
---
<div>
<h2><a href='{{ post.url }}'>{{ page.title }}</a></h2>

<p>参加方法、各チャンネルの概要等は以下を参照して下さい。<br>
<a href='/docs/chat.html'>vim-jpのチャットルームについて</a></p>

{% raw %}
<pre>luma 1日 16:29:22: Gina browse --yank と OpenBrowser を組み合わせている</pre>
<pre>luma 1日 16:33:13: tyruさんの専用のプラグインつかってみようかな...</pre>
<pre>tyru 1日 16:43:01: --yank あるのか。open-browser, open-browser-github 両方にほしいんだよな
色々手が回ってない。逆に自分のプラグインにコミットするモチベがない時がある（昔からだけど最近結構そんな感じ）</pre>
<pre>tyru 1日 16:43:50: --yank 近日やるかー</pre>
<pre>ycino 1日 19:29:02: ちょっと前に話題になってたと思うんですけど、numberとrelativenumberをいい感じに管理してくれるプラグインって何がよさそうでしょう
これ・・・？ <https://github.com/jeffkreeftmeijer/vim-numbertoggle></pre>
<pre>ycino 1日 19:30:14: これ実体は2行だけなのか、これならvimrcに書くのでよさそう
なんかペアプロとかレビューのときのためにいい感じにtoggleする設定とかも合わせて入ってると助かりそうなんですが</pre>
<pre>tsuyoshi_cho 1日 19:32:39: 好みが人によるから、自分で設定しちゃうのが速いんだろうな...と思う
やることはわりとあるけど</pre>
<pre>ycino 1日 19:35:56: やることありそうだから拾いたかったんですよねー、どうしようかな</pre>
<pre>thinca 1日 19:36:33: なぜ setlocal も使ってないプラグインがこんなにスター付くのか</pre>
<pre>kuu 1日 19:37:02: Vim script警察</pre>
<pre>kuu 1日 19:37:33: setlocal、何かで事故ってから必ず付けるようになった</pre>
<pre>thinca 1日 19:38:08: まあでもこれかなり昔からあってそれなりに歴史があるのか。紆余曲折を経て今のシンプルな形に落ち着いた感じはある (ミスってるが)</pre>
<pre>thinca 1日 19:38:47: 劇的ビフォーアフター <https://github.com/jeffkreeftmeijer/vim-numbertoggle/commit/db234b2417c3780306d201be1369ff06498f6697#diff-2e455b72fa8a7783b5f1e92d6a5c56ec></pre>
<pre>luma 1日 19:39:27: &gt; You can set it up yourself by putting the snippet above in your ~/.vimrc, or use the vim-numbertoggle plugin,
ってあるしアイデアというか，vimrcの破片みたいな役割として存在しているのかも

とおもったらめっちゃ変わってたｗ</pre>
<pre>kuu 1日 19:39:43: ぼくのかんがえたさいきょうのせってい時期と悟りを開いた時期</pre>
<pre>tsuyoshi_cho 1日 19:40:36: 若干記述がアレだけど自分はこれくらい
```function! s:relativenumber_toggle(mode) abort " {{{
  let enter = a:mode ==? 'enter'

  if enter
    let b:relativenumber = &amp;l:relativenumber " backup
    setlocal norelativenumber
  else
    if get(b:,'relativenumber', 1)
      " if backup value is relativenumber is active, re-active
      setlocal relativenumber
    endif
  endif
endfunction " }}}
augroup MyAutoGroup
  autocmd WinLeave,InsertEnter * nested call s:relativenumber_toggle('enter')
  autocmd WinEnter,InsertLeave * nested call s:relativenumber_toggle('leave')
augroup END```</pre>
<pre>luma 1日 19:40:43: setlocalつけたほうがいいのか，あとでvimrcに移し替えようかな</pre>
<pre>thinca 1日 19:40:50: ともあれ setlocal くらい使ってほしい</pre>
<pre>thinca 1日 19:41:02: 使ってる人は PR 送りましょう</pre>
<pre>thinca 1日 19:42:42: これはもしやコピペで作る vimrc シリーズなのかな</pre>
<pre>hrsh7th 1日 19:44:39: 昔のコードの `let g:insertmode = 1` の破壊力がすごい</pre>
<pre>luma 1日 19:44:46: <https://github.com/jeffkreeftmeijer/vim-numbertoggle/issues/46#issuecomment-542529511>
これでいいかも</pre>
<pre>luma 1日 19:47:38: Tsuyoshi CHO さんのleaveで `nornu`  されてたら，それを尊重する，とかでもいいかもな</pre>
<pre> 1日 19:59:15: ちょっとアレすぎたので修正した</pre>
<pre>kuu 1日 20:37:59: 面白いの見つけた <https://www.reddit.com/r/neovim/comments/fsvna6/nvimluapad_interactive_neovim_scratchpad_for_lua/></pre>
<pre>kuu 1日 20:38:38: コード書き換える度に実行してデバッガみたいな感じで出してくれるやつ</pre>
<pre>tyru 1日 20:51:32: virtual text vim にもほしいなー</pre>
<pre>dohq 1日 21:00:00: これ系だとこれもありますね
<https://github.com/metakirby5/codi.vim></pre>
<pre>tyru 2日 00:02:12: codi.vim べんりそう</pre>
<pre>aiya000 2日 08:34:32: sudo rm /*
評価したらどうなるんだろ……</pre>
<pre>yutakatay 2日 11:39:07: 私は使わないですが、サクラエディタのGrepみたいなやつ
<https://github.com/eugen0329/vim-esearch></pre>
<pre>tsuyoshi_cho 2日 11:56:11: 広めgrep+Qfreplaceみたいなのが別ウィンドウで、という感じかな...</pre>
<pre>Shougo 2日 14:57:43: neosnippetにinfoを追加してスニペットをプレビュー可能にします</pre>
<pre>Shougo 2日 18:20:17: 他の補完でもinfoをセットするようにしたいところ</pre>
<pre>Shougo 2日 20:46:01: 実装しました</pre>
<pre>heavenshell 2日 22:10:38: 今日のほっこり
「バグってんだけど？これ設定な」
ぼく「依存してるライブラリー古いっぽいから最新にして」
「おk でも最新にしたけどまだバグってるんだけど」
ぼく「再現せんから、スクリーンキャスト撮ってくれん？」
「撮ろうと思ったら再現せんくなったwww 直ったわ！ありがと！」

あるある。</pre>
<pre>mattn 2日 23:13:54: あるある</pre>
<pre>mattn 2日 23:15:11: 僕がよくあるのは、go-oci8 ていう Go の oracle ドライバで
「バグってんだけど」
ぼく「おかしいね、テストしたソースみせてくれる？」
「これ！」
ぼく「それ、僕のドライバじゃないよね？」

音信不通...</pre>
<pre>ゴリラ 2日 23:19:09: ww</pre>
<pre>Shougo 3日 06:36:53: これはひどい。しかし、再現させようと条件を絞るうちに再現しなくなるのはよくある</pre>
<pre>ycino 3日 11:52:10: <@U7B4ZD49X> <https://github.com/yuki-ycino/fzf-preview.vim/issues/106> あたり、なんか経緯があって `-g \!"* *"` にしたと思ってるんですけどなんでしたっけ
あと `\!"* *"` が自分でも実際に何にマッチさせてるか忘れたというあれな・・・</pre>
<pre>yutakatay 3日 11:55:45: 空白含むファイル名がうまくパースできないとかじゃなかったですっけ？？</pre>
<pre>ycino 3日 11:56:40: 空白問題でしたっけ、xargsの-dは覚えてるんだけどこっちもそうだっけな</pre>
<pre>ycino 3日 11:58:18: デフォルトの設定云々はむずいな・・・</pre>
<pre>ycino 3日 11:58:51: git ls-files or rgのデフォルト判定だからあんまり差違がないコマンドを使うようにしとけって話もわかる</pre>
<pre>ycino 3日 12:05:17: なんか完全に名前ぶつかってるのを見つけたけど偶然かな・・・？
コードの流用とかじゃないから別に文句はないんだけど <https://github.com/chengzeyi/fzf-preview.vim></pre>
<pre>thinca 3日 12:06:17: 名前まんまだと、既存のがあるか調べないで作るとあるある</pre>
<pre>kuu 3日 12:06:39: fzfをrtpに突っ込まないと動かないやつだたぶん</pre>
<pre>tsuyoshi_cho 3日 12:06:41: そして謎な動物やら物品の名前のプラグイン</pre>
<pre>yutakatay 3日 12:06:51: fzf.vimをラップする感じか</pre>
<pre>tsuyoshi_cho 3日 12:07:08: f! z! f! (ラップちがい)</pre>
<pre>ycino 3日 12:07:21: 薄くwrapしてますね</pre>
<pre>ycino 3日 12:13:58: 他にも探してたらThink.vimの設定でfzf-previewがGinaと連携してるのがデフォルト設定として入ってるのを見つけた
これ自分のvimrcからそのままもっていってるっぽいな・・・
<https://github.com/hardcoreplayers/ThinkVim/blob/master/keybinds/config.vim#L154-L190></pre>
<pre>heavenshell 3日 12:22:07: ひどい</pre>
<pre>tsuyoshi_cho 3日 12:23:13: 設定の持ち込みはどうなのかな...これ自体はしょうがない?</pre>
<pre>heavenshell 3日 12:23:42: クレジットくらいはしてもいい気はしてますー。</pre>
<pre>ycino 3日 12:24:07: 別に個人的にはバグをこっちのせいにするみたいなのがなかったらいいではあるんですけど
そういえばクレジット確認してなかった</pre>
<pre>ycino 3日 12:25:51: READMEのプラグインリストにも入ってなかったｗｗｗｗｗｗｗ</pre>
<pre>ycino 3日 12:26:27: Ginaもだ、まぁ悪意があるわけじゃなくて漏れなんだろうけど</pre>
<pre>Shougo 3日 12:28:20: vimrcについてはさすがに微妙なところである</pre>
<pre>tyru 4日 04:57:01: <@UDDCM376D> そういえば open-browser-github で行番号が付かない件はどうなりました？</pre>
<pre>takets 4日 07:02:49: fzfでgrepしたら、`(`をバックスペース入れないと検索できないの、雑に検索したいときちょっと面倒</pre>
<pre>ゴリラ 4日 08:31:21: 仕事で死んでました…
今日issue出しますねー</pre>
<pre>Nicholas 5日 15:45:10: |ω') めちゃめちゃ荒削りなんですけどハイライト用のスクリプトこさえたんですけど…  <https://github.com/astrorobot110/vimrc/blob/master/autoload/technicolor.vim></pre>
<pre>tsuyoshi_cho 5日 15:56:30: 自分がインストールしてるカラースキームの素性を記録して、フィルタできたりするようにした</pre>
<pre>tsuyoshi_cho 5日 15:58:17: <https://gist.github.com/tsuyoshicho/78f983ebf0cfcb61f8ca8ce952656d9c>
つかれた、けどこれでカラースキーム選びやすくなった</pre>
<pre>kyoh86 5日 20:16:20: open-browser-githubで行番号が付かない件、Issue起こそうかな</pre>
<pre>kyoh86 5日 20:39:55: <@UDDCM376D> <@U0M7GCBPD> 横からではありますが、
Issue切らせてもらいました。
<https://github.com/tyru/open-browser-github.vim/issues/32></pre>
<pre>tyru 5日 20:40:48: ありがとうございます！助かりました！</pre>
<pre>tsuyoshi_cho 5日 22:42:04: うう、deinのhookのところのコード、(初回はそうじゃないようだけど)普通にグローバル汚染してしまうので、直さないと...とほほ</pre>
<pre>tsuyoshi_cho 5日 22:43:16: 自分の理解があまかった(書いた最初はstate,cacheされないよね、そりゃ)</pre>
<pre>Shougo 5日 23:10:07: もちろんグローバルを汚染しますよ</pre>
<pre>tsuyoshi_cho 5日 23:15:28: ですよね...最初(キャッシュされてないとき)にエラーしないですんでて、それで枠内の意識があったっぽい...オオボケ</pre>
<pre>ゴリラ 6日 11:07:53: すんません
土日も死んでました</pre>
<pre>ゴリラ 6日 11:07:58: issueありがとうございます</pre>
<pre>ゴリラ 6日 12:20:32: gitのプラグイン、gitに乗り換えるのを検討中</pre>
<pre>kuu 6日 12:23:21: ginaが便利すぎて今までどうやって暮らしてたのかわからない</pre>
<pre>ycino 6日 12:24:53: Effective Gina、技術書典に出て欲しい</pre>
<pre>ycino 6日 12:25:09: Effective fzfもほしい</pre>
<pre>yutakatay 6日 12:25:54: Effective zinitも</pre>
<pre>yutakatay 6日 12:26:14: Effective tmuxも</pre>
<pre>kuu 6日 12:26:17: Effective $(任意のツール)</pre>
<pre>heavenshell 6日 12:26:17: お二人が書くのが一番速そうな気がw</pre>
<pre>thinca 6日 12:28:15: Effective Effective Books</pre>
<pre> 6日 12:32:27: </pre>
<pre>kuu 6日 12:33:01: ひっどw</pre>
<pre>kuu 6日 12:33:05: めっちゃ笑ってる</pre>
<pre>heavenshell 6日 12:33:48: これはひどいww</pre>
<pre>tsuyoshi_cho 6日 12:34:39: サブタイがしっかりあるのがまたwww</pre>
<pre>k-takata 6日 12:35:34: マトリョムダリスエさん</pre>
<pre>kuu 6日 12:36:20: そのうちマトリョーシカの人で通じるようになるのでは（ならない）</pre>
<pre>heavenshell 6日 12:36:37: O RLY? == Oh really?</pre>
<pre>mattn 6日 12:37:44: <https://dev.to/rly></pre>
<pre>mattn 6日 12:37:48: ここで作った。</pre>
<pre>thinca 6日 12:39:32: 任意の画像をオライリーっぽいモノクロテイストの画像に変換する機能が必要</pre>
<pre>ゴリラ 6日 12:40:43: ゴリラがない</pre>
<pre>thinca 6日 12:41:43: Animal Code とあるのにキノコとかある</pre>
<pre> 6日 12:43:08: <https://onlinejpgtools.com/convert-jpg-to-grayscale>
たとえばここでグレーにしてみた</pre>
<pre>thinca 6日 12:43:14: 本家だとこれだろうか <https://www.oreilly.co.jp/books/9784873113173/></pre>
<pre>tsuyoshi_cho 6日 12:43:21: 背景切ればいいかな</pre>
<pre>thinca 6日 12:43:36: 全身のほうがぽい</pre>
<pre>kuu 6日 12:43:39: リア充だ</pre>
<pre>tsuyoshi_cho 6日 12:44:40: <https://images.app.goo.gl/5jDH6xSUmJVkLBU38>
全身というと、これを思い出す</pre>
<pre>mattn 6日 12:47:39: <http://dailym.ai/2pms0i0></pre>
<pre>mattn 6日 12:47:46: この1枚目、いい写真だな。</pre>
<pre>dohq 6日 12:48:18: 躍動感すごい</pre>
<pre>ゴリラ 6日 12:50:51: 躍動感よ</pre>
<pre>koron 6日 12:57:47: うちにあるやつ。 <https://photos.app.goo.gl/gAfJYLPF0TOzgelr1></pre>
<pre>monaqa 6日 12:57:50: UML ゴリラだったのか…</pre>
<pre>koron 6日 13:00:00: 上野にあるほんもの <https://photos.app.goo.gl/xT22BXbsJufxnnRi8></pre>
<pre>ゴリラ 6日 13:06:11: なぞにKoRoNさんちにゴリラ像があって吹き出した記憶がある</pre>
<pre>ycino 7日 01:14:38: なんかすごそう（まだ使ってない）
<https://github.com/pechorin/any-jump.vim|https://github.com/pechorin/any-jump.vim></pre>
<pre>Shougo 7日 07:48:18: 私もチェックしてみよう</pre>
<pre>tsuyoshi_cho 7日 13:47:14: う、本体のノーマル/ビジュアル系切り替えとexpand-regionがぶつかっとる
マッピング変えよかな...</pre>
<pre>heavenshell 7日 13:58:51: oh</pre>
<pre>ycino 7日 14:44:32: 入れてみるかなー</pre>
<pre>ycino 7日 17:08:46: 便利そうだけど普段使いに使いこなせない感ある</pre>
<pre>takets 7日 19:07:51: 使ってみたもののぴんとこなかったなぁ</pre>
<pre>yutakatay 7日 19:11:11: ctags, LSPなしでもジャンプできるの(rgで検索しているだけなので)で軽くコードを追っかけたいときとかに便利な感じがします。
あとは見せ方がいいから普通にGrepするよりも見やすいとかそんな感じですかね。</pre>
<pre>tsuyoshi_cho 7日 21:26:50: ctagsの更新も裏で非同期でやってるので、常にLSPと二刀流...</pre>
<pre>yutakatay 7日 21:27:21: ctags更新なに使ってます？gutentags?自作?</pre>
<pre>yutakatay 7日 21:27:46: gutentagsよくエラー吐くからあまり有効にしときたくないんですよね・・・</pre>
<pre>tsuyoshi_cho 7日 21:28:08: <https://github.com/soramugi/auto-ctags.vim>
を使ってます
(要望マージしてもらって)</pre>
<pre>yutakatay 7日 21:28:34: 知らないプラグインだ</pre>
<pre>yutakatay 7日 21:28:45: とりあえず既読スターw</pre>
<pre>tsuyoshi_cho 7日 21:29:09: あ、マージしきってないから、自前のforkだったw</pre>
<pre>mattn 7日 21:29:35: auto-ctags はまぁまぁ老舗</pre>
<pre>mattn 7日 21:30:03: 結構昔からある。</pre>
<pre>tsuyoshi_cho 7日 21:30:15: universal-ctagsと.gitへの生成の合せ技で、便利に使っております</pre>
<pre>mattn 7日 21:30:37: 僕は自分で ctags -R したい派なので使ってないけど。</pre>
<pre>heavenshell 7日 21:31:13: なんか自作したけど結局 ctags 使ってないや。</pre>
<pre>yutakatay 7日 21:31:19: 私はgtags.vim -&gt; gutentagsですね。最近はgutentagsも手動起動しかしないようにしてますが</pre>
<pre>mattn 7日 21:32:07: vim のソースを見るのにすんげー便利なんですよ。ctags</pre>
<pre>yutakatay 7日 21:32:36: けど最近はLSP使うようにしてますね。vimも</pre>
<pre>yutakatay 7日 21:32:52: 最初はいまいちだったけど最近はいい感じ</pre>
<pre>kuu 7日 21:33:02: clangdがVimのソースをめっちゃ怒るので無効化にしたっきり</pre>
<pre>mattn 7日 21:33:05: LSP、というか clangd が若干変でヘッダファイルを開いちゃう問題があって困る。</pre>
<pre>kuu 7日 21:33:13: (解決策何も探してない)</pre>
<pre>mattn 7日 21:33:18: gd で proto の下を開いてしまう。</pre>
<pre>tsuyoshi_cho 7日 21:34:34: まあ、微妙なときはありますが、構造理解しているのはうれしい
Hoverでコメント出るし</pre>
<pre>mattn 7日 21:35:01: :sorena:</pre>
<pre>ycino 7日 21:42:22: <https://github.com/jsfaint/gen_tags.vim|https://github.com/jsfaint/gen_tags.vim></pre>
<pre>ycino 7日 21:42:33: 今外だけど多分これ</pre>
<pre>tsuyoshi_cho 7日 21:43:35: 今だとctagsgen-language-serverみたいな生成込みのサーバがあるとうれしいかもしれないなあ(参照はオマケでいいので)</pre>
<pre>yutakatay 7日 21:44:48: スターがついていたので見たことあるみたい</pre>
<pre>kg8m 7日 21:47:17: auto-ctags、昔お世話になってた
プロジェクト用 `tags` と別ディレクトリにいるライブラリ群用 `tags` を同時に非同期で異なるオプション与えながら作成するというのがうまくできなかったので結局自作関数になった</pre>
<pre>hrsh7th 7日 22:12:37: LSP と ctags 相性いいとはずなので進化させたいんですよね。root_uri でプロジェクトルート指定前提だし、documentSelector でタグ生成対象も絞れますし。。。</pre>
<pre>mattn 7日 22:14:19: efm-langserver の definition で ctags 使ってるけどまだ有効性を確認できてない。</pre>
<pre>たまたまご 7日 22:52:06: 自分は gutentags 使ってます</pre>
<pre>mattn 7日 22:53:25: <https://github.com/voldikss/vim-translator></pre>
<pre>たまたまご 7日 22:53:32: ちょっと質問なのですが、.git 内に生成の設定ってどうやるんでしょうか…？</pre>
<pre>mattn 7日 22:53:34: coc-translator の単品版？</pre>
<pre>yutakatay 7日 22:56:12: お、ぽいですね</pre>
<pre>yutakatay 7日 22:57:41: つかgifがmarkdownとかコメントとかじゃなくてコードを翻訳してるのおもしろいw</pre>
<pre>kuu 7日 22:58:19: めっちゃ遊んでる感出てる</pre>
<pre>たまたまご 7日 23:01:53: 参照の設定も聞いても大丈夫でしょうか？ご迷惑でなければ、教えていただきたいです</pre>
<pre>tsuyoshi_cho 7日 23:17:25: えっと、ここでやってる `set tags` がそうです。
実体は今こうなってます(ベース設定と複合している)
```tags=./.git/tags;C:\Users\tsuyoshi,./.svn/tags;C:\Users\tsuyoshi,./.hg/tags;C:\Users\tsuyoshi,./.bzr/tags;C:\Users\tsuyoshi,./CVS/tags;C:\Users\tsuyoshi,./tags;C:\Users\tsuyoshi,./TAGS;C:\Users\tsuyoshi,./**2/tags,./**2/TAGS,tags,TAGS```</pre>
<pre>tsuyoshi_cho 7日 23:18:50: あ、あと <https://github.com/mattn/vim-findroot>
なんかのプロジェクトルートへの自動cd系のツールがないと、タグ検索がうまくいかないと思います( `./.git/tags` のように、カレントの下に.gitがあることを前提として調整してある)</pre>
<pre>たまたまご 7日 23:20:28: 詳しく解説していただき、ありがとうございます！
vim-findroot ってのを使ってみようと思います！</pre>
<pre>たまたまご 7日 23:26:07: すみません。1つ質問なのですが、 `set tags` するときに、毎回、`;$HOME` をつけているのはどういった意味があるのでしょうか？
`'tags'` についての知識がないため、理解できていないかもしれないです...</pre>
<pre>tsuyoshi_cho 7日 23:33:20: :help file-searching して、上向き検索、で確認してもらうといいんだけど、あるターゲット(カレントとか)に `;` がついてると、上のディレクトリを順に探していくんだけど、それが `$HOME`  まで到達したら止る、という風にしてあるんです
なので、home下の作業であれば、findrootなくてもなんとかなる、はず
あとこれしないと `/` まであがっちゃうので、それは避けてる、という...</pre>
<pre> 7日 23:33:21: E149: 残念ですが file-searching して、上向き検索、で確認してもらうといいんだけど、あるターゲット(カレントとか)に `;` がついてると、上のディレクトリを順に探していくんだけど、それが `$HOME`  まで到達したら止る、という風にしてあるんです にはヘルプがありません</pre>
<pre>tsuyoshi_cho 7日 23:33:37: :help file-searching</pre>
<pre> 7日 23:33:37: ```
11. ファイル検索                                        *file-searching*
 
{Vimが |+path_extra| 機能付きでコンパイルされたときのみ有効}
 
現在の所、オプション 'path', 'cdpath', 'tags' と|finddir()|, |findfile()| で、
本節で説明する「ファイル検索」にしたがってワイルドカードの展開が行われる。
それ以外のコマンドでは |wildcards| という少し異なるルールにしたがう。
 
ファイル検索には以下の3種類がある:
```</pre>
<pre>tsuyoshi_cho 7日 23:34:14: これは path_extra な vim で `path` や `tags` で有効とのこと</pre>
<pre>たまたまご 7日 23:34:48: なるほど！！！</pre>
<pre>たまたまご 7日 23:34:54: スッキリしました！！！！</pre>
<pre>たまたまご 7日 23:34:58: ありがとうございます！</pre>
<pre>たまたまご 7日 23:37:04: 基本的には `$HOME` 以下で作業するので、この設定を入れてみることにします。</pre>
<pre>tsuyoshi_cho 7日 23:41:27: ほとんど問題ないですが、tags未生成で上のフォルダにあったりすると誤爆はするので、そこは注意してください
まずないでしょうけど(上にあるなら下で作らないだろうから)</pre>
{% endraw %}
