---
# vim:set ts=2 sts=2 sw=2 et:
layout: slacklog
title: vim-jp.slack.com log - &#35question - 2020年03月
---
<div>
<h2><a href='{{ post.url }}'>{{ page.title }}</a></h2>

<p>参加方法、各チャンネルの概要等は以下を参照して下さい。<br>
<a href='/docs/chat.html'>vim-jpのチャットルームについて</a></p>

{% raw %}
<pre>koron 9日 10:15:49: 一応Windowsのgvimで手作業で imi=1 にしてから fFtTr にはいると langmap はONになるんですよね。</pre>
<pre>presuku 9日 13:03:14: 別な方法で解決されてたのですね、よかったです！掘り返してもうしわけなかったです…</pre>
<pre>tsuyoshi_cho 9日 15:46:36: `質問です`
lessで `-F / --quit-if-one-screen`  付きのとき、プロンプトが&gt;1のために流れてしまう分ができます。
なにか解決策ってありますか? (lessにカットオフ=1画面というサイズ情報をそれより少なくできれば..、とは思ったのですが)</pre>
<pre>tsuyoshi_cho 9日 15:50:05: `-F`のときは、全画面を流さないでEOFからプロンプトに戻せるといいんだけどなあ...</pre>
<pre>tsuyoshi_cho 9日 15:57:42: うーん、再度調べたけどやっぱ無理そう...?</pre>
<pre>thinca 9日 15:58:12: 方法あるなら私も知りたい</pre>
<pre>tsuyoshi_cho 9日 15:58:39: ですよね...oh</pre>
<pre> 11日 10:11:04: 【質問です】Deniteについての質問です。普段`:Denite file/rec file_mru buffer`などをよく使うのですが、file/recの候補に.editorconfigなどドットから始まるファイルが出てこないので調べたところ、以下のuniteのissueを見つけました。
<https://github.com/Shougo/unite.vim/issues/894>
この内容とdeniteのhelpを見比べて、deniteでもデフォルトでmatcher/hide_hidden_filesが有効になっているため自分でsourceのmatcherを上書きしないと出てこないのだと理解しました。
<https://github.com/Shougo/denite.nvim/blob/51fb80b66faaff5117e661ebcffc773577763ecd/doc/denite.txt#L1432-L1434>
これをもとにこのように設定したのですが、`:Denite file/rec`の結果には画像の通りドットから始まるファイルが出てこないです。`.git/`については`matcher/ignore_globs`の対象に設定しているので出てこなくてもいいのですが、.editorconfigは出したいです。直すべきところわかる方いたら教えて下さい。よろしくお願いします。
```call denite#custom#source('file/rec', 'matchers', ['matcher/fuzzy'])```</pre>
<pre>Shougo 11日 11:03:04: その画面はdefxではないでしょうか</pre>
<pre>Shougo 11日 11:06:33: 手元でデフォルト設定で試しましたけど.editorconfigがリストに出ますよ</pre>
<pre>Shougo 11日 11:07:21: なので、最小構成を作ってだれでもテストできるようにしてくださいと私はいうしかないです</pre>
<pre>hrsh7th 11日 11:23:36: @tk denite の file/rec をカスタマイズしていませんか？</pre>
<pre>yutakatay 11日 16:34:12: 普段fold使わない人なんですが、ちょっととあるファイルで折りたたみの必要に迫られています。
普段使わないので `z` も他にマッピングしてしまってるで、新しく `Z` を割り当てようとしているんですが、ライトに使う場合って、 `zo` , `zO` , `zc` くらいをremapしとけばいいですかね？？

foldユーザーのみなさん教えてください :bow:</pre>
<pre>tsuyoshi_cho 11日 16:36:44: 自分は使うわりに適当なので、事故らない&amp;覚えられる&amp;必要なのを徐々にマッピングしていけばいいんじゃないか、くらいしか言えないかなあ...</pre>
<pre>yutakatay 11日 16:37:16: 最低限これだけは使うだろ的なのが知りたいんですよね。</pre>
<pre>yutakatay 11日 16:37:38: fold使うのにこれ使わないとつらい的な</pre>
<pre>tsuyoshi_cho 11日 16:38:23: enableにした後だったら、だけど、disableにするマッピングと全開くと閉じる(1段)があれば、とりあえずはいいかな、自分は</pre>
<pre>yutakatay 11日 16:38:57: 全閉じ、全開けだけな感じですか。なるほど</pre>
<pre>tsuyoshi_cho 11日 16:39:11: ただ、開け閉めを
<https://github.com/arecarn/vim-fold-cycle>
にまかせて&lt;CR&gt;ですませてるから参考になるかなあ?</pre>
<pre>yutakatay 11日 16:39:47: CRはいろいろなものが取り合って混沌としてるからfoldごときに渡したくないw</pre>
<pre>tsuyoshi_cho 11日 16:39:53: 1. enable-&gt;disable
2. fold -&gt; all open
3. 1 level close
4. 1level open/close &lt;plugin&gt;</pre>
<pre>tsuyoshi_cho 11日 16:41:25: normalのCRなんで、これについては、なんとかなってる
insertのCRが死ぬ...</pre>
<pre>yutakatay 11日 16:41:41: insert CRはやばい</pre>
<pre>yutakatay 11日 16:42:46: insert CRは仮想化してほしい
inoremap &lt;CR1&gt;　みたいな</pre>
<pre>thinca 11日 16:43:40: 全部開く `zR` 全部閉じる `zM` 1つ開く `zo`</pre>
<pre>thinca 11日 16:44:15: カーソル下を全部開く `zO` も使うかな</pre>
<pre>thinca 11日 16:44:57: カーソル位置のテキストが見えるように開く `zv` 意外に色々使ってるな、私w</pre>
<pre>thinca 11日 16:45:14: 折りたたみ自体は私もそんなには使わないのだけど。デフォルトは全部開きっぱなし</pre>
<pre>tsuyoshi_cho 11日 16:45:43: あとは個人の好みのスタイルを探すしかないのかもしれない...</pre>
<pre>mattn 11日 16:50:32: fold まったく使わない</pre>
<pre>0Δ 11日 16:53:53: 個人的に `zx` (再計算) も良く使いますね</pre>
<pre>k-takata 11日 17:02:47: (fold嫌いなので `set foldlevelstart=99` とかやってる)</pre>
<pre>machakann 11日 19:28:58: `l` とか水平移動で折りたたみ開けるので `zo` はあまり使わないです</pre>
<pre>kuu 11日 19:29:19: 水平移動で折りたたみ開くやつはよくやる</pre>
<pre>yutakatay 11日 19:32:56: ほんとだ！簡単に開けたw</pre>
<pre>machakann 11日 19:34:10: `'foldopen'` オプションの値によります</pre>
<pre>ycino 11日 19:34:14: よく `l` で開く</pre>
<pre>tk 12日 01:50:01: Shougoさんおっしゃるとおりでデフォルトだと出ました。内容理解せずにこちらをコピペしていたのが原因でした。お手数おかけしました。
<https://github.com/Shougo/denite.nvim/blob/b6e2c7df9402f293bad1dc45f5d41b3dc5d8a9b1/doc/denite.txt#L152-L153></pre>
<pre>tk 12日 01:51:16: file/recのcommandをこちらをコピペしてカスタマイズしていました。これがカスタマイズという認識もなかったのですがhelpをよく読んだらわかりました。お手数おかけしました。
<https://github.com/Shougo/denite.nvim/blob/b6e2c7df9402f293bad1dc45f5d41b3dc5d8a9b1/doc/denite.txt#L152-L153></pre>
<pre>tyru 12日 02:16:37: 最低限これだけは使うだろ的 fold マッピング、自分はこれですね `nnoremap z&lt;Space&gt; zMzvzz`
これの他にはたまに `zM`, `zR` を使うくらい</pre>
<pre>Shougo 12日 06:03:33: なるほど</pre>
<pre>monaqa 12日 06:42:25: 私は `za` / `zA` でトグルすることが多いですね（開くマップと閉じるマップを使い分けるのがだるかっただけ）</pre>
<pre>バクダンくん 12日 07:14:21: 折畳めっちゃ使うさん
`zj` `zk` は折畳の開閉に関わらずジャンプ対象にしてしまうので、閉じられた折畳のみを対象としてジャンプする関数作って `zj` `zk` にマッピングしてます :benri:</pre>
<pre>バクダンくん 12日 07:31:54: 今見たらその関数、一度Stack Overflowからコピペしたものが気に入らなくて自分で作り直した形跡があるけど、何が気に入らなかったのかわからない
&lt;expr&gt;マッピングになってるし、CmdlineEnterが走らないようにしたかったのかな</pre>
<pre>ゴリラ 12日 07:39:01: &lt;expr&gt; を使ったことがないけど、どういうときに使うんですか？</pre>
<pre>kuu 12日 07:40:09: 例えば、ノーマルでgjをjに単純にマッピングすると、カウント入力してj使うときに折り返しあると期待してるであろう動作をしないんですが</pre>
<pre>kuu 12日 07:40:50: カウントがあるかはVim scriptから取れるので、カウントがあるかないかでjとgjを切り替えたりとか、そういったことができます</pre>
<pre>kuu 12日 07:42:21: Vim scriptでマッピングの中身を動的に生成できる</pre>
<pre>バクダンくん 12日 07:52:13: 僕の↑の例では、マッピングからExコマンド実行する代わりに、目的地の行番号計算して `G` でジャンプするコマンドを組み立ててますね</pre>
<pre>vim_jp 12日 17:52:40: <https://groups.google.com/d/msg/vim_jp/aGgIMoNPBBI/UD6nLs2FDQAJ|Cygwin screen で gvim を使用して cygwin が文字化け>
長年 Gvim にお世話になっています。 Cygwin screen から gvim を動かし、すぐ :q[Enter] で終了すると、cygwin が文字化けします。 Cygwin 32 bit % zsh --version zsh 5.5.1 (i686-pc-cygwin) % screen --version Screen version 4.08.00 (GNU) 05-Feb-20 Gvim を 8.2 (2019 Dec 12) から 8.0 (2016 Sep 12) にして発生しなくなりました。</pre>
<pre>yutakatay 12日 17:54:57: Cygwinもscreenもなにもかもみな懐かしい</pre>
<pre>mattn 12日 17:57:29: 死愚陰</pre>
<pre>tsuyoshi_cho 12日 17:58:35: 巣苦離院</pre>
<pre>k-takata 12日 18:00:49: gvimの実行によって文字化けが発生する原因がさっぱり思い当たらない。なんだこりゃ？</pre>
<pre>mattn 12日 18:03:25: どれです？</pre>
<pre>mattn 12日 18:03:36: あ、↑か</pre>
<pre>mattn 12日 18:05:28: cygwin/msys2 ってプロセスの stdout を attach して実行してますけど、もしかして gvim.exe のどこかで printf("\x1b["); 的な事やってたしして。普段は見えないけど。</pre>
<pre>k-takata 12日 18:17:54: `gvim &gt; log.txt` とかしてもらうのがいいのかな？</pre>
<pre>phyllite 12日 18:55:57: きぐうぃん派がいたような記憶 &lt; 死愚陰</pre>
<pre>tsuyoshi_cho 12日 18:56:45: 鬼愚陰か...</pre>
<pre>kyoh86 12日 19:18:32: 金爆かな？</pre>
<pre>[Vim]の新着質問一覧｜teratail（テラテイル） 12日 23:31:33: <https://teratail.com/questions/246775?rss=all|vimで特定の行、位置を指定したsyntax highlightは可能か>
つい先日vimを使い始めた者です。  
vim scriptで特定の行、位置(例: 10行目45文字目から60文字目)といった位置を指定した文字色の変更やハイライトは可能なのでしょうか。  
具体的には、「nywコマンドやnyyコマンドで文字をヤンクした際、ヤンクされた範囲だけが(ペーストされるまで、或いはカーソルが移動するまで)色の変化等で強調される」ようなVim Scriptファイルを書いてみようと思ったのですが、  
無名レジスタからヤンクされた文字列を取得する方法は見つかっても、それを編集画面上で強調して表示する方法が...

<https://teratail.com/questions/246775?rss=all|続きを見る></pre>
<pre>mattn 12日 23:41:50: 難しいんじゃないかな。</pre>
<pre>tsuyoshi_cho 12日 23:44:20: 一時的に着色するプラグインはなくはない...けどまあ面倒そう...</pre>
<pre>kuu 12日 23:44:48: matchaddpos使えば着色は可能だけど難しい</pre>
<pre>mattn 12日 23:45:55: yank した領域、という所が難しい。</pre>
<pre>mattn 12日 23:46:14: piyo pi|yo piyo で yiw</pre>
<pre>yutakatay 12日 23:46:48: RRethy/vim-illuminate
じゃだめなんですかね？？</pre>
<pre>mattn 12日 23:47:23: <https://github.com/machakann/vim-highlightedyank/blob/931cc6bd53e4a1fdbe592751f0e13c0e401f0a49/autoload/highlightedyank.vim#L135-L159></pre>
<pre>mattn 12日 23:47:28: これくらい書かないといけない。</pre>
<pre>yutakatay 12日 23:47:28: ちがったこいつじゃない</pre>
<pre>yutakatay 12日 23:49:09: <https://github.com/haya14busa/vim-operator-flashy>
こっちでした</pre>
<pre>mattn 12日 23:51:41: 必ず visual 選択してから yank する人だと話は早いけど、そうじゃないならカーソル位置から一番近い所にあるテキストを検索する事になる。</pre>
<pre>mattn 12日 23:52:04: この API 欲しいなぁとずっと思ってる。</pre>
<pre>tsuyoshi_cho 12日 23:53:11: 素直にやると微妙に事故るんですよね...</pre>
<pre>hotoolong 15日 23:17:31: [質問] nvimでFloating Window を開くと背景がピンクになります。背景色を変更したいのです。どうすればいいでしょうか？</pre>
<pre>kuu 15日 23:19:22: `:hi NormalFloat &lt;ctermbg or guibg&gt;=#&lt;任意のカラーコード&gt;` といった感じのコマンドを実行すればとりあえずは色変わります</pre>
<pre>kuu 15日 23:19:47: ターミナルがフルカラーに対応してればguiで、してなければctermの方で</pre>
<pre>kuu 15日 23:20:52: 個人的には何かしらのカラースキームを導入することをおすすめします</pre>
<pre>hotoolong 15日 23:24:31: ありがとうございます！変更できました！</pre>
<pre>ansanloms 16日 12:20:44: `質問です`

はじめて質問させていただきます。何卒宜しくお願い致します。

lightline.vim を導入、且つファイル書き込み、読み込み時に mkview および loadview を実施するようにしています。
そのうえで、開いているファイルが別の箇所で更新された際に vim 上で再読み込みを行うと、ステータスラインが消えてしまいます。
こちら、ステータスラインが消えないようにするにはどうすればいいか、ご教示いただきたいです。

環境は

+ Windows 10
+ vim 8.2.390

になります。

**手順**

1. lightline.vim を導入する
 - `mkdir %UserProfile%\.vim-test\pack\test\start`
 - `git clone <https://github.com/itchyny/lightline.vim.git> %UserProfile%\.vim-test\pack\test\start\lightline.vim`

2. 以下の通り `.vimrc.test` を用意する

```set packpath^=~/.vim-test
set laststatus=2

" <https://vim-jp.org/vim-users-jp/2009/10/08/Hack-84.html>
autocmd BufWritePost * if expand('%') != '' &amp;&amp; &amp;buftype !~ 'nofile' | mkview | endif
autocmd BufRead * if expand('%') != '' &amp;&amp; &amp;buftype !~ 'nofile' | silent loadview | endif
set viewoptions-=options```
3. あらかじめ test.txt を用意する
 - `copy nul test.txt`

4. vim を起動し test.txt を開く
 - `vim -u .vimrc.test -N`
 - `:e test.txt`

5. vim 以外の所で test.txt を更新する
 - `echo hoge &gt;&gt; test.txt`

6. vim 上で test.txt を読み込む

```W11: 警告: ファイル "test.txt" は編集開始後に変更されました
詳細は ":help W11" を参照してください
[O]K, ファイル読込((L)):```
 --&gt; L を押下

**実行結果**

ステータスラインが消えている。

**実現したいこと**

ステータスラインが消えないようにしたい。


何卒宜しくお願い致します。</pre>
<pre>itchyny 16日 12:37:21: `++nested` をつけるとどうなりますか
`autocmd BufRead * ++nested if expand('%') != '' &amp;&amp; &amp;buftype !~ 'nofile' | silent loadview | endif`</pre>
<pre>tsuyoshi_cho 16日 12:48:31: redrawしたらどうなりますか?</pre>
<pre>tsuyoshi_cho 16日 12:49:05: (redrawstatusでもいいかも?)</pre>
<pre>kuu 16日 12:49:54: loadviewでstatusline破壊されてるのではって感じする</pre>
<pre>tsuyoshi_cho 16日 12:51:16: っぽいですが、(自動的な復帰もふくめて)どうなんでしょうね...</pre>
<pre>ansanloms 16日 12:51:46: <@UAZ33BKV2>
ありがとうございます。
`:redraw` および `:redrawstatus` を実施しましたが変化はありませんでした。
※ `:e` で再読み込みすればステータスラインが表示されます。</pre>
<pre>itchyny 16日 12:52:19: `vim 上で test.txt を読み込む` この具体的な操作が知りたい</pre>
<pre>[Vim]の新着質問一覧｜teratail（テラテイル） 16日 14:51:29: <https://teratail.com/questions/247437?rss=all|vscodeのインストールについて>
前提・実現したいこと
iPad Proで、vscodeをインストールしたいのですが、可能でしょうか？  
自分でも調べましたが、難しいのかな？と感じています。YouTubeを見ていたらブログも見ましたが、他の言語はできても、vscodeは難しいのか、詳しく書かれたものがなかったため、
経験された方がいましたらよろしくお願いいたします。
やはりパソコンがあったほうが良いかと思うのですが、今回はiPadでできるかどうかチャレンジしたいです。
よろしくお願いいたします。  

<https://teratail.com/questions/247437?rss=all|続きを見る></pre>
<pre>0Δ 16日 15:02:29: Vim関係無いと思ったら、回答の中に「Vimなら行けるよ！」ってのがあった…</pre>
<pre>kuu 16日 15:02:48: 多分タグのvimに反応してる</pre>
<pre>kuu 16日 15:03:13: これteratailの作りが悪いんかな、質問したことないからわからん</pre>
<pre>itchyny 16日 15:03:31: すぐに見れなさそうなのでGitHubにissue立てていただけますか。時間があるときに見ます。</pre>
<pre>mattn 16日 15:03:53: なんでタグに vim 入れるんですかね。</pre>
<pre>0Δ 16日 15:04:18: `Vi` まで書いてサジェストされたのをポンしている疑惑</pre>
<pre>mattn 16日 15:04:35: いやこれ手動ですよ。</pre>
<pre>thinca 16日 15:04:45: 質問の仕方がわからない人がする質問が流れてくるのが正直しんどい。ここみたいにチャットならまだちょっとずつやり取りしてお互いの認識を埋めていけるけど、質問サイトは回答したあと質問者が音沙汰なしなんてのが平気で起きるからそりゃ回答者もやる気をなくす</pre>
<pre>mattn 16日 15:05:04: CROS まったく関係なくて笑う</pre>
<pre>mattn 16日 15:05:27: ぶっ CORS (放送禁止)</pre>
<pre>koron 16日 15:05:44: しんどいのなら流すのやめたら?</pre>
<pre>eihigh 16日 15:05:46: と思ったときには（以下略</pre>
<pre>kuu 16日 15:05:49: teratailさんごめんなさい</pre>
<pre>thinca 16日 15:06:40: 救ってあげられる質問も流れてくることがあるのがなんとも。まあ簡単な質問はあっち側の人が速攻で回答しちゃってるというのはあるけど…</pre>
<pre>0Δ 16日 15:06:41: 逆に考えよう、僕等が正しい方法を積極的に流す事でteratailを浄化できると</pre>
<pre>thinca 16日 15:07:49: とりあえず Stack Overflow みたいに編集できるようにさせてくれるだけでもだいぶ違うのだけどなー</pre>
<pre>tsuyoshi_cho 16日 15:08:50: まあ、タグが酷いから、というのを答えられそうなのだけ答えるつもり、くらいの軽い気持ちで十分だという免罪符になるとしておけば、心は平穏かもしれない</pre>
<pre>ansanloms 16日 15:56:00: <@U7H4TJEG0>
お手数をおかけします。
当該、下記に作成いたしました。
<https://github.com/itchyny/lightline.vim/issues/430>

何卒よろしくお願いします。</pre>
<pre>itchyny 16日 19:24:01: :h FileChangedShellPost</pre>
<pre> 16日 19:24:02: ```
                                                        *FileChangedShellPost*
FileChangedShellPost            Vimの外部でファイルが変更されたのを検出・対処
                                した後。ステータスラインを更新するのに使える。
```</pre>
<pre>itchyny 16日 19:24:11: こんなのしらなんだ</pre>
<pre>itchyny 16日 19:26:46: issue報告助かりました (lightlineにbugラベルをつけるのは久しぶりです)</pre>
<pre>monaqa 16日 21:17:24: teratail の件，VSCode に関するタグが出てこないのが原因っぽいですね．
しかも今，質問画面を試しに開いてみたら，入力されたタグが存在しない場合はエラーになるみたいです（タグ追加には問い合わせが必要）．
たしかにこの仕様なら「VSCode の質問したいのに VSCode のタグがない．代わりに似たようなエディタの Vim をつけとくか」なんて心理がはたらく人がいてもおかしくないかも...</pre>
<pre>monaqa 16日 21:17:29: 似たようなエディタ（名前が）</pre>
<pre>kuu 16日 21:18:43: JavaとJavaScriptくらい違う</pre>
<pre>tsuyoshi_cho 16日 21:19:26: Emacs LispとECMAScriptくらい違うかもw</pre>
<pre>monaqa 16日 21:19:37: そして今気づいたけど，タグ名「Visual Studio Code」で，「vscode」と打っても補完候補にあがってこないのか</pre>
<pre>yutakatay 16日 21:22:32: Archでもvscodeでインストールできなくていつもあれ？？ってなるんですよね・・・</pre>
<pre>kuu 16日 21:24:11: vscode無いのか…と最初見た時は思ったな</pre>
<pre>mattn 16日 21:36:10: まぁでも客観的に見ても teratail で質問する人の多くがタグをちゃんと付けられない。</pre>
<pre>kuu 16日 21:37:25: 正しくタグを付けられる人の多くが自己解決能力があるというのは皮肉っぽい</pre>
<pre>heavenshell 16日 21:37:44: タグは人類に早すぎた。</pre>
<pre>mattn 16日 21:38:33: たぶん何かをカテゴライズできる力があるとググる時の単語が作れるんでしょうね。</pre>
<pre>mattn 16日 21:38:44: それが無いから質問してる。</pre>
<pre>mattn 16日 21:40:03: だいぶ前に奥さんに、ググる時の絞り方を誉められたことがあったけど、なんか違うんでしょうな。普段ググってる人達は。</pre>
<pre>heavenshell 16日 21:40:09: つまり求められるのは質問内容を解析して適切なタグをつけるシステム</pre>
<pre>hrsh7th 16日 21:40:27: お金になりそう</pre>
<pre>kuu 16日 21:40:42: 人がググるのを見ていて、適切に区切るというのをしていなくて、まずそこからかってなったことがある</pre>
<pre>kuu 16日 21:41:04: 検索エンジンに文章を入力するのを観測した</pre>
<pre>mattn 16日 21:41:19: 「ワッフル作り方温度」みたいな</pre>
<pre>kuu 16日 21:41:29: joinされとる</pre>
<pre>kuu 16日 21:42:25: パソコン講座とか見てるとググり方、マジで金になるのではと思ったことある（多分胃に穴開くからやりたくない）</pre>
<pre>mattn 16日 21:43:24: 僕らの様に慣れてると「ワッフル　作り方　温度」の所に「電子レンジ」とか「失敗しない」とか付けれるんだけど、そういうのが付けれない人はいますね。</pre>
<pre>mattn 16日 21:44:58: 小学校がパソコン教育始めるというので近所のプログラミング教室に娘と見学に行った事があるけど、いろいろ口を出したくなってしまうのでプログラマが行くのはオススメできない。</pre>
<pre>Nicholas 16日 21:45:27: もう逆に今のgoogleくらい頑張ってるなら自然言語で検索したほうがヒット率いいとおもうんですよね</pre>
<pre>mattn 16日 21:46:18: ひとまずダブルクオートでくくれ！と言いたくなる事は多々あります。</pre>
<pre>johejo 16日 21:47:44: こないだそんなにIT詳しくなさそうな知人がangular -angularjs みたいなググり方知っててビビった</pre>
<pre>Nicholas 16日 21:49:31: とりあえず日本人、日本語苦手すぎるのでちょっとみんなで立ち止まりたい</pre>
<pre>Nicholas 16日 21:50:14: 構造化が必要なので早く自然言語もテキストプロパティに対応しないと…</pre>
<pre>kuu 16日 21:50:39: とあるハッカーの方が優れたハッカーは自然言語が得意と言っててグサッと刺さった</pre>
<pre>mattn 16日 21:51:34: 形態素解析にも限界があるからなぁ。</pre>
<pre>Nicholas 16日 21:52:28: 自然言語、本当にいい文章読む以外に学ぶ術がないんですよね…</pre>
<pre>Nicholas 16日 21:53:08: 文章自体のネストとか構造に丁寧な文章がわかるまで読み潰すしかない</pre>
<pre>johejo 16日 21:53:32: ペアググり 割とおすすめ</pre>
<pre>tsuyoshi_cho 16日 21:56:23: サジェス死 (575を埋める)</pre>
<pre>luma 16日 21:56:48: (5...?)</pre>
<pre>tsuyoshi_cho 16日 21:57:30: (字不明)</pre>
<pre>Nicholas 16日 21:58:19: 古いアタマなんで自分もサジェストにイラつくんだけど、もう任せる方にシフトできるようにアタマ慣らしたほうが...と思う</pre>
<pre>Nicholas 16日 21:58:46: 本音は&lt;C-p&gt;させて</pre>
<pre>kuu 16日 21:59:03: 曖昧な動作するものが好きになれないのでサジェストは常に切ってる</pre>
<pre>kuu 16日 21:59:17: 最近ファジーファインダーを許容できるようになったので成長はしてる(?)</pre>
<pre>luma 16日 21:59:52: fzf，あいまいといいながら厳密だなあという気持ちになる（いいこと）</pre>
<pre>johejo 16日 22:01:23: 綴りとか適当に調べるときとか助かってる気がする
Ctrl-n, Ctrl-p ついつい押してしまう....</pre>
<pre>tsuyoshi_cho 16日 22:02:50: Vimの類語辞書とEBlookのお世話になることがけっこうある...便利</pre>
<pre>mattn 16日 22:16:07: 辞書って自分で抜き出した奴です？</pre>
<pre>tsuyoshi_cho 16日 22:16:46: はい、そうですね。
どっちも自前で準備しました。</pre>
<pre>mattn 16日 22:31:35: むちゃんこ久しぶりに eblook 起動した。</pre>
<pre> 16日 22:31:44: </pre>
<pre>tsuyoshi_cho 16日 22:39:19: 辞書定義はこれくらい
<https://github.com/tsuyoshicho/vimrc-reading/blob/30e44b74bd658d268a31adcf9c2baad7b17628be/.vim/rc/dein_lazy.toml#L102-L235>
あるだけ入れてある、という...まあ英辞郎とGENEでだいたいOKだとも言える...</pre>
<pre>kuu 16日 22:40:12: 惡魔の辭典が存在感ある</pre>
<pre>tsuyoshi_cho 16日 22:41:18: たまーに適当なワードで眺めることがある
ちなみに全辞書はスマホにEBPocket Professionalとともに入ってたりする</pre>
<pre>mattn 16日 22:46:47: 通信用語の基礎知識なつい</pre>
<pre>tsuyoshi_cho 16日 22:47:54: vim help jp を EPWING に変換できたら需要あるだろうか(もう下火だよなあ...)</pre>
<pre>johejo 16日 23:09:30: wordnet 昔遊んだなあ sqlite3で結構面白いことできる</pre>
<pre>eihigh 16日 23:34:49: プログラマは実際数学力より国語力。</pre>
<pre>heavenshell 16日 23:35:41: このコードを書いた作者の気持ちを述べよ(20点)</pre>
<pre>lambdalisue 16日 23:38:17: 帰りたい</pre>
<pre>eihigh 16日 23:38:35: 「←なぜか動く」</pre>
<pre>kuu 16日 23:38:38: この流れよ</pre>
<pre>kuu 16日 23:38:56: A.なんもわからん、俺たちは雰囲気でコードを書いている</pre>
<pre>kuu 16日 23:39:40: 出題者が想定している回答は「このコードを書くことにより会社に貢献できて、ゆくゆくは社会のために(ry」だったりする</pre>
<pre>lambdalisue 16日 23:40:03: マジレスすると『お腹すいたなぁ』とか</pre>
<pre>eihigh 16日 23:43:08: 自分の場合「書いてるうちによく分からなくなってきたけどまあいいか」かな…</pre>
<pre>koron 17日 14:22:21: RISC-Vが載った、ラズパイ規模のSBC(Single Board Computer)ってないだろうか? SiFive以外で。</pre>
<pre>kuu 17日 14:23:50: 私も知りたい、いい加減RISC-Vのボード一枚くらい確保しておきたい</pre>
<pre>koron 17日 14:24:26: Arduino規模のカメラ乗ったやつは持ってる。M5StickVじゃないやつなんだけど。</pre>
<pre>koron 17日 14:25:44: Maixduino だった。

<https://www.shigezone.com/?product=maixduino%e3%83%9e%e3%83%83%e3%82%af%e3%82%b9%e3%83%87%e3%83%a5%e3%82%a4%e3%83%bc%e3%83%8e></pre>
<pre>mattn 17日 14:26:46: あー、僕も(マイクの不具合が見つかってサポートに問い合わせたら「あー、今直してて直ったら交換するから待ってて」って言われて待ってたのにその改変版がやめになった) M5StickV は持ってる。</pre>
<pre>mattn 17日 14:30:36: M5StickV、ファームで python 起動してるはずなんでそこでRISC-V な Go の実行モジュール起動してやったら動くんじゃないかと思ったりしてるけど、誰かやってないかな。</pre>
<pre>koron 17日 14:31:50: OSないからGoが動くにはきついんちゃうの? TinyGoか…</pre>
<pre>tsuyoshi_cho 18日 16:46:31: `質問です`
macのvim/macvimでlibluaを認識させるに安定の方法ってどうしたもんでしょう?
DYLD_LIBRARY_PATHにパス設定したけどなぜか認識しない...
(Github Actions下なのです)</pre>
<pre>tsuyoshi_cho 18日 16:49:55: <https://qiita.com/junkoda/items/78c726b06afe2a9d3930>
ぐへ、これのせいか?</pre>
<pre>tsuyoshi_cho 18日 17:06:26: ```brew install lua
brew install luajit```
で逃げることにしました...</pre>
<pre>tsuyoshi_cho 19日 06:00:20: ありがとうございます。
やっぱ、そういう風になりますよね。</pre>
<pre>kuu 19日 09:56:25: `質問です`
`setlocal buftype=nofile` 等されたバッファを`:write`等で既存のファイルに上書きすると問答無用で上書きされてしまうのですが、これは仕様でしょうか。</pre>
<pre>egawata 19日 10:05:16: &gt;          "nofile" and "nowrite" buffers are similar:
&gt;         both:           The buffer is not to be written to disk, ":w" doesn't
&gt;                         work (":w filename" does work though).</pre>
<pre>egawata 19日 10:05:39: `:w filename` だと書き込みできてしまうようです</pre>
<pre>thinca 19日 10:08:19: `:w filename` はカレントバッファに関係なくファイルに書き込むコマンドですからね</pre>
<pre>tsuyoshi_cho 19日 10:08:22: 設定より、ユーザーオペレーション(の明示)は優越という感じですかね</pre>
<pre>kuu 19日 10:10:01: あー、聞きたいのはそちらではなかったです、ごめんなさい
通常のファイルだと別のファイルに上書きしようとすると!付けろって言われると思うんですが、nofileだと出ないので仕様なのかと思いまして</pre>
<pre>thinca 19日 10:15:58: バグっぽい空気を感じますね</pre>
<pre>kuu 19日 10:17:29: バグかあ、ありがとうございます</pre>
<pre>thinca 19日 10:19:23: :contribute-chance:</pre>
<pre>kuu 19日 10:19:41: vim-jpにissue立てといて時間あったらやります…</pre>
<pre>thinca 19日 10:20:02: バグ報告だけでも立派な contribute</pre>
<pre>koron 19日 10:26:25: なんか意図した挙動かも。というのは `check_overwrite()` という関数でチェックしてるっぽいんだけど、そのなかでいかが条件に含まれてる。

```#ifdef FEAT_QUICKFIX
	    &amp;&amp; !bt_nofilename(buf)
#endif```
で肝心の `bt_nofilename()` はこんな関数。

```/*
 * Return TRUE if "buf" is a "nofile", "acwrite", "terminal" or "prompt"
 * buffer.  This means the buffer name is not a file name.
 */
    int
bt_nofilename(buf_T *buf)```</pre>
<pre>koron 19日 10:27:43: nofileのときバッファー名はファイル名ではないのでオーバーライドチェックは必要ない=常に上書きってことかな</pre>
<pre>koron 19日 10:28:12: んーちょっと微妙ねw</pre>
<pre>kuu 19日 10:28:13: うぇ…仕様っすか、これ</pre>
<pre>koron 19日 10:28:42: しかも +quickfix の時のみ。</pre>
<pre>kuu 19日 10:28:45: スクラッチバッファ多用するのでめっちゃふべん</pre>
<pre>koron 19日 10:29:06: この分だと、ここ直すと困るスクリプト結構ありそう。</pre>
<pre>thinca 19日 10:29:08: `:w filename` した時に `filename` が存在していても上書きされちゃうってのが現象ですよね? チェック対象ミスってる?</pre>
<pre>kuu 19日 10:29:44: そう、すごくバグの香りがする</pre>
<pre>k-takata 19日 10:30:12: +quickfix の時のみというのがとても怪しい。</pre>
<pre>koron 19日 10:30:16: ね</pre>
<pre>thinca 19日 10:30:45: てか `:w a.rb` でカレントバッファの BufWriteCmd 発動したのだが?</pre>
<pre>thinca 19日 10:31:39: なんかよくわからんな…仕様上どうあるべきなんだこれ</pre>
<pre>k-takata 19日 10:32:31: 本家にさっさと投げちゃうのがよさげ</pre>
<pre>tsuyoshi_cho 19日 10:34:03: 対バッファだと名前がないから名付けすることのチェックはなし -&gt; `!` なくても (別名)保存できていい
対ファイルだと上書きなのでチェックすべき -&gt; `!` なしで保存できるのはミス
みたいな...
`!` の強制が、バッファ側か、実ファイル側どっちにかかってるのかな...(qfはバグ臭がすごい)</pre>
<pre>kuu 19日 10:34:07: とりあえずvim-jpには投げた <https://github.com/vim-jp/issues/issues/1337></pre>
<pre>kuu 19日 10:34:14: 時間ないので後からやります、すみません</pre>
<pre>koron 19日 10:38:00: check_overwrite の中ではバッファ名をチェックしてないので、与えられたファイル名が :w 由来かどうかは微妙にわからなさそう。なので do_write とあわせて直す感じかしらねぇ。</pre>
<pre>mattn 19日 10:38:43: 今北産業だけど普通にバグぽいなぁ。</pre>
<pre>koron 19日 10:40:33: ああそうだこの1行がどういう経緯で入ったか、調べようと思ったんだった。わすれてたw</pre>
<pre>mattn 19日 10:40:48: そのファイルが `:e foo.txt | set buftype=nofile` で読まれたのか(swapfile で確認?)どうかで動作が変わりそうな気もしなくない。</pre>
<pre>thinca 19日 10:42:54: しかし nofile にした時点でそのバッファはファイルとは紐付かないのが正しい気がしますね</pre>
<pre>koron 19日 10:42:57: あったあった <https://github.com/vim/vim/commit/11717bb0a1275f1e270396aeb1df92d973d4d068></pre>
<pre>koron 19日 10:44:32: &gt; Patch 7.1.172
&gt; Problem:    When 'buftype' is "acwrite" Vim still checks if the file or
&gt; 	    directory exists before overwriting.
&gt; Solution:   Don't check for overwriting when the buffer name is not a file
&gt; 	    name.
&gt; Files:	    src/ex_cmds.c
</pre>
<pre>tsuyoshi_cho 19日 10:45:18: このProblemが妥当なのか、に戻る...</pre>
<pre>koron 19日 10:45:58: この時点で nofile での `:w {filename}` の `{filename}` が存在したときに強制上書きするようになった。</pre>
<pre>thinca 19日 10:47:09: 引数見れてないのが問題な予感</pre>
<pre>koron 19日 10:47:13: その後、この修正で nofile の意味が少し変わってる。
<https://github.com/vim/vim/commit/26910de8b0da6abab87bd5a397330f9cbe483309></pre>
<pre>koron 19日 10:47:40: ところでbt=acwriteってなに?</pre>
<pre>koron 19日 10:48:48: ああ autocmd で書く、ってやつか</pre>
<pre>kuu 19日 10:49:05: acwrite以外は想定してない挙動な気がするな</pre>
<pre>koron 19日 10:49:43: ふむふむ。んじゃ 7.1.172 でバグってる。本来なら acwrite だけチェックしなきゃいけないのに、nofile 他も含めてるから上書きチェックされなくなっちゃったんだ</pre>
<pre>koron 19日 10:53:42: んーっていうか do_write の初めのほうで bt_nofilename のケースをちゃんと捌くほうが、構造としては正しい気がするねw</pre>
<pre>mattn 19日 10:55:31: 余談だけどこういう調査議論は slack のログで permalink できると良さそうね。</pre>
<pre>tsuyoshi_cho 19日 10:56:28: フルのログはともかく、範囲指定でごそっとWebページ化してくれるとかあると助かりますね...</pre>
<pre>koron 19日 11:06:58: とりあえずここに僕が書いた調査結果は、みじかくまとめてissueに転記しときました</pre>
<pre>koron 19日 11:07:14: 「みじかくまとめて」=「くっそてきとう」</pre>
<pre>kuu 19日 11:11:18: ありがとうございます！</pre>
<pre>tyru 19日 12:31:55: nofile の場合 `:w` で上書きチェックしないのは分かるけど `:w {filename}` でチェックしてないのはかなりバグっぽいですね…</pre>
<pre>kuu 19日 12:33:32: 雑に修正された結果こうなった感じある</pre>
<pre>kuu 19日 13:33:08: 投げた <https://github.com/vim/vim/issues/5807></pre>
<pre>kyoh86 19日 17:55:57: … 誰か zsh on :terminal in vim で、promptが空で待機してるときに
`:` をタイプしたらコマンドモードに入る、ってやつやってませんでしたっけ…
…vim-jp Slackのスター付け忘れが我ながらひどい</pre>
<pre>kuu 19日 17:59:42: これ？ <http://tyru.hatenablog.com/entry/2020/01/06/152929></pre>
<pre>mattn 19日 18:00:35: そのまんまなタイトルでフイたw</pre>
<pre>tyru 19日 18:02:48: 多分スターつけててももう消えてるやつだ…</pre>
<pre>kyoh86 19日 18:17:18: わっ</pre>
<pre>yutakatay 19日 18:17:44: pinは残る仕様なんですかね？？昔のまである</pre>
<pre>kyoh86 19日 18:17:53: starは消えるのか</pre>
<pre>kyoh86 19日 18:17:56: ありがとうございます</pre>
<pre>kyoh86 19日 18:18:13: ん、いや、Starは残ってるっぽいな</pre>
<pre>kyoh86 19日 18:18:21: 単にStar付け忘れだ…</pre>
<pre>yutakatay 19日 18:18:22: あ、そうなんですね</pre>
<pre>mattn 19日 18:18:42: プロンプトで判定するやつ、expect からそうだけどモニョ感がぬぐえないのつらい。</pre>
<pre>tyru 19日 18:26:18: あ、star 残るんだ</pre>
<pre>yutakatay 19日 18:29:03: そうするとここらへん全スターみたいなのしたいですよね。
流れがないとわからないもの多いんで</pre>
<pre>tsuyoshi_cho 19日 18:30:07: ひどいと、ぽこっと謎なギャグがスターに...なりますしね</pre>
<pre>heavenshell 19日 18:31:42: pin は上限あるけど star もあるのかな :thinking-material-just-fingers:</pre>
<pre>yutakatay 19日 18:32:46: starから URL取れないんですね。ほんと自分しか見れない</pre>
<pre>mattn 19日 18:33:03: pin は channel 内共有、star はユーザ内でしたっけ。</pre>
<pre>heavenshell 19日 18:33:24: ですね</pre>
<pre> 19日 18:33:40: <https://vim-jp.slack.com/files/U03C6TEAZ/FTAL7RS21/image.png></pre>
<pre>yutakatay 19日 18:33:46: あ、ファイルはとれた</pre>
<pre>heavenshell 19日 18:34:26: これはw</pre>
<pre>yutakatay 19日 18:34:44: スターしてる画像これしかなかったんで・・・ :bow:</pre>
<pre>heavenshell 19日 18:34:48: w</pre>
<pre>lambdalisue 19日 18:35:57: お　い　お　ま　え　ら</pre>
<pre>kuu 19日 18:36:14: 完全におもちゃ</pre>
<pre>mattn 19日 18:36:24: そのスター、大事になさって下さい。</pre>
<pre>yutakatay 19日 18:36:39: (スターしてなかった人はこれスターしとけよ！)</pre>
<pre>kuu 19日 18:36:54: 付けた</pre>
<pre>thinca 19日 18:38:24: 画像、古いのもアドレスわかってれば取れますね。ログを export してそこから見れるやつ取れる</pre>
<pre>バクダンくん 19日 20:49:29: <https://github.com/vim/vim/commit/a3a9c8ef697bbf6f640cde99710b6f534f29f77d|https://github.com/vim/vim/commit/a3a9c8ef697bbf6f640cde99710b6f534f29f77d>
あっさり</pre>
<pre>k-takata 19日 20:52:20: あれ？その3行削除だけでいいの？</pre>
<pre>kuu 19日 20:57:36: え、消したんかw</pre>
<pre>tsuyoshi_cho 19日 21:24:56: とりあえず消しとけパッチ...w</pre>
<pre>kuu 19日 21:28:04: ところでvim-jpのissue、こちらでcloseしちゃってOK?</pre>
<pre>mattn 19日 21:29:04: ドゾー</pre>
<pre>koron 20日 13:41:07: え、消したん?w</pre>
<pre>kyoh86 21日 20:16:00: 皆さんは現在のバッファで、ある正規表現に合うものだけ抽出する、ってどうやります？
今は `:v/re/d` でやってますが、 他には `:Capture g/re/p` くらいしか思いつかず…
これ、抽出対象が複数行に渡る場合は使えないんですよね…</pre>
<pre>ycino 21日 20:18:51: 抽出するっていうのは一覧を開いてジャンプがしたいとかです？</pre>
<pre>machakann 21日 20:20:45: あんまりやったことないですけど、ぱっと思いつくのは `:filter/re/%print #`</pre>
<pre>ycino 21日 20:21:00: そもそも `:v` やったことがなかった・・・</pre>
<pre>ycino 21日 20:22:05: プラグインからquickfixに抽出するのしかぱっと出ないしダメそう</pre>
<pre>machakann 21日 20:22:16: 複数行はむずかしそう</pre>
<pre>tsuyoshi_cho 21日 20:23:37: 一旦普通に検索して、 `:vim // %` とか</pre>
<pre>kuu 21日 20:25:12: こんなやり方取るとか？（これはソートだけど抽出にも使えそう） <https://qiita.com/kana1/items/68b21838013bfd65b097></pre>
<pre>ycino 21日 20:25:47: vim力高くてすごい・・・</pre>
<pre>tsuyoshi_cho 21日 20:35:13: 期待には添えてないけど....その後Qfreplaceでバッファ化でどうにかする、とかもある</pre>
<pre>kyoh86 21日 21:11:24: なるほど</pre>
<pre>kyoh86 21日 21:12:45: 抽出でジャンプとかは特にいらんので、フラットに抽出できれば良いんですよねぇ</pre>
<pre>kyoh86 21日 21:13:12: そういえば `:filter` もあったか</pre>
<pre>kyoh86 21日 21:14:06: Qiitaの記事やばいな…これを空で書ける人は多分人間じゃなくてvimなんじゃないか…</pre>
<pre>kyoh86 21日 21:15:24: `:vim // %` も新しい知見感がある</pre>
<pre>kyoh86 21日 21:16:01: :help :vim</pre>
<pre> 21日 21:16:02: ```
                                        *:vim* *:vimgrep* *E682* *E683*
:vim[grep][!] /{pattern}/[g][j] {file} ...
                        ファイル{file}から{pattern}を検索し、マッチ位置をエラー
                        リストに追加する。'wildignore' にマッチしたファイルは
                        無視される。'suffixes' にマッチしたファイルは最後に検
                        索される。
                        フラグ 'g' がない場合、各行は1度だけ追加される。
                        'g' がある場合、マッチ位置が毎回追加される。
 
                        {pattern}はVimの検索パターンである。/ で囲まない場合、
                        それが{pattern}中に現れない限り、どんな非ID文字
                        (|'isident'| を参照) でも使える。
                        'ignorecase' が適用される。パターン中に|/\c|を含めると
                        大文字小文字を区別しなくなり、|/\C|を含めると区別する
                        ようになる。これは 'ignorecase' より優先される。
                        'smartcase' は適用されない。
                        {pattern} が空のときは(つまり // が指定されたときは)、
                        最後に使われた検索パターンが使用される。|last-pattern|
:{count}vim[grep] ...
                        このコマンドの前に数字が置かれると、その数が検索する
                        マッチの最大数となる。":1vimgrep pattern file" とする
                        と最初のマッチだけを検索する。マッチが存在するかどうか
                        だけをチェックしたく、それが見つかったらすぐに終了して
                        ほしい場合に便利である。
 
                        フラグ 'j' がない場合、最初のマッチへジャンプする。
                        'j' がある場合はquickfixリストが更新されるだけである。
                        [!]がついた場合、カレントバッファに対する変更は全て失
                        われる。
 
                        進行状況を示すため、1秒程度ごとに検索されたファイル名
                        が表示される。
                        例:  
                                :vimgrep /an error/ *.c
                                :vimgrep /\&lt;FileName\&gt;/ *.h include/*
                                :vimgrep /myfunc/ **/*.c
                        "**" の使い方については|starstar-wildcard|を参照。
 
:vim[grep][!] {pattern} {file} ...
                        上と同様だが、パターンを非ID文字で囲むのでなく、空白で
                        パターンを区切る。パターンはID文字で始まらねばならな
                        い。
                        例:  
                                :vimgrep Error *.c
```</pre>
<pre>kyoh86 21日 21:16:23: はーーーーーーーーーーーー。なるほど
これはこれでほしかったやつだ</pre>
<pre>kuu 21日 21:16:31: やってることは分かる、思いつくかと言われると…</pre>
<pre>kyoh86 21日 21:16:42: 思いつかんですよねえ &gt;qiita</pre>
<pre>kyoh86 21日 21:17:16: 作者見て納得</pre>
<pre>tsuyoshi_cho 21日 21:24:56: kanaさんなのは前見て知ってたけど、ちょうどいいのがない.. &gt; さすkana</pre>
<pre>kyoh86 21日 22:18:21: こういうのソラじゃ到底出てこないんで</pre>
<pre>kyoh86 21日 22:18:26: マクロでこなしちゃいそうだなあ</pre>
<pre>tyru 22日 05:09:30: テキスト処理はエディタにやらせるのが一番だと思ってる（ただしデカいファイルを扱わなければ）</pre>
<pre>dohq 22日 07:00:25: でかいファイル、みんな何で処理してるか気になるマン
でかファイル専用エディタ的なアレなのかvimなのか</pre>
<pre>kuu 22日 07:02:49: Em…</pre>
<pre>kuu 22日 07:03:09: ある程度なら気にせずVimで開いてる</pre>
<pre>kuu 22日 07:18:08: Linux環境でGB単位のデータ扱う方法知りたい</pre>
<pre>Shougo 22日 07:58:14: GB単位のデータで何をするのですか？</pre>
<pre>Shougo 22日 07:58:29: バイナリを扱う用途でしか思いつかない</pre>
<pre>kuu 22日 07:59:21: 自分が扱いたいわけじゃなくて興味本位ですね、扱ったことある人はどうやってるのだろうと</pre>
<pre>johejo 22日 08:11:11: 構造を持ったデータだとDBに突っ込むのがいいと思います。</pre>
<pre>Shougo 22日 08:29:02: なるほど。</pre>
<pre>Shougo 22日 08:29:17: たしかに巨大ファイルの編集はロマン</pre>
<pre>toru 22日 11:27:38: 単純な処理ならgrep, cut, sed, awk, perlあたり組み合わせますね</pre>
<pre> 22日 11:37:31: Mac環境のneovimでヘルプを開くと、必ずviewファイルがないと怒られるのですが、原因として考えられるものはありますでしょうか。</pre>
<pre>takets 22日 11:42:57: `:view xxx.txt`  のように、リードオンリーで開くと必ず発生します。</pre>
<pre>heavenshell 22日 11:45:31: 該当のファイルはある感じでしょうか？</pre>
<pre> 22日 11:47:16: いえ、ヘルプファイルに関してのみ生成されていないようです</pre>
<pre>heavenshell 22日 11:49:14: プラグイン未読み込みでも発生するか、発生したら Neovim 発生しなければプラグインが怪しい…ですかね。</pre>
<pre>takets 22日 11:51:42: 最小構成で発生しなかったので、プラグインが原因のようです。</pre>
<pre>takets 22日 11:51:58: しかし、viewファイルに影響するってなんだろう……</pre>
<pre>takets 22日 11:56:15: ```" Save fold settings.
autocmd BufWritePost * if expand('%') != '' &amp;&amp; &amp;buftype !~ 'nofile' | mkview | endif
autocmd BufRead * if expand('%') != '' &amp;&amp; &amp;buftype !~ 'nofile' | silent loadview | endif
" Don't save options.
set viewoptions-=options```
失礼しました。特定しました。
折りたたみの設定を読み込むためのコードが衝突していたようです。</pre>
<pre>tsuyoshi_cho 22日 14:45:24: `質問です`
themisで THEMIS_ARGSを `-e -s --cmd "set luadll=/Users/runner/runners/2.165.2/work/vital.vim/vital.vim/.lua/lib/liblua.dylib"` みたいな値で実施したいのですが、なぜかエラーしてしまいます。
```ERROR: Target file not found.```
こうしないといけない、みたいな注意点が抜けてるのではないかと思うのですが...
(themisの処理開始コードを見る限り問題ないと思うのですが...)</pre>
<pre>tsuyoshi_cho 22日 14:45:42: ご存知の方がいたらお聞きしたいです</pre>
<pre>tsuyoshi_cho 22日 14:52:13: 手元でいろいろvimの引数を試してみましたが、直指定のせいかは不明ですが、そっちは問題なくて手詰り気味...</pre>
<pre>ichizok 22日 16:25:08: `"set` と `luadll=...` に分かれてしまっていますね</pre>
<pre>tsuyoshi_cho 22日 16:27:11: 環境変数内には空白やクォート込みではいってますが、それでもアカンですか...
そんな気はしてたんですが、やっぱり?</pre>
<pre>ichizok 22日 16:27:42: themis の方で `eval ${THEMIS_VIM} ...` にする必要があるみたいです</pre>
<pre>tsuyoshi_cho 22日 16:28:50: <https://github.com/tsuyoshicho/vital.vim/runs/524997858>
<https://github.com/tsuyoshicho/vital.vim/runs/524997858上のはログへのリンク|なるほど、>上のはログへのリンク</pre>
<pre>tsuyoshi_cho 22日 16:29:48: そこ直してみて動くか確認かなあ...</pre>
<pre>ichizok 22日 17:23:15: すみません `eval` だと `source ${STARTUP_SCRIPT}"` が分かれてしまうのでダメですね</pre>
<pre>tsuyoshi_cho 22日 17:52:38: あー、それもありますねえ...</pre>
<pre>thinca 22日 17:52:48: .themisrc ではダメですか?</pre>
<pre>tsuyoshi_cho 22日 17:53:16: workflow側の設定なので、あまり.themisrc側に混ぜたくなくて</pre>
<pre>thinca 22日 17:54:04: 混ぜなくても workflow の最中だけファイル設置するのは?</pre>
<pre>tsuyoshi_cho 22日 17:54:33: そうですね、すでにあるファイルとは位置を変えれば読んではくれますよね
それはよさげ</pre>
<pre>tsuyoshi_cho 22日 17:55:07: ただ、このこととは別で、THEMIS_ARGSで空白が含まれてても動くこと(エスケープすべきかもしれませんが)は必要な気はしますが...</pre>
<pre>thinca 22日 17:55:15: `~/.themisrc` とかに置いとけばいいはず (GHA の work は HOME の中だったと思う)</pre>
<pre>tsuyoshi_cho 22日 17:56:19: いえ、作業ターゲットは `${GITHUB_WORKSPACE}` だかをメインにしてて、`~` 以下だとちょっと都合がよくなかったような</pre>
<pre>thinca 22日 17:56:52: まあ対象ファイルの上層のどこかにあれば大丈夫</pre>
<pre>tsuyoshi_cho 22日 17:57:24: :hai-small:</pre>
<pre>thinca 22日 17:57:50: THEMIS_ARGS はなにかの時にどうしても必要だってので足したやつであんまり変更することを想定していないです</pre>
<pre>tsuyoshi_cho 22日 17:59:26: ...なるほど、個人的には手動でテスト動かすときにいろいろ試すに使うという想定で、わりと主要な機能な気がしてました。</pre>
<pre>tsuyoshi_cho 22日 18:07:10: 上手く行きました、ありがとうございます。</pre>
<pre>[Vim]の新着質問一覧｜teratail（テラテイル） 22日 20:11:21: <https://teratail.com/questions/248713?rss=all|【Vim】netrw(標準ファイラー)でファイルをデフォルトのソフトで開きたい>
問題
Vim標準のファイラー「netrw」でファイルを開くときに、vimでなくデフォルトのソフトで開く方法がわかりません（gvimrcにどう設定すればいいかわかりませ）。
解決方法をご教示ください。  
環境
Windows10
Vim + netrw

<https://teratail.com/questions/248713?rss=all|続きを見る></pre>
<pre>ゴリラ 22日 20:42:09: 回答Done</pre>
<pre>kuu 22日 20:44:54: netrwに詳しいマン強い</pre>
<pre>kuu 22日 20:45:13: 実装気になって見に行ったらrundll呼んでてプロの仕事やってなった</pre>
<pre>ゴリラ 22日 20:46:43: たまたま `x` を押したらなんかアプリ動いたのがきっかけで知っていた</pre>
<pre>[Vim]の新着質問一覧｜teratail（テラテイル） 22日 21:11:24: <https://teratail.com/questions/248722?rss=all|【Vim】netrw(ファイラー)でフォルダをデフォルトのソフトで開きたい>
問題
Vim標準のファイラー「netrw」でファイルを開くときに、xキーでデフォルトのソフトで開けることがわかりました。
しかし、フォルダを指定したソフト（VScode）で開く方法がわかりません。
解決方法をご教示ください。  
環境
Windows10
Vim + netrw

<https://teratail.com/questions/248722?rss=all|続きを見る></pre>
<pre>thinca 22日 22:47:24: おかわりきたで</pre>
<pre>ゴリラ 22日 22:49:02: 回答だけしておいた
なんか、他のツリープラグインを使ったほうが良いかも説（デフォ以外はよく知らない</pre>
<pre>heavenshell 22日 22:54:45: Vim でしかも netrw を開いて他のエディターを開きたいってどういう場合なんだろうかw</pre>
<pre>ゴリラ 22日 22:55:04: たしかに</pre>
<pre>heavenshell 22日 22:55:58: OpenVsCode という Vim plugin が待たれる( <https://marketplace.visualstudio.com/items?itemName=mattn.OpenVim>)</pre>
<pre>ゴリラ 22日 23:05:51: 3,483 installs
結構ダウンロードされている</pre>
<pre>0Δ 23日 16:36:37: 質問です。
現在編集中の(アクティブな)ウィンドウもしくはバッファ番号orIDはどうやって取得するのでしょうか。
用途としては、ステータスラインに表示させる用です。</pre>
<pre>0Δ 23日 16:40:11: `win_getid()` `bufnr()` `winnr()` を試しましたが、各ウィンドウ/バッファの番号orIDが取得されて、一意な値になりませんでした(アクティブなモノを指さなかった)。</pre>
<pre>tsuyoshi_cho 23日 16:40:45: :h gettabwinvar</pre>
<pre> 23日 16:40:45: ```
gettabwinvar({tabnr}, {winnr}, {varname} [, {def}])             *gettabwinvar()*
                タブページ{tabnr}内のウィンドウ{winnr}のウィンドウローカル変数
                {varname}の値を取得する。
                {varname}が空のときは全ウィンドウローカル変数からなる辞書を返
                す。
                {varname}が "&amp;" と等しい場合はすべてのウィンドウローカルオプ
                ションの値を辞書に入れて返す。
                {varname}が文字 "&amp;" で始まるときはウィンドウローカルオプション
                の値を取得する。
                Note {varname}は "w:" をつけずに指定しなければならない。
                タブページ番号は1から始まる。カレントタブページを指定するには
                |getwinvar()|を指定する。
                {winnr} にはウィンドウ番号または|window-ID|が使える。
                {winnr}が0のときはカレントウィンドウとなる。
                グローバルオプション、バッファローカルオプション、ウィンドウ
                ローカルオプションに対しても動作するが、グローバル変数やバッ
                ファローカル変数に対しては動作しない。
                ウィンドウやタブや変数が存在しないときは{def}または空文字列を
                返し、エラーメッセージは表示されない。
                例:  
                        :let list_is_on = gettabwinvar(1, 2, '&amp;list')
                        :echo "myvar = " . gettabwinvar(3, 1, 'myvar')
 
                すべてのウィンドウローカル変数を取得するには:  
                        gettabwinvar({tabnr}, {winnr}, '&amp;')
 
                |method| としても使用できる:  
                        GetTabnr()-&gt;gettabwinvar(winnr, varname)
```</pre>
<pre>tsuyoshi_cho 23日 16:40:53: で winnrを0?</pre>
<pre>tsuyoshi_cho 23日 16:41:50: 現在タブはどうにか取れたような?</pre>
<pre>0Δ 23日 16:43:01: 欲しいのはタブじゃなくてウィンドウなんですよね……</pre>
<pre>tsuyoshi_cho 23日 16:43:29: カレントタブのwin=0=カレントウィンドウらしいので、それでは無理かな?</pre>
<pre>tsuyoshi_cho 23日 16:43:57: 良い方法がわからない...</pre>
<pre>takets 23日 16:44:10: ウインドウ情報取得できるメソッドが見つからない……あるはずなんだけど</pre>
<pre>tsuyoshi_cho 23日 16:44:15: ここらへん取得方法の整理が必要な気がする..</pre>
<pre>tsuyoshi_cho 23日 16:45:32: :help winnr</pre>
<pre> 23日 16:45:33: ```
                                                        *winnr()*
winnr([{arg}])  結果は現在のウィンドウを示す数値。最上位のウィンドウは1であ
                る。ポップアップウィンドウは0を返す。
 
                省略可能な引数{arg}は以下の値をサポートする:
                        $       最後のウィンドウの番号(ウィンドウ数)
                        #       最後にアクセスしたウィンドウの番号(|CTRL-W_p|
                                の行き先)。前のウィンドウがないか、別のタブペー
                                ジにある場合は、0が返される。
                        {N}j    現在のウィンドウの下N番目のウィンドウの番号
                                (|CTRL-W_j| の行き先)。
                        {N}k    現在のウィンドウの上N番目のウィンドウの番号
                                (|CTRL-W_k| の行き先)。
                        {N}h    現在のウィンドウの左N番目のウィンドウの番号
                                (|CTRL-W_h| の行き先)。
                        {N}l    現在のウィンドウの右N番目のウィンドウの番号
                                (|CTRL-W_l| の行き先)。
                この番号は|CTRL-W_w|と ":wincmd w" で使える。|:wincmd|
                |tabpagewinnr()|と|win_getid()|も参照。
                例:  
                        let window_count = winnr('$')
                        let prev_window = winnr('#')
                        let wnum = winnr('3k')
 
                |method| としても使用できる:  
                        GetWinval()-&gt;winnr()
```</pre>
<pre>tsuyoshi_cho 23日 16:45:52: ...ちがうか?</pre>
<pre>0Δ 23日 16:51:15: 試してましたが、ダメでしたねそれ。</pre>
<pre>koron 23日 16:51:20: &gt; 	The *g:statusline_winid* variable will be set to the |window-ID| of the	window that the status line belongs to.
</pre>
<pre>koron 23日 16:52:05: `set statusline=%!statusline_winid` でそれっぽいものでてるけど?</pre>
<pre> 23日 16:52:30: </pre>
<pre>tsuyoshi_cho 23日 16:52:38: むう</pre>
<pre>koron 23日 16:54:37: <https://vim-jp.org/vimdoc-ja/options.html#g:statusline_winid>

&gt;  g:statusline_winid 変数はステータス行が属するウィンドウの window-IDに設定される。</pre>
<pre>0Δ 23日 16:55:04: いや、これじゃないです</pre>
<pre>0Δ 23日 16:56:25: KoRoNさんの画像で言うと、 *全ての* ステータスラインで `1008` が返る関数が欲しいのです。</pre>
<pre>koron 23日 16:59:29: すべてのかー</pre>
<pre>tsuyoshi_cho 23日 16:59:59: activeなのを抽出する手段が必要、ということですね...</pre>
<pre>koron 23日 17:00:57: `set statusline=%!winnr()` でウィンドウ番号は取れてるね。ただし</pre>
<pre>0Δ 23日 17:01:00: です、非アクティブなステータスラインを目立たないようにしたくて。
わかりづらくて申し分ない :bow:</pre>
<pre>koron 23日 17:01:44: 更新(redraw)しないとカレントよりもあとのwindowのstatuslineが更新されない。</pre>
<pre>koron 23日 17:02:41: hl-StatusLineNCの colorscheme を設定するんじゃダメなの?</pre>
<pre>koron 23日 17:05:19: &gt; 	real current buffer and "g:actual_curwin" to the |window-ID| of the
&gt; 	real current window.  These values are strings.
</pre>
<pre>koron 23日 17:05:23: こんなこともかいてあるな</pre>
<pre>koron 23日 17:07:40: `:set stl=g{g:actual_curwin}` ででるけど、やっぱ更新のないwindowのstatuslineには影響が出ないかも。</pre>
<pre>tsuyoshi_cho 23日 17:11:09: redrawstatusを定期実行する?(自分は時計用にしてる)</pre>
<pre>koron 23日 17:12:01: ですかね。あとは hl-StatusLineNC を絡めて実現すれば、ミニマムな更新にはなりそう。</pre>
<pre>koron 23日 17:12:30: current以外が目立たないhighlightはよくありますよね?</pre>
<pre>0Δ 23日 17:16:49: `g:actual_curwin` これだー！ ありがとうございます :pray:</pre>
<pre>koron 23日 17:18:30: 'statusline' の中にかいてありましたよ～</pre>
<pre>kuu 23日 17:32:05: これなんでv:じゃなくてg:なんだろう、すごく微妙</pre>
<pre>kuu 23日 17:32:23: actual_curwinなんてグローバル変数使わないけどさ…</pre>
<pre>rbtnn 23日 17:36:16: 隠しグローバル変数結構ある気がする。 `g:vim_indent_cont` も知る人ぞ知る変数だし</pre>
<pre>kuu 23日 17:36:53: あれはプラグインなのでまだ許容範囲</pre>
<pre>kuu 23日 17:37:13: 書き換えられもしないし</pre>
<pre>koron 23日 17:37:56: たぶん作られた時期なんじゃないの? まだ `v:` なかったとかさ</pre>
<pre>thinca 23日 17:39:45: `g:vim_indent_cont` はプラグインが参照するだけで普通のグローバル変数ですね。一方 `g:actual_curwin` は特殊な条件下で暗黙的に発生する謎の多い変数…</pre>
<pre>thinca 23日 17:40:36: `b:changedtick` と言う特殊な変数もある。バッファの内容が何かしら変わる度に(undo であっても)カウントアップしていく。結構便利</pre>
<pre> 23日 18:16:26: やっとやりたい事ができた……！
ステータスラインのモード表示に `DEACTIVE` が追加されました。
(以前はコレが全部一斉にINSERTとかになって気持ち悪かった)</pre>
<pre>tsuyoshi_cho 23日 18:19:13: 自分のを良く見たら、lightlineが切り替えてたので、どういう制御しているかソース見にいけばよかったかな...</pre>
<pre>tsuyoshi_cho 23日 18:22:56: ただ、非アクティブは別の設定にしてるから、ちょっと意図とあわないけど</pre>
<pre>バクダンくん 23日 20:42:31: INACTIVEでは？</pre>
<pre>バクダンくん 23日 21:25:25: 非アクティブといえばこれおすすめます
<https://qiita.com/Bakudankun/items/649aa6d8b9eccc1712b5>
Neovimの人は最後の１行だけ読めば良いです</pre>
<pre>tsuyoshi_cho 23日 21:30:29: vim-diminactiveから切り替えようかな...</pre>
<pre>0Δ 23日 22:25:54: typo警察だ！ありがとうございます :panda_dogeza:
ガンダムSEEDに引っ張られてこの表現しか頭になかった……</pre>
<pre>thinca 23日 22:30:03: 使われ方は特殊ですけど、中身は普通の変数ですねー</pre>
<pre>tyru 23日 23:24:20: <@U03C71D7H> themis で非同期のテストをするにはどうすればいいですか？
具体的にはプラグインが `synstack()` して `synIDattr(id, 'name') == 'Comment'` かどうかを見てるんですが、
テストから実行するとまだ syntax がついてないらしく空を返したりします。
`:redraw!` しても非同期に実行されるっぽいので諦めて非同期でテストできないか調べてる所です。</pre>
<pre>thinca 23日 23:30:50: 本当に非同期の問題ですかね? ちょっと気になります</pre>
<pre>tyru 23日 23:39:02: すみません、違いました！
こう書いたらちゃんと帰ってきた…
```e {vimrc のパス}
setf vim
echo synstack(1, 1)```</pre>
<pre>tyru 23日 23:40:18: うーん themis の vim がバッチモードで走ってることに原因がある？（これ前も言ったな…）</pre>
<pre>thinca 23日 23:41:07: それを実行したのは? 普通に起動した Vim ですか?</pre>
<pre>tyru 23日 23:44:34: `vim --clean -N -S {↑のスクリプト}` でした</pre>
<pre>tyru 23日 23:46:05: あ、 `vim --clean -N --cmd 'source {↑の(ry}` だとダメっぽい</pre>
<pre>thinca 23日 23:46:22: themis.vim は起動時になるべく余計な処理をしないので、 `filetype on` も `syntax enable` も必要なら自前で .themisrc に書かないとダメですよ。ちゃんと書いてますか?</pre>
<pre>thinca 23日 23:46:52: --clean は defaults.vim を読むので最小限のテストをしたい場合には適していません</pre>
<pre>tyru 23日 23:49:12: あーそうだ…すみません before_each には書いたんですが .themisrc は試してなかった…</pre>
<pre>tyru 23日 23:49:29: かなり色々雑に聞いてしまった</pre>
<pre>thinca 23日 23:50:06: before each に書いてるなら行けそうな気もする</pre>
<pre> 23日 23:52:43: 最小限スクリプトに書いたらちゃんと出る</pre>
<pre>thinca 23日 23:54:18: バッチモード実行でも問題ないなら themis の問題ではなさそう?</pre>
<pre>tyru 23日 23:56:05: あー完全に ftplugin の読み込みがミスってたみたいです…（ftplugin 読み込み部分を独自に書いてたけど `setf c` にしたらちゃんと返ってきた）</pre>
<pre>tyru 23日 23:56:08: お騒がせしました…</pre>
<pre>thinca 23日 23:57:45: ちなみに本当に非同期のテストがしたい場合、今の所ちゃんとしたサポートがなく、 :sleep を噛ませて裏の処理をちょっと動かす、みたいなことをしないといけない…</pre>
<pre>tyru 23日 23:59:14: :sleep って timer とか feedkeys() とか↑とかって動くんでしたっけ？</pre>
<pre>thinca 24日 00:01:15: ↑はそもそも非同期関係ないのだよね</pre>
<pre>thinca 24日 00:01:36: timer は動きます。feedkeys() は…どうだろ。動かない気もする</pre>
<pre>tyru 24日 00:07:57: syntax が redrawtime とかあるから非同期で動くのかな…と思って非同期のやり方を聞いた感じです</pre>
<pre>tyru 24日 00:08:11: なるほど、sleep で timer 動くのか</pre>
<pre>tyru 24日 00:10:19: いまだに syntax の仕組みがよくわかってない（本当に syntax highlight が同期的に動くのか未だに確証がない）</pre>
<pre>thinca 24日 00:10:59: 非同期だったら固まったりしないんだな</pre>
<pre>tyru 24日 00:16:27: あーすみません…言葉の使い方を間違っていた</pre>
<pre>tyru 24日 00:19:02: なんて言ったらいいんかな… 結局 syntax を themis でテストする際に非同期が必要にならないのか確証が持ててない感じです</pre>
<pre>tyru 24日 00:19:51: それここで言ってもまだ未サポートなんだから言ってもしゃあないですね</pre>
<pre>kuu 24日 00:20:18: Vimの処理って本質的には全部同期的な気がする</pre>
<pre>kuu 24日 00:20:41: nodeと同じようなもん</pre>
<pre>kuu 24日 00:20:53: (Workerあるから今は事情違うか)</pre>
<pre>tyru 24日 00:21:00: なので node の nextTick 的なことをする必要があって、その方法が今はない</pre>
<pre>tyru 24日 00:21:46: ちょっと色々まとまってないのでもうちょっとまとめてからまた質問しよう…</pre>
<pre>kuu 24日 00:22:04: 期待通りの物かは不明ですが、SafeStateAgainというautocmdのイベントがありますね</pre>
<pre>tyru 24日 00:25:32: &gt; なので node の nextTick 的なことをする必要があって、その方法が今はない
ありがとうございます… vim にというより themis に今はないという意味でした。
無いという回答を得たので、違う方法でテストするか、本当にそういう仕組みが必要なのか（デバッグの過程で何か勘違いしてないか…）要チェックすべきだったという意味でした。</pre>
<pre>kuu 24日 00:26:02: (話の流れ全く読めてなかった)</pre>
<pre>thinca 24日 00:26:04: 強いて言うなら :sleep が nextTick です。厳密ではないけど</pre>
<pre>tyru 24日 00:26:43: 限定的ではあるけど、timer とかはそれでポーリングできる、みたいな意味ですよね（それは知らんかった）</pre>
<pre>tyru 24日 00:28:52: そもそも `:setf c` で動くけど `:runtime! after/ftplugin/c/caw.vim` する関数を変わりに呼び出すと synstack() が空を返すという状態でよくわからん…という状態です。
前者で動くなら非同期が必要ない可能性は大きくて、
自分がやろうとしてたのは後者にぶち当たったことで無理やりポーリングさせて動作確認しようと思ってたんだけど、場当たり的すぎた感は否めない…</pre>
<pre>tyru 24日 00:29:42: 頭もあまり働いてない…</pre>
<pre>thinca 24日 00:31:44: ftplugin でなんで syntax の話になるのか全然わかっていません</pre>
<pre>kuu 24日 00:31:49: synstackの中身、条件合わなければ強制的にハイライトの計算をやってるので、疑うなら別の場所な気がしなくも</pre>
<pre>tyru 24日 00:33:37: あ、何いってんだ？</pre>
<pre>tyru 24日 00:33:42: &gt; 俺</pre>
<pre>tyru 24日 00:34:00: runtime! で動くわけないやん…</pre>
<pre>kuu 24日 00:34:25: :h :runtime</pre>
<pre> 24日 00:34:25: ```
                                                        *:ru* *:runtime*
:ru[ntime][!] [where] {file} ..
                        'runtimepath' か 'packpath' で示された各ディレクトリの
                        {file}からExコマンドを読み込む。ファイルがなくてもエラ
                        ーにはならない。
 
                        例:  
                                :runtime syntax/c.vim
 
                        {file}には空白で区切って複数のファイルを指定できる。指
                        定された{file}は 'runtimepath' の最初のディレクトリ、
                        次に二番目のディレクトリ、と検索される。{file}に空白を
                        含めるにはバックスラッシュを使う(しかしファイル名に空
                        白を含めるのは望ましくない。トラブルのもとである)。
 
                        [!] を付けると見つかった全てのファイルを読み込む。付け
                        なければ最初に見つかったファイルだけを読み込む。
 
                        [where] が省略された場合は 'runtimepath' が使われる。
                        他の値は以下の通り:
                                START   'packpath' の "start" ディレクトリ以下
                                        を検索する
                                OPT     'packpath' の "opt" ディレクトリ以下を
                                        検索する
                                PACK    'packpath' の "start" と "opt" ディレ
                                        クトリ以下を検索する
                                ALL     まず 'runtimepath' が使われ、次に
                                        'packpath' の "start" と "opt" ディレ
                                        クトリ以下を検索する
 
                        {file}がワイルドカードを含んでいるとそれは展開される。
                        例:  
                                :runtime! plugin/**/*.vim
                        これはVimが起動時にプラグインファイルを読み込むのに使っ
                        ているものである。次のは似ているが:  
                                :runtime plugin/**/*.vim
                        これは最初に見つかったファイルだけを読み込む。
 
                        'verbose' が1以上ならファイルが見つからないときにメッ
                        セージが表示される。
                        'verbose' が2以上なら見つかった全てのファイルについて
                        メッセージが表示される。
```</pre>
<pre>tyru 24日 00:34:54: syntax 設定せずに runtime! してました。そりゃ `Comment` とかのグループも定義される訳ない……</pre>
<pre>thinca 24日 00:35:27: 原因をめっちゃ深堀りしまくった結果超初歩的な凡ミスだったやつあるある</pre>
<pre>kuu 24日 00:36:00: 数時間くらいかけて調べてたけど、諦めて他の事やってたら数分で解決するとかよくある</pre>
<pre>tyru 24日 00:36:10: マジですいませんでした………</pre>
<pre>tyru 24日 00:36:38: 愕然としている</pre>
<pre>[Vim]の新着質問一覧｜teratail（テラテイル） 24日 01:51:35: <https://teratail.com/questions/248963?rss=all|MacでVimの置き換えが出来ません>
前提・実現したいこと
macのvimを新しいものに置き換えてクリップボードを有効にしたい  
発生している問題・エラーメッセージ
mv: rename /usr/bin/vim to /usr/bin/old_vim: Read-only file system  
該当のソースコード
sudo mv /usr/bin/vim /usr/bin/old_vim  
試したこと
リカバリーモードから以下SIPを無効にしましたが、変わらず上記エラーです。  
補足情報（FW/ツールのバージョンなど）
macOS Catalina バージョン10.15.3
brew installしたvim 8.2....

<https://teratail.com/questions/248963?rss=all|続きを見る></pre>
<pre>[Vim]の新着質問一覧｜teratail（テラテイル） 24日 12:31:31: <https://teratail.com/questions/249011?rss=all|vscode でファイルを編集すると背景が赤くなってしまいます。>
vscodeでテキストファイルを編集していたところ、突然編集をした箇所の背景が赤くなる現象が起こりました。（なにかの仕様だと思います）  
BackSpaceやDeleteで消えませんが、ファイルを保存し終了、もう一度立ち上げ直すと解除されます。  
選択範囲などが非常に見づらくなるため、作業ができずに困っています。  
同じような現象になった方がおりましたら、解決策をご教授いただれると嬉しいです。

<https://teratail.com/questions/249011?rss=all|続きを見る></pre>
<pre>[Vim]の新着質問一覧｜teratail（テラテイル） 24日 12:31:32: <https://teratail.com/questions/249013?rss=all|dein.vimでcolorscheme設定が反映されない>
前提・実現したいこと
neovimのセットアップをあれやこれやと設定していたらcolorschemeの設定が反映されなくなっていました。
tmuxの設定と競合しているのかvimのプラグインのせいなのか頭ごっちゃです・・・  
iterm2で動作させています。  
該当のソースコード
init.vim  
" reset augroup
augroup MyAutoCmd
autocmd!
augroup END

" dein script
if &amp;compatible
  set nocompatible
endif
set runtimepath+=/Users/{username}/.cache/dein/repos/github.com/Shougo/dein.vim
let s:dein_dir = expand('~/.config/nvim/dein')
...

<https://teratail.com/questions/249013?rss=all|続きを見る></pre>
<pre>kuu 24日 12:38:47: その設定だとnordになりそうな気がするけど、脳内実行下手なのでよくわからん</pre>
<pre>tsuyoshi_cho 24日 12:43:52: これ、どれも動かないからのきなみコメントアウトした、なんだと思います。
で、そのあたりについてコメントした</pre>
<pre>[Vim]の新着質問一覧｜teratail（テラテイル） 24日 15:11:25: <https://teratail.com/questions/249056?rss=all|vim-lspの診断スピードを早くしたい>
vim-lspを入れてみました。おおむね快適に動作しています。  
diagnosticsについて、aleやcoc.nvimに比べて診断が走るまで（終わるまで？）に時間がかかるのが気になります。1文字書くたびに診断が走ってほぼリアルタイムで見た目に反映されるくらいが理想なのですが、なにか設定をいじることで診断の周期？を早めることは可能でしょうか。また、このスピードはvimのどの設定に依存して決まっているのでしょうか。  
vim-lspのオプションのヘルプを引いてみましたがそのようなオプションが見当たらなかったので質問させていただきまし...

<https://teratail.com/questions/249056?rss=all|続きを見る></pre>
<pre>thinca 24日 15:11:35: おっ</pre>
<pre>thinca 24日 15:12:08: 独特のフォント</pre>
<pre>thinca 24日 15:12:38: サーバの情報がない…</pre>
<pre>yutakatay 24日 15:12:47: このフォントなんだろう、面白い</pre>
<pre>kuu 24日 15:16:28: この人のdotfiles漁ればいいのではと思ってみたらgvim使いではなかった</pre>
<pre>yutakatay 24日 15:18:57: どうにかしてフォント名を聞き出したい・・・

`たぶんフォントが悪くて遅いんだと思います。これなんのフォントですか？？`  とかかな</pre>
<pre>mattn 24日 15:19:23: <https://github.com/dadchyyy/dotfiles></pre>
<pre>kuu 24日 15:19:35: 誘導尋問やんけw</pre>
<pre>kuu 24日 15:19:40: 悪い大人</pre>
<pre>yutakatay 24日 15:20:28: :cry:
<https://github.com/dadchyyy/dotfiles/search?q=font&amp;unscoped_q=font></pre>
<pre>tsuyoshi_cho 24日 15:21:18: 素朴な疑問で入れておいたw</pre>
<pre>yutakatay 24日 15:22:04: 拾ってくれるかな・・・</pre>
<pre>yutakatay 24日 15:22:26: ありがとうございます。解決しました！（高評価）エンドは嫌だ</pre>
<pre>mattn 24日 15:23:36: 「自己解決しました！」</pre>
<pre>kuu 24日 15:23:50: あるある</pre>
<pre>mattn 24日 15:23:53: だれも幸せにならないやつ。</pre>
<pre>tsuyoshi_cho 24日 15:23:59: あれはpopupなのでdiagnoticsについては速度は、もうどうしようもない気が...</pre>
<pre>kuu 24日 15:24:15: 解決方法がないのでノイズになるやつ</pre>
<pre>heavenshell 24日 15:24:24: 最高スペックのマシンを買うが解決方法</pre>
<pre>tsuyoshi_cho 24日 15:24:26: 否定はしませぬ...</pre>
<pre>mattn 24日 15:31:47: ！</pre>
<pre>kuu 24日 15:32:46: 観測されている</pre>
<pre>tsuyoshi_cho 24日 15:34:53: えへ、見られたw</pre>
<pre>mattn 24日 15:36:27: <@U010MDSRJU8> さんは↑の質問の方？それともアイコンが同じだけ？</pre>
<pre>dadchyyy 24日 15:37:05: あ、私質問した人です！</pre>
<pre>mattn 24日 15:37:22: なるほど、ではまずフォント名を教えて下さい (違う)</pre>
<pre>heavenshell 24日 15:37:45: ww</pre>
<pre>dadchyyy 24日 15:37:54: フォントmonofurというやつなんですが、これのせい......？</pre>
<pre>mattn 24日 15:38:07: まったく関係ないですw</pre>
<pre>heavenshell 24日 15:38:14: 多分関係ないかとw</pre>
<pre>kuu 24日 15:38:24: 単なる知的好奇心です、質問してるのにすみません</pre>
<pre>mattn 24日 15:38:30: <https://vim-jp.slack.com/archives/CJMV3MSLR/p1585030736127700></pre>
<pre>yutakatay 24日 15:39:20: :bow:</pre>
<pre>yutakatay 24日 15:40:18: <@U010MDSRJU8> 立て続けに質問して悪いんですけど、どういう経路でここ知ったんですかね？？</pre>
<pre>dadchyyy 24日 15:41:55: <@U7B4ZD49X> 前からvim-jpのサイトは見てたのでslackあったのは知ってたんですがなぜか入ってなかったのでこの機会にと思って！</pre>
<pre>yutakatay 24日 15:42:53: なるほど、ありがとうございます。解決しました :best-answer:</pre>
<pre>heavenshell 24日 15:43:21: 肝心の速度を上げるのは難しそう</pre>
<pre>tsuyoshi_cho 24日 15:44:29: <#CQ57P4XU4|lsp> でも話題になってますが、現状vim-lspの作りもあって、速度に寄与する追加の設定はできなさそう...というところ</pre>
<pre>heavenshell 24日 15:45:12: どうやっても JSONRPC へのリクエスト走りますしねぇ…。</pre>
<pre>dadchyyy 24日 15:45:46: なるほど......だとPCのスペック上げるしかない感じですかね?</pre>
<pre>heavenshell 24日 15:46:44: vim-lsp の方のチューニングですかね。 メンテナーのお二人にご相談事案…。</pre>
<pre>mattn 24日 15:47:05: 現状解決方法はないですが、vim-lsp のコミッタがここに2人いるので仕様さえ決められれば数日内に直る可能性あります。</pre>
<pre>mattn 24日 17:10:05: <@U010MDSRJU8> 動作を動画を撮る事って可能ですか？</pre>
<pre> 24日 17:10:32: こういうの。</pre>
<pre>dadchyyy 24日 17:23:47: <@U03C6TEAZ>外出ちゃったので明日になっちゃいますが撮りますね！</pre>
<pre>mattn 24日 17:24:03: ありがとうございます。いつでもいいです。</pre>
<pre>tsuyoshi_cho 26日 16:31:41: `質問です`
vim-lsp関係ですが... clangd での diagnotics ですが、Cヘッダ内で他ヘッダ定義だけどincludeしてない (想定はCソース上で規約を守ってインクルードみたいなやつ)のとき、unknown typeが出てしまうと思うのですが、どのように回避していますか?</pre>
<pre>yutakatay 26日 16:34:29: イマイチつかみきれてないですが、compile_commands.jsonにはそのヘッダを追加するとかですか？？</pre>
<pre>tsuyoshi_cho 26日 16:36:05: あー、それでも対応可能とは思いますが、手動で変更を都度やるのはちょっと...なので、設定かcompile_commands.json生成ツールのオプションでの作り方とか、なにかしら定型的に補正できないかなあと</pre>
<pre>yutakatay 26日 16:37:15: CMake使ってるんだとするとCMAKE_EXPORT_COMPILE_COMMANDSをonにすれば自動でエクスポートされるんでそれをちょいちょいっていじる感じになるかと思います。そして.vim/compile_commands.jsonにいれ・・・やばいthincaさんに怒られるw</pre>
<pre>tsuyoshi_cho 26日 16:46:43: いえ、bearで手動生成...</pre>
<pre>tsuyoshi_cho 26日 16:48:17: bearのincludeで指定したら全部に効かないかな...確認しよう</pre>
<pre>tsuyoshi_cho 26日 16:58:09: だめっぽい..</pre>
<pre>presuku 26日 17:04:44: clangd に `--background-index` つけてたらどうなりますか？詳細は↓
<https://vim-jp.slack.com/archives/C83UXKU86/p1585191572030200></pre>
<pre>presuku 26日 17:06:15: そうすると`.clangd` にキャッシュできるのですが include しているヘッダファイルのキャッシュができて、うまくいってる気がする</pre>
<pre>tsuyoshi_cho 26日 17:06:45: 付けたいのですが、vim-lsp-settingsのパス解決とうまくあわなくて、一旦中断してました。
再調整してみます。
ありがとうございます。</pre>
<pre>tsuyoshi_cho 26日 17:13:45: う、vim-lsp-settingsが入れるサーバより、システムが持ってるやつを優先する(というか入れたサーバの優先度が最下位だ...)</pre>
<pre>presuku 26日 17:15:33: ちょっと試ただけですが `foo.h` と `bar.h` を `baz.c`  で順番に include して `foo.h` にしかない typedef したタイプを `bar.h`  で使用しても unknown type にならなかったです。
ちなみに clangd-9 でシステムにインストールしたやつを使ってます。</pre>
<pre>presuku 26日 17:16:38: あ、それから bear で compile_commands.json を作成しています</pre>
<pre>presuku 26日 18:06:14: すいません、やはりダメだったみたいです。なぜなのかわからないですが、直接`vim bar.h` すると diagnostics すぐ出る。`vim baz.c` 後、`:e bar.h` だと開いた直後は diagnostics 出ないのですが`bar.h`ファイルで`LspDeclaration` とか`LspDefinition` すると出ちゃいますね…</pre>
<pre>tsuyoshi_cho 26日 18:07:16: 似た感じになりました...
やっぱ依存関係が解決できないと決定打にならないのかな</pre>
<pre>presuku 26日 18:09:14: かもですねー。上の例で言う bar.h 単体だと unknow type なのは正しいので…</pre>
<pre>vim タグが付けられた最新の質問 - スタック・オーバーフロー 27日 09:40:25: <https://ja.stackoverflow.com/questions/64141/vim-%E3%81%AE-%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%83%90%E3%83%BC%E3%81%AB-%E5%85%A5%E5%8A%9B%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%81%AF%E3%81%A7%E3%81%8D%E3%81%BE%E3%81%99%E3%81%8B|vim の ステータスバーに 入力ソースを表示することはできますか？>
Mac の <http://Terminal.app|Terminal.app> を利用しています。

vim の ステータスバーに「英語」「日本語」の入力ソースを表示したい。
なぜならば、 <http://Terminal.app|Terminal.app> をフルスクリーンで表示しているため、現在の入力ソースがわからないからである。

回答をお待ちしています。

I use <http://Terminal.app|Terminal.app> on Mac.

I want to display "English" and "Japanese" input sources in the status bar of vim.
That's because <http://Terminal.app|Terminal.app> is displayed full screen, so you don't know the current input source.

We look forward to your response.</pre>
<pre>ゴリラ 27日 10:25:31: Vimのデフォルトプラグイン一覧ってヘルプのどっかに載っていますか？
どれを無効化しようか見てみようかなと思っています</pre>
<pre>machakann 27日 10:55:07: global plugin だけでよければ `:help standard-plugin-list` です</pre>
<pre>ゴリラ 27日 10:55:31: お、ありがとうございます</pre>
<pre>ゴリラ 27日 10:56:00: ```標準プラグイン ~
|pi_getscript.txt| Vim script の最新版をダウンロードする
|pi_gzip.txt|      圧縮ファイルの読み書き
|pi_logipat.txt|   パターンにおける論理演算子
|pi_netrw.txt|     ネットワークファイルの読み書き
|pi_paren.txt|     対括弧の強調表示
|pi_spec.txt|      RPM spec ファイル用ファイルタイププラグイン
|pi_tar.txt|       Tar ファイルエクスプローラー
|pi_vimball.txt|   Vim script インストーラを作成する
|pi_zip.txt|       Zip アーカイブエクスプローラー```
こんなのがあるんだ</pre>
<pre>luma 27日 13:26:35: すみません，だいぶ前にみなさんが紹介していたgifで録画するソフト，メモし損ねてしまったのですが書いていただけませんか...!</pre>
<pre>kuu 27日 13:27:29: OSなんでしたっけ</pre>
<pre>luma 27日 13:27:38: winです...!</pre>
<pre>0Δ 27日 13:27:58: ScreenToGif</pre>
<pre>tsuyoshi_cho 27日 13:28:14: 他にもいろいろあったけど...</pre>
<pre>luma 27日 13:29:13: んー議論になったときに記事とかにしとくべきだったな...w (これ貼れば解決みたいなブログあるといいかもしれない...)</pre>
<pre>tsuyoshi_cho 27日 13:30:09: twiterのtogetterみたいにslackのSlugger、みたいなサービスがあれば? 的な</pre>
<pre>tsuyoshi_cho 27日 13:30:27: (Sluggerは語感で適当に選出)</pre>
<pre>0Δ 27日 13:30:28: 他は使った事が無くてわからないですね……
MacだとLiceCapだったか。</pre>
<pre>luma 27日 13:31:21: 欲しくなったときにはながれている...(スターすれば解決だと思うんですよね，最近はするようにしてます）</pre>
<pre>0Δ 27日 13:32:08: あとWindows10だと標準機能で録画(not gif)できたような。</pre>
<pre>tsuyoshi_cho 27日 13:32:26: ゲームバーですな</pre>
<pre>thara 27日 13:33:17: Slackまとめ、OSSですが <https://github.com/rutan/togelack> があります（アーカイブしてくれるかは知らない）</pre>
<pre>heavenshell 27日 13:34:28: Mac だと Kap を私が挙げましたw</pre>
<pre>heavenshell 27日 13:34:39: <https://getkap.co/></pre>
<pre>mattn 27日 13:36:35: licecap</pre>
<pre> 27日 13:36:53: お試し (vim-lsp で TypeScriptImport を作っている図)</pre>
<pre>luma 27日 13:38:29: :yosasou:</pre>
<pre>luma 27日 13:41:55: `:TsuImport` がどうしてもほしかった</pre>
<pre>tsuyoshi_cho 27日 13:44:27: 津からの輸入品...なんつて</pre>
<pre>heavenshell 27日 13:46:00: `:TusImport` をさらに魔改造している自分に隙はなかったw</pre>
<pre>luma 27日 14:08:20: どっちがいいんですかね... vim-lspに一本化したい，みたいな思いから Tsuquyomi なしですることをかんがえてみたんですが...</pre>
<pre>luma 27日 14:09:02: 現状は ts-lspとtsserverが両方起動している...w</pre>
<pre>luma 27日 14:10:35: vim-lsp側が受け入れてくれるかわからないけど，小さなAPIの変更PRを送ってみます...</pre>
<pre>hrsh7th 27日 14:11:17: vim-lsp のコードアクションからインポートできた気がしますが、すべての未インポートを処理する方法はないかもしれない…</pre>
<pre>heavenshell 27日 14:13:50: NeoVim の方は Tsuquyomi より <https://github.com/mhartington/nvim-typescript> こちらを使ったほうが幸せになれそうです(LSP 使わない場合は)</pre>
<pre>luma 27日 14:14:37: いいなーこれ，ありがとうございます</pre>
<pre>hrsh7th 27日 14:14:41: なるほどです。VSCode に合わせただけなので、自由度上がるならありかもしれません！</pre>
<pre>luma 27日 14:14:55: PR送ってみます！！</pre>
<pre>heavenshell 27日 14:19:16: Tsuquyomi 私が一部 job / channel 入れたんですが、見事に NeoVim スルーしまして(元々入ってた job / channel も対応してなかった)。こちらは NeoVim の方だとだいぶ快適に使えるようですよ。</pre>
<pre>tsuyoshi_cho 27日 14:19:57: GitHubのアイコン画像の眼力(めぢから)がつおい...</pre>
<pre>takets 27日 14:20:27: 画像を上下逆にしても顔に見えそう（失礼）</pre>
<pre>yutakatay 27日 14:25:35: 前deopleteと格闘していたときは
<https://github.com/zchee>
さんにずっと見られてたw</pre>
<pre>tsuyoshi_cho 27日 14:26:08: zchee(ぢぃー)</pre>
<pre>kuu 27日 14:26:32: 難読わかる</pre>
<pre>yutakatay 27日 14:27:22: 犬さんのスペル未だに覚えられなくてclever-fから飛んでるのは内緒</pre>
<pre>kuu 27日 14:27:54: 犬さんは本名知っていればすぐにわかるって誰かが言ってた（実際すぐに覚えた）</pre>
<pre>tsuyoshi_cho 27日 14:28:15: <https://github.com/rhysd/conflict-marker.vim>
丁度これ見てた(操作がhelpにない...)</pre>
<pre>mattn 27日 14:30:40: このアカウント消して rhysd にリダイレクトして欲しい(無茶苦茶言う人) <https://github.com/inu></pre>
<pre>yutakatay 27日 14:31:47: いいですね！</pre>
<pre>tsuyoshi_cho 27日 14:37:35: ```dein.toml|179 col 1| repo = 'rhysd/accelerated-jk'
dein.toml|1814 col 1| repo = 'rhysd/devdocs.vim'
dein.toml|2885 col 1| repo = 'rhysd/git-messenger.vim'
dein.toml|2935 col 1| repo = 'rhysd/conflict-marker.vim'
dein.toml|3630 col 1| repo = 'rhysd/clever-f.vim'```
```dein_lazy.toml|630 col 1| repo = 'rhysd/vim-clang-format' (もう外してもいいかな)
dein_lazy.toml|672 col 1| repo = 'rhysd/vim-gfm-syntax'```
最近なんか高負荷でvimが死ぬことがある...</pre>
<pre>yutakatay 27日 14:41:53: 人別では一番お世話になってる気がしますね。。。（coc拡張除いて）

```Plug 'rhysd/clever-f.vim'
Plug 'rhysd/accelerated-jk'
Plug 'rhysd/reply.vim'
Plug 'rhysd/committia.vim'
Plug 'rhysd/git-messenger.vim'
Plug 'rhysd/conflict-marker.vim'
Plug 'rhysd/vim-clang-format', {```</pre>
<pre>tsuyoshi_cho 27日 14:45:58: わりと被ってますね</pre>
<pre>たまたまご 29日 10:05:18: [質問]
guifg から ctermfg を算出するにはどうすればいいのでしょうか？
やりたいことは以下のような dict の guifg から ctermfg を算出したいです。
`s:conv_ctermfg()` のような関数があると嬉しいです。

```let s:dict = {
\ 'a': { 'guifg': '#1572B6' },
\ 'b': { 'guifg': '#C4C7CE' },
\ 'c': { 'guifg': '#755838' },
\ 'd': { 'guifg': '#984C93' },
\}

for [key, dct] in items(s:dict)
    echo printf("'%s': { 'guifg': '%s', 'ctermfg': '%s' }", key, dct.guifg, s:conv_ctermfg(dct.guifg))
endfor```
結果

```'a': { 'guifg': '#1572B6', 'ctermfg': '変換した値' }
'b': { 'guifg': '#C4C7CE', 'ctermfg': '変換した値' }
'c': { 'guifg': '#755838', 'ctermfg': '変換した値' }
'd': { 'guifg': '#984C93', 'ctermfg': '変換した値' }```
</pre>
<pre>kuu 29日 10:10:35: desert256というカラースキームが内部でこの変換をかけています、参考になればいいです</pre>
<pre>kuu 29日 10:10:37: <https://www.vim.org/scripts/script.php?script_id=1243|https://www.vim.org/scripts/script.php?script_id=1243></pre>
<pre>たまたまご 29日 10:12:07: ありがとうございます！
試してみます！</pre>
<pre>kuu 29日 10:14:13: 後はこんなのですかね <https://tociyuki.hatenablog.jp/entry/20160620/1466434090|https://tociyuki.hatenablog.jp/entry/20160620/1466434090></pre>
<pre>tsuyoshi_cho 29日 10:14:15: そして今かなり話題の所で、そのへんに関係する値の処理を tyru さんがvitalのモジュールとして作ってたりする...</pre>
<pre>たまたまご 29日 11:44:23: <@U9S4G0LJW> desert256 の `&lt;SID&gt;rgb()` を使ってできました！ありがとうございました！</pre>
<pre>vim タグが付けられた最新の質問 - スタック・オーバーフロー 30日 14:50:16: <https://ja.stackoverflow.com/questions/65225/gvim-%E3%81%AE-terminal-%E3%81%AB%E3%83%9E%E3%82%A6%E3%82%B9%E3%81%A7%E8%B2%BC%E3%82%8A%E4%BB%98%E3%81%91%E3%81%97%E3%81%9F%E3%81%84|gvim の :terminal にマウスで貼り付けしたい>
Windows 10 を使用しています。gvim で :terminal を起動するとデフォルトで cmd.exe が起動します。そこにマウスでテキストの貼り付け(クリップボードからの貼り付け)を行いたいのですが、テキストを別アプリでコピーした後、gvim上のターミナル上で右クリックを押しても何の反応もありませんでした。これは仕様なのでしょうか？

期待した動作としては、vim で :terminal を起動した時と同じ動作。つまりは、右クリックでテキストの貼り付けが行えるか、gvim上のバッファで右クリックをした時の動作。つまりは、「貼り付け」含むコンテキストメニューの表示がされるかが期待した動作となります。

今のところ、"+ で貼り付けを行っていますが、マウスでやりたいときもあり(Vimmerとしては怒られそうですが) 設定等で期待した動作に近づけられるのであればやりたいとおもっています。</pre>
<pre>thinca 30日 15:01:05: やってできないことはなさそうだけどうまくいく設定を試すのが面倒</pre>
<pre>bamchoh 30日 15:11:27: 【自己解決】`tmap &lt;RightMouse&gt; &lt;C-W&gt;"+` でいけました。。。</pre>
<pre>ゴリラ 30日 16:36:57: 自分なら、Terminal-Jobモードにしてコピーしちゃうかな</pre>
<pre>tsuyoshi_cho 30日 20:16:54: `質問です`

<https://vim-jp.slack.com/archives/CQ57P4XU4/p1585396700088700|https://vim-jp.slack.com/archives/CQ57P4XU4/p1585396700088700>
で出している挙動ですが、何かしらの設定不備でしょうか？
改めて…</pre>
<pre>mattn 30日 21:28:02: どんな感じの map でしょうか？</pre>
<pre>tsuyoshi_cho 30日 21:32:08: ```function! s:popup_cancel(rawchar, ...) abort " {{{
  let result = ''
  if dein#is_sourced('asyncomplete.vim')
    let result = result . asyncomplete#cancel_popup()
    if a:0
      let result = result . a:1
    endif
  else
    let result = result . a:rawchar
  endif
  return result
endfunction " }}}

inoremap &lt;expr&gt;&lt;silent&gt; &lt;C-e&gt;
    \ pumvisible() ? &lt;SID&gt;popup_cancel("\&lt;C-e&gt;"            ) : "\&lt;C-e&gt;"```
こんな感じで、cancel_popupが発動することは確認できています(失敗してたときは、C-eで閉じても直ぐに再popupだったし、確認もしてます)</pre>
<pre>tsuyoshi_cho 30日 21:33:06: で、キャンセルしたら再popupはしないのですが、その後のスペースで同じ候補でpopupします。
位置と入れた文字(スペース)を考えるとpopupするのはなんか変だなと</pre>
<pre>mattn 30日 21:33:39: refresh pattern じゃないすかね。</pre>
<pre>tsuyoshi_cho 30日 21:34:11: あー...特に設定してませんが、ちょっと調整したほうがよさそう?</pre>
<pre>tsuyoshi_cho 30日 21:40:32: ありがとうございます。ただ該当する設定にあたりそうなの triggerくらいしかないと思いますが
```PP g:asyncomplete_triggers:
g:asyncomplete_triggers = {'*': ['.', '&gt;', ':']}```
特に変更はなく...?</pre>
<pre>mattn 30日 21:48:58: ```:echo b:asyncompleter_refresh_pattern```</pre>
<pre>mattn 30日 21:49:04: これで何が表示されますか？</pre>
<pre>mattn 30日 21:49:28: 空白込みなので
```:echo string(b:asyncompleter_refresh_pattern)```</pre>
<pre>mattn 30日 21:49:31: の方がいいかな。</pre>
<pre>mattn 30日 21:50:23: vim-lsp-settings がファイルタイプに応じて設定してるんですが、そこに空白にマッチする物が入ってしまってるのかもしれないです。</pre>
<pre>tsuyoshi_cho 30日 22:08:25: 空のファイルタイプなので、未定義でした</pre>
<pre>tsuyoshi_cho 30日 22:10:19: たとえば `text` でも同じです(未定義)
上の画像でいうと、動作してるの `asyncomplete-nextword` ですので、そっち自体の不具合(というか動作特性)
の可能性がありそうですね....</pre>
<pre>tsuyoshi_cho 30日 22:14:46: ```b:asyncomplete_triggers = {
  '.': {'emoji': ['.'], 'nextword': ['.'], 'omni': ['.'], 'vsnip': ['.']},
  '/': {'file': ['/']},
  ':': {'emoji': [':'], 'nextword': [':'], 'omni': [':'], 'vsnip': [':']},
  '&gt;': {'emoji': ['&gt;'], 'nextword': ['&gt;'], 'omni': ['&gt;'], 'vsnip': ['&gt;']}
}```
textでbufferのトリガはこうでした(参考)</pre>
<pre>tsuyoshi_cho 30日 22:25:20: asyncompleteがcompletorを呼び出す契機が上のtriggerだと思うんですが、なぜに...</pre>
<pre>tsuyoshi_cho 30日 22:25:38: ```function! s:update_trigger_characters() ```
でログ出してるみたいなので、そちらを取ってみます。</pre>
<pre> 30日 22:31:34: 部分を切り出しましたが、特別なことはないですね...</pre>
<pre> 30日 22:32:09: 一応ログ(操作が微妙ですが)</pre>
<pre>mattn 30日 22:58:53: エラーが起きてるのはなんだろう。</pre>
<pre>mattn 30日 22:59:09: &gt; ["core","s:trigger","error","Vim(let):E129: 関数名が要求されます"]</pre>
<pre>tsuyoshi_cho 30日 22:59:12: それも謎なんですよね...
(別の分析のときにログ見て)</pre>
<pre>tsuyoshi_cho 30日 22:59:20: ただ不明すぎてスルーしてた...</pre>
<pre>tsuyoshi_cho 30日 23:24:23: 関数から、どれかのソースのtrigger時の失敗のようなので、1つづつoffして詰めました。
<https://github.com/yami-beta/asyncomplete-omni.vimとく>
をoffにしたら出なくなりました.</pre>
<pre>tsuyoshi_cho 30日 23:26:10: 今はほぼ使ってないので、omniはoffります...</pre>
<pre>tsuyoshi_cho 30日 23:29:03: そしてoffでもスペースでの補完は出ますね</pre>
<pre> 30日 23:29:18: ログ取りました</pre>
<pre> 30日 23:33:33: 上げなおし</pre>
<pre>mattn 30日 23:56:31: それでもまだおかしい感じですか？</pre>
<pre>tsuyoshi_cho 30日 23:57:34: はい、これでもgifの動作が発生します。</pre>
<pre>tsuyoshi_cho 31日 00:10:40: 操作に大きく支障があるわけではないので、おいおい直せれればな、と思います。</pre>
<pre>mattn 31日 00:21:20: これなんの language-server が動いてるんですか？</pre>
<pre>mattn 31日 00:21:56: language-server じゃないか、asyncomplete-source</pre>
<pre>tsuyoshi_cho 31日 04:49:56: ログにありますが、file,emoji,nextword などですね</pre>
<pre>mattn 31日 09:00:40: どの source かに空白でも refresh するようなのがいるんだと思います。</pre>
<pre>tsuyoshi_cho 31日 09:02:43: ただ、各ログを見るとrefreshを立ててませんが、自発的にできるんですっけ?
<https://github.com/yuki-ycino/asyncomplete-dictionary/pull/2>
で遅延させようと四苦八苦して、いろいろ調べたりやったりしたので、あるなら知りたい...w</pre>
<pre>mattn 31日 09:08:43: 能動的になってるかは分からないですが `asyncomplete#sources#dictionary#completor` がどこから呼ばれてるか調べると良さそう。</pre>
<pre>tsuyoshi_cho 31日 09:10:24: 呼び出し契機についてはもうちょっと勉強しないとですね...たしかに</pre>
<pre>tsuyoshi_cho 31日 09:14:32: on_change(文字の変更)かforce_fresh(基本手動)で
``` if l:matches['refresh'] || l:matches['status'] ==# 'idle' || l:matches['status'] ==# 'failure'```
のどれかのとき、かな... on/offで調べるかなあ...</pre>
<pre>tyru 31日 12:27:09: 質問です。現状 popup の機能にカーソルの移動に合わせて popup が追跡する機能ってあるでしょうか？
今だと CursorMoved で制御しないと無い認識ですが、previewpopup オプションというのを見つけて preview を使ってみたいなと思いつつ…</pre>
<pre>kuu 31日 12:28:40: 僕が知る限りはないですね、カーソル位置に出てきてカーソル動かすと閉じるのは知ってますが…</pre>
<pre>tyru 31日 12:31:51: 確かに閉じるのは popup の option で指定できた気がしますね (関数に指定するやつ)</pre>
<pre>tsuyoshi_cho 1日 15:52:30: やるなら自動closeとmove検知での再popup?</pre>
{% endraw %}
