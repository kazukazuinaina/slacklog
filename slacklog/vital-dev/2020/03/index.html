---
# vim:set ts=2 sts=2 sw=2 et:
layout: slacklog
title: vim-jp.slack.com log - #vital-dev - 2020年03月
---
<div>
<h2><a href='{{ post.url }}'>{{ page.title }}</a></h2>

<p>参加方法、各チャンネルの概要等は以下を参照して下さい。<br>
<a href='/docs/chat.html'>vim-jpのチャットルームについて</a></p>

{% raw %}
<pre>thinca 1583718426.003400: <https://github.com/vim-jp/vital.vim/pull/726>
これ他に見る人います?</pre>
<pre>thinca 1583718441.003800: 0.5.0 のレビューもしないとな</pre>
<pre>tsuyoshi_cho 1583718723.004700: 見てはみたけど、難しい...動作確認をがんばるほうがまだ役に立てそう</pre>
<pre>tyru 1583738275.005500: 厳しい…
0.4.0, 0.5.0 の仕様へのリンクが PR 本文にあるとうれしい</pre>
<pre>tyru 1583738363.005700: 仕様みつけた、足した</pre>
<pre>tyru 1583738589.006800: <@U03C71D7H> 見る人いなければマージした方がよさそう？（自分は見れないです…）</pre>
<pre>tyru 1583738626.007500: 仕様の変更点の多さに挫折した（仕事の片手間に見れる量じゃなかった）</pre>
<pre>thinca 1583738674.008100: 仕事の片手間には無理ですね…てか 0.5.0 は私もまだ見てないですよ。まだ 0.4.0 だけです</pre>
<pre>tsuyoshi_cho 1583765288.008700: 不思議なエラーが...
むう
```function &lt;SNR&gt;25__get_file_by_func_name(name) abort  Line:1  (d:/a/vital.vim/vital.vim/autoload/vital/vital.vim line 188)

  1:   let body = execute(printf('verbose function %s', a:name))

Vim(function):E129: Function name required

##[error]Process completed with exit code 1.```
<https://pipelines.actions.githubusercontent.com/bTH5KKrpAnr7z4P7oCLErR00ATNx2Y67wmAVWbYGRYt3LEOCiI/_apis/pipelines/1/runs/37/signedlogcontent/11?urlExpires=2020-03-09T14%3A49%3A00.3002908Z&amp;urlSigningMethod=HMACV1&amp;urlSignature=2Rx1AB%2BYPf3ixPSM%2B2LlgFgNHpMX29vCb0CSQhZfd%2BI%3D></pre>
<pre>thinca 1583765932.008900: リンク期限切れしてた</pre>
<pre>tsuyoshi_cho 1583783077.009300: あらー</pre>
<pre>tsuyoshi_cho 1583785788.010100: <https://github.com/vim-jp/vital.vim/runs/495355154?check_suite_focus=true|https://github.com/vim-jp/vital.vim/runs/495355154?check_suite_focus=true>
のRun testの項目です</pre>
<pre>ichizok 1583789598.011000: 環境にluaが入ってないのでエラーになっている</pre>
<pre>tsuyoshi_cho 1583797836.014600: あー...</pre>
<pre>tsuyoshi_cho 1583797839.014800: なるほど</pre>
<pre>thinca 1584099177.016100: TOML のやつ誰か見る予定あります? いないなら 0.4.0 の方マージしちゃうけど
コードわからなくても興味はあるって人は、テストケースだけみてこれが通るようになるのねってだけでも良いと思いますよー</pre>
<pre>thinca 1584099194.016300: 0.5.0 のレビューをした</pre>
<pre>tsuyoshi_cho 1584100953.017300: 0.4のテストとかはざっくりは見ました(なにが実現するか確認したくて)、0.4マージは良いと思います :hand:</pre>
<pre>thinca 1584161514.017500: <@U0M7GCBPD> さんは見るかな?</pre>
<pre>tyru 1584185373.018200: あざす。テストだけ見て approve しました</pre>
<pre>tsuyoshi_cho 1584340931.018800: <https://github.com/prabirshrestha/vim-lsp/pull/755/files>
```:YggdrasilPlant -plugin_dir=./ -namespace=lsp/utils```
ほうほう、Vitalと似た感じでインストールできるんですな
<https://github.com/m-pilia/vim-yggdrasil></pre>
<pre>thinca 1584341531.019400: vital.vim のローダーを作り直しますと言って数年が経過している…</pre>
<pre>tyru 1584346554.019900: :eye: :manbou: :eye:</pre>
<pre>kuu 1584346584.020300: なんか怖いw</pre>
<pre>tsuyoshi_cho 1584346631.021000: :matryoshka-anime: :nose::skin-tone-5: :matryoshka-anime:
とかも可能</pre>
<pre>tsuyoshi_cho 1584346676.021700: イグドラシルがPlant(植える)ならVitalは Up(上げる)もありかも (どうでもよい)</pre>
<pre>tyru 1584347112.023200: vital.vim のローダー、あれって最低限のアジェンダとかってどこかに上がってましたっけ？
前回の vital 開発者会議で決まったやつ</pre>
<pre>tyru 1584347136.023700: CLI で動くやつか Vim script なのかも覚えてない</pre>
<pre>thinca 1584347336.024600: 前回、懐かしの Fablic 社開催だったな</pre>
<pre>thinca 1584347368.025200: 割と考えることが多くて設計が途中で頓挫しているところまでは覚えている (最近は着手すらできていなくてもう…)</pre>
<pre>u 1584373209.025700: あれは良い会だった</pre>
<pre>tsuyoshi_cho 1584524800.026600: <https://github.com/vim-jp/vital.vim/pull/701>
内容を整理して良くなったのだが(Windows/Macのlua対応もした)
WindowsがナゾにテストNGになる...</pre>
<pre>thinca 1584524931.027000: GitHub Actions は人類には早すぎた</pre>
<pre>raa0121 1584525000.027300: Async 周りがコケやすいのかな</pre>
<pre>tsuyoshi_cho 1584525057.028200: なんかWindows、他のでもタイマー的な計測でNGになるので、時刻がドリフトするとか、そういうのがあるのかも?</pre>
<pre>tsuyoshi_cho 1584525092.028600: LinuxとMacを統合(というかなんというか)したので、見た目はよくなりました。</pre>
<pre>tsuyoshi_cho 1584525118.029100: Windowsもgit bashつかうと不可能ではなかったらおもしろいが、さすがに無理...w</pre>
<pre>raa0121 1584525458.029800: codecov 使うためだけに、python 入れてる感じですかね？</pre>
<pre>raa0121 1584525716.030500: <https://github.com/numworks/setup-msys2>
msys2 を入れると、bash が使えますね…</pre>
<pre>tsuyoshi_cho 1584525924.031300: Windowsの環境自体にははいっていますが、activeにするに必要な感じですね
最初なくてNGだった...はず</pre>
<pre>tsuyoshi_cho 1584525943.031800: 内容もっていって改良するの、アリですよーw</pre>
<pre>thinca 1584526006.032000: active にするってのは?</pre>
<pre>tsuyoshi_cho 1584526091.032500: 複数はいってるので、有効なのがどれか、みたいな...だったような(記憶があいまい)</pre>
<pre>thinca 1584526128.032900: 何が複数入っている? bash?</pre>
<pre>thinca 1584526142.033300: bash はデフォルトで使えますが…</pre>
<pre>tsuyoshi_cho 1584526164.033800: いやpythonですが...
<https://github.com/actions/virtual-environments/blob/master/images/win/Windows2019-Readme.md>
いま見ると、デフォルトは3.7.6で有効なのかな...はずしてもよさそうですね</pre>
<pre>tsuyoshi_cho 1584526183.034400: (ここのは参考としてなので、本家ヘルプを見るべきですが)</pre>
<pre>thinca 1584526186.034600: Python か</pre>
<pre>tsuyoshi_cho 1584526190.034800: URLわすれた</pre>
<pre>thinca 1584526361.035200: 重箱だけど reviewdog ってワークフロー名としては的確でない気がするな</pre>
<pre>tsuyoshi_cho 1584526443.035800: あー、たしかに...reviewdogで指摘あげる系がまとまってるだけですしね...</pre>
<pre>tsuyoshi_cho 1584526469.036200: buildtestも今となってはbuildはあんまりしない...w</pre>
<pre>tsuyoshi_cho 1584532727.037300: Pythonはactionを除去、自分のも現在の最新の状態に合せて更新した...
<https://github.com/tsuyoshicho/vital-codec/actions/runs/58154641>
キャッシュの設定がイマイチ?</pre>
<pre>tsuyoshi_cho 1584542409.041200: すみません、vitalizerを見てて、以下の疑問が発生したのですが、合ってますでしょうか?
1. datafileの扱いができる(dependの ドットファイルか、 filesキー)
2. だけど s:module2file を2度(ベースと、対象ファイル)に噛ませる関係から、パスが `autoload/vital/__vital__%s.vim`  固定になる(ユーザーライブラリは無理)
この理解であってるかな...

データファイルを活用するライブラリを作ることを考えていたのですが、付属データファイルが使えるのか、使えるならどうなるのか、などを調べていてこの内容にあたりました...
この条件だとちょっと辛いので、どうにかユーザーライブラリでもデータファイル使いたい...</pre>
<pre>tsuyoshi_cho 1584696582.041600: ファイルもっていってくれるけど、なんかエラーする...</pre>
<pre>tsuyoshi_cho 1584796953.042100: 上の問題は見当違いだったけど、エラーについては原因が特定できたのでPR作ります</pre>
<pre>tsuyoshi_cho 1584856010.043000: (ログを見ると、~/以下がパーミッション的に厳しいため、pipのdownloadsをキャッシュするの失敗してるくさいが、みんな気にしてないのだろうか...)</pre>
<pre>tsuyoshi_cho 1584871153.043400: Linux 8.1はビルドで対応...あいかわらずWindowsがエラるが</pre>
<pre>u 1584917546.043700: 先週集中的に雑務おわらせた</pre>
<pre>u 1584917551.044000: 今週コード書くぞ!</pre>
<pre>u 1584917556.044200: vital追っていかないと</pre>
<pre>tyru 1585124347.000900: <https://vim-jp.slack.com/archives/C03C4RC9F/p1585099400013100></pre>
<pre>tyru 1585124353.001200: <https://github.com/vim-jp/vital.vim/pull/732></pre>
<pre>tsuyoshi_cho 1585124443.001900: おー</pre>
<pre>raa0121 1585124502.002600: `s:Color.diff` って、`printf('rgb(%d,%d,%d)', abs(r1 - r2), abs(g1 - g2), abs(b1 - b2))` を出したほうがわかり易くないですかね？</pre>
<pre>tyru 1585124737.005200: わかりやすさというより比較用途ですね。
浮動小数点で計算してから round() して整数にする都合上変換で誤差が生じてしまうので、テストでだいたい同じになってることを確認したくて追加した苦肉の策というか…
ぶっちゃけなくても（サポートしなくても）いいやつだと思います</pre>
<pre>tyru 1585124805.006300: 「色の近さ」を取得したかったんですが、上のフォーマットだとそれができないです</pre>
<pre>tyru 1585124817.006700: あと rgb(-100, -100, -100) とかマイナスになってもデバッグ以外に用途がなさそう</pre>
<pre>tsuyoshi_cho 1585124876.007200: 色相というか色の玉での距離を出すのがいいのだろうか...色難しいですね</pre>
<pre>tsuyoshi_cho 1585124934.008200: 座標間とすると ベクトルとらないとなのかな?</pre>
<pre>tyru 1585125093.009900: なるほど、ただやっぱこの値が機械的に近いことは確認できてもそれって vital のテスト以外で使えるものなのかなーとかいう疑問はある…</pre>
<pre>mattn 1585125121.010400: 色の値によって中央値が違うからなー。</pre>
<pre>thinca 1585125249.011100: 最初に help を見ようと思ったらなかった</pre>
<pre>tyru 1585125316.011600: 座標間の距離にして diff() → distance() にリネームした</pre>
<pre>tyru 1585125340.012100: <@U03C71D7H> とりあえずテストは書いた…</pre>
<pre>tyru 1585126310.014300: あと Color.xterm() の他にも端末ごと？の terminal code の palette を定義したいと思ってる
ただこの辺りの仕様がよくわかってない（Vim でも16色だけど `term_setansicolor()` でいじれたりするな）</pre>
<pre>tsuyoshi_cho 1585126359.014900: Xの16色、windowsのcmd...あとはvimがサポートするOSのhelp確認くらい?</pre>
<pre>tsuyoshi_cho 1585126400.015300: あ、前出のurxvt こと rxvt-unicode?</pre>
<pre>tyru 1585126414.015700: ですね、そこらへんも気になってる…</pre>
<pre>thinca 1585126464.016300: 256</pre>
<pre>tsuyoshi_cho 1585126480.016500: ノリがtermcapの色サポートみたいになりそう...まあできるだけ?</pre>
<pre>tsuyoshi_cho 1585126491.016900: xterm-256colorsはたしかに別か...</pre>
<pre>mattn 1585126528.017500: こうなると色名が欲しくなりそう。</pre>
<pre>thinca 1585126542.017800: $VIMRUNTIME/rgb.txt の読み込みと色名での色の参照</pre>
<pre>thinca 1585126547.018000: かぶり</pre>
<pre>kuu 1585126578.018300: あの色指定、リストあったんだ</pre>
<pre>thinca 1585126666.019100: 色一覧の取得、色名から Color オブジェクトの取得、辺りの関数があって、最初に呼ばれた時に $VIMRUNTIME/rgb.txt を読み込む、かなぁ</pre>
<pre>thinca 1585126673.019400: 色定義の追加まで考えると面倒</pre>
<pre>kuu 1585126718.019600: 追加、多分いらない</pre>
<pre>tsuyoshi_cho 1585126778.020400: やりたければ自分のモジュールなり作ろう、でいいかと思う(すくなくとも今は)。</pre>
<pre>tyru 1585128052.021800: 追加してみた。 `s:Color.parse('snow')` とかできる
<https://github.com/vim-jp/vital.vim/pull/732/commits/8d079ca83c37a35cdaad0ac8e696febc541ecf7b></pre>
<pre>mattn 1585128312.022200: 色名を連続して使いたいかどうか微妙すねー。</pre>
<pre>mattn 1585128333.022500: メモリに残るの嫌って人もいるかもだし。</pre>
<pre>mattn 1585128348.022900: 別 import という手も無くはないけど。</pre>
<pre>mattn 1585128390.023500: vital 使わない勢なので感覚よく分かってないけど。</pre>
<pre>tyru 1585129303.023800: ちなみに今は残らないです</pre>
<pre>tyru 1585129341.024500: 環境変数に依存するのもアレかと思ったんですが、$VIMRUNTIME は Vim 組込みと考えていいかと。
xxd コマンドが存在することを仮定するのと同じ</pre>
<pre>tyru 1585129379.025200: ただ気持ち悪いという人がいそうなのもわかる</pre>
<pre> 1585129444.025400: ちなみに現状もいくつかある</pre>
<pre>tyru 1585132837.026800: help 追加したので WIP も外した。さっき言った TODO は help に書いた。レビュー＆マージ可能です。</pre>
<pre>tsuyoshi_cho 1585148597.028000: <https://github.com/vim-jp/vital.vim/issues/733#issuecomment-603890412>
<@U8R597E9H> さーん、すみません、Promiseでnoopの引数があってないエラーが出たんですが、これ実装的にまずいような?</pre>
<pre>hrsh7th 1585152061.028800: むむむ…。普通に使っていてもエラー出なかったのですが…確認します。</pre>
<pre>hrsh7th 1585152072.029200: ご連絡ありがとう御座います。</pre>
<pre>hrsh7th 1585152198.030700: 問題が起きているならば、v:null かなにかを入れて empty 判定しようかと思います :bow:</pre>
<pre>tsuyoshi_cho 1585168226.032900: 考えてたのですが、nopの意味でなら可変長引数にするのがよさそうですね。</pre>
<pre>tsuyoshi_cho 1585170467.035000: テストケース、unhandleをnoopと自作ハンドラ、両方通す必要があるか…</pre>
<pre>tsuyoshi_cho 1585181154.035300: これだとかなりわかりにくいので、日本語でコメントを追加します。</pre>
<pre>hrsh7th 1585199614.035900: たしかに可変長引数にするの安定ですね！それで PR 作ります。</pre>
<pre>tsuyoshi_cho 1585199862.036700: ありがとうございます、よろしくおねがいします。
それ単品なら自分でもよかったんですが、テストが...ということで :sweat_smile:</pre>
<pre>thinca 1585221909.037000: ひとまずドキュメントだけ見た <https://github.com/vim-jp/vital.vim/pull/732></pre>
<pre>lambdalisue 1585224039.038200: 超デカイのが気になります。バンドルする側からすると特定の機能だけ欲しいケースが多そう</pre>
<pre>lambdalisue 1585224120.038600: まぁ超でもないか...</pre>
<pre>hrsh7th 1585225858.038900: Promise のけん、テストを落とすのがめちゃくちゃ難しくて難航してます。。。</pre>
<pre>tyru 1585227577.043300: デカい件は正直 bundler 側の仕事な気もする…
bundler 側で関数単位まで必要なものを指定できるようになっていらないものまで指定できればなぁ
（モジュールの書き方の対応も必要だろうけど、できるようになれば対応する）
webpack でいう tree shaking</pre>
<pre>tyru 1585227582.043500: あと個人的にはそれほどデカいモジュールと思ってない…
ここら辺は完全に主観が入るというか、自分はモジュールのサイズで困ったことがないのでつい最大公約数的なモジュールの方が嬉しいと思っちゃうんですよね</pre>
<pre>tyru 1585227810.045200: ライブラリだから色んなユーザのニーズに合わせるべきで、実際のユースケースをベースに vital 開発者会議とかやると良さそう（vital module 使ったコード見ながら困ったことを共有とか）</pre>
<pre>tyru 1585227835.045500: リモート vital 開発者会議やりたいなー</pre>
<pre>tyru 1585228113.046600: 今なら vim9script の module に変換するパスも検討しないとなぁ
やっぱ vim9script 触らんと</pre>
<pre>lambdalisue 1585228549.051100: デカイというか、各種フォーマッター、各種パーサーと計算は欲しい場所が違うなーという所感でした。
例えばプラグインで「既存のハイライトの背景色だけを少し暗くする」という機能が欲しくなったときに必要なのって

• Vim のハイライト（まぁ HTML カラーに限定）を内部表現にするパーサー
• 少し暗くする処理
• Vim のハイライト表現に戻すフォーマッタ
の三つだと思うんですが、これのために xterm の変換だったりは、あんまりいらないかなと。


あと、個人的な好みですが独自オブジェクトを経由するより `rgb2hsl` みたいな関数を直接使える方が、使いやすいなと感じます。</pre>
<pre>lambdalisue 1585228668.053000: • `parse_html_color(str): []int`
• `rgb2hsl([]int): []int`
• `format_html_color([]int): str`</pre>
<pre>lambdalisue 1585228731.054200: 「既存のハイライトの背景色だけ少し暗くする」という処理を上記三つの関数の組み合わせで書けた方が扱いやすいです、という言い方の方がわかりやすいかな？</pre>
<pre>tyru 1585229141.056200: いえいえ、言ってることはすごくよく分かります。
そもそも tree shaking とかするには関数スタイルの方が相性がいいですし…
自分は閉包性というのが好きで、何かライブラリ作る時についオブジェクトを作ってその世界で完結できるよう作っちゃったりするんですよね…</pre>
<pre>tyru 1585229208.057200: ```:echo format_html_color(rgb2hsl(parse_html_color('red'))) == '#FF0000'```
的な</pre>
<pre>tyru 1585229326.057400: いちおうこちらにも <https://vim-jp.slack.com/archives/C03C4RC9F/p1585227069437800></pre>
<pre>tyru 1585229348.057700: <https://vim-jp.slack.com/archives/C03C4RC9F/p1585229310455600?thread_ts=1585227069.437800&amp;cid=C03C4RC9F></pre>
<pre>tyru 1585229395.058600: distance() とか [x, y, z] を扱うベクトル計算ライブラリとして分離すると便利そう</pre>
<pre>tsuyoshi_cho 1585229739.060000: Math.Vector.distance() みたいな感じで関数分離は適時できればいいのでは、という
ただ、ColorのIFが崩れる、がありますが...</pre>
<pre>tyru 1585229830.060400: 範囲を制限できないって意味ですかね (0-255)</pre>
<pre>tsuyoshi_cho 1585230000.061300: そのIFを持つなら、Color.distance()は存続しますね、ただ、内部でMath.Vectorを(例えばで)持つと、総合でもっと太るwという</pre>
<pre>tyru 1585230595.062600: `min([255, max([0, n])])` すればいいとはいえ確かに面倒ですね（忘れそうだし）</pre>
<pre>tyru 1585230650.063300: あ、ちなみにさっきのオブジェクトか関数かの話は、関数スタイルに書き直す方向で考えてます &gt;皆さん</pre>
<pre>lambdalisue 1585231803.067300: 超感覚なんですが `Color.distance()` は OK で `Color.to_xterm(...)` とか `Color.parse("rgb(100,100,100)")` とかは違うなぁという感想です。`distance()` は色を扱うライブラリとして違和感ないんですが、他はそれぞれ xterm 特化と HTML 特化なので xterm/HTML 関係ない人にはいらないなぁと。なので `Color.Xterm.format(...)` とか `Color.HTML.parse(...)` とかモジュールごとわけたほうがよいかと</pre>
<pre>lambdalisue 1585231851.067800: まぁモジュール細分化がいいか？は微妙なところなので好みとしか言いようがないのですが....</pre>
<pre>tyru 1585232458.068800: thinca さんのレビュー指摘分直した</pre>
<pre>tyru 1585232521.069600: うーーーん細分化どうなんでしょうね。難しいところ…</pre>
<pre>tyru 1585232797.073000: xterm と HTML は全然違う領域なので確かに。
ただ分けると結局複数ファイル読み込む必要が出ないかな。と思ったけど書いてみた方が早いか</pre>
<pre>tyru 1585232851.073800: 関数スタイル、method operator があるので結構いい感じに書けることに気付いた顔</pre>
<pre>tyru 1585232984.074700: 分け方どうしようかな。s:RGB, s:HSL みたいに内部的な色の保持方法ごとにオブジェクト化してるので xterm/CSS みたいな分け方ではないんだよな</pre>
<pre>tyru 1585233187.075900: Color.parse(), Color.xterm(), Color.RGB.rgb(), Color.HSL.hsl() みたいな感じに…と思ったけどこれだと CSS / xterm 分離できてないのよな…</pre>
<pre>tyru 1585234117.079900: あれか、分割するならやっぱりありすえさんの例ぐらい徹底的に分割しないとダメな感じかー。
感覚的にこれくらいなら大規模でもないと思ってたのだけどモジュールの行数をかるく調べてみたら自作のモジュールがトップに来てそういうとこやぞという感じだった
vimlparser とかいじりすぎて感覚が麻痺している…？</pre>
<pre>tsuyoshi_cho 1585234265.080200: 多少マヒしてるのはあるかもですねw</pre>
<pre>tsuyoshi_cho 1585234293.081000: 分割は内部管理のサブとか、管理面から検討しちゃうのも手かも(設計そのものだけじゃなく)?</pre>
<pre>lambdalisue 1585234316.081400: （method operator が利用された時点で、僕は使えなくなってしまう.... Neovim...）</pre>
<pre>tyru 1585234437.082200: はい… vital で使用することは考えてないです :man-gesturing-no:</pre>
<pre>lambdalisue 1585234500.083400: 難しいところですね。Neovim のサポートは入れてないので、使うなとは言えない...</pre>
<pre>lambdalisue 1585234545.084100: method operator が Vim 8.1 で使えるなら vital-vim のポリシー的には使っていいはず...</pre>
<pre>lambdalisue 1585234567.084500: （まぁ、ポリシーないけど CI が落ちないという意味で）</pre>
<pre>kuu 1585234617.084800: &gt; helpful曰く
&gt; |-&gt;|
&gt; 
&gt;        Vim: +v8.1.1834 
らしいですが</pre>
<pre>kuu 1585234636.085400: Neovimで動かないと使いづらい気はする</pre>
<pre>tsuyoshi_cho 1585234663.086500: 8.1の最小で動かないから、まだ入れれない...かな?</pre>
<pre>tyru 1585234697.087000: まぁありすえさんぐらいのヘビーユーザを尊重しないでライブラリの意味あるのかとは思ってるので基本的に Neovim サポートなどはできる範囲で対応していきたいと思ってます</pre>
<pre>kuu 1585234749.087800: そもそもNeovimのVim scriptが微妙と思うんだけど、あれこれ言ってるとパッチ送れって言われそうなので黙ります</pre>
<pre>kuu 1585234762.088300: あちらのお作法全くわからん</pre>
<pre>tyru 1585234916.089600: 総意みたいな感じでライブラリの方針言ってるけど基本的にこれに限らず僕の発言は（自分はこう思う）という感じで堂々と主張するスタイルで言ってます（突然の主張）</pre>
<pre>tennashi 1585404401.094900: 既出であればすいませんが、HSL での S と L の調整用の関数が欲しいかもです
元ネタは <https://github.com/cocopon/pgmnt.vim/blob/master/autoload/pgmnt/color.vim>
これの pgmnt#color#adjust_color() とか pgmnt#color#daken() pgmnt#color#lighten() らへん
// 丁度カラースキーマ作ってて、この辺が便利そうだったので
あと HSV 色空間を扱えたりすると...</pre>
<pre>tsuyoshi_cho 1585404537.095900: 値自体はColorで取って、計算はColor.HSLやColor.HSVクラスを新規で起したら見通しがよさそう?</pre>
<pre>tennashi 1585405360.103500: ユースケース例として参考になるか分かりませんが、私の今やってるワークフローは
* ベースの色の HSL 値を決定する
* ベースに合う red/yellow/green/cyan/blue/magenta に相当する H 値を適当な色彩理論を拝借して決定する(S/L 値は固定)
* 各色の S/L 値を調整して、ハイライトグループにバインドする(各 H 値は固定)
みたいな流れでカラースキーマの色を作ってました</pre>
<pre>tennashi 1585446189.103700: というのを手でやったので pgmnt.vim で自動化しようと思ったら上手くいかず、最初のフェーズに "色相環の決定" というのがあることを知りました...
// 手で作った色はマンセル色相環前提だった...</pre>
<pre>thinca 1585645785.105200: 実際にやるかは置いといて、setup-vim で +lua をサポートするのは現実的なんだろうか。3OS で Lua を用意しないといけない。ビルド済みの Vim を使う場合はバージョンの指定とか DLL の配置場所とか…</pre>
<pre>kuu 1585645834.105600: そもそも+luaを実際に使ってる人ってどれくらいいるんですかね、現状</pre>
<pre>ゴリラ 1585645849.105800: 使ったことがない</pre>
<pre>thinca 1585645878.106100: vital.vim の CI で <@UAZ33BKV2> さんがセットアップしようとしていたはず</pre>
<pre>raa0121 1585645899.106700: まだ neocomplete.vim なので、 +lua ですね…</pre>
<pre>kuu 1585645935.107000: eskkなので(ry まあこれはフォールバックあるけど</pre>
<pre>thinca 1585645969.107300: +lua もそうだけど +python3 も欲しい人はいそうな気がしている</pre>
<pre>kuu 1585646016.107500: <https://github.com/roxma/vim-hug-neovim-rpc></pre>
<pre>kuu 1585646024.107900: こいつがpython3要求するので</pre>
<pre>kuu 1585646042.108300: dark vimmerには必須</pre>
<pre>thinca 1585646051.108500: そうなの</pre>
<pre>thinca 1585646083.109600: 現実的に必要なのは 1. +python3 2. +lua かなぁ</pre>
<pre>thinca 1585646088.109900: 優先度順</pre>
<pre>raa0121 1585646089.110000: neovim の remote plugin の仕組みを vim で動かすためのプラグインでしたっけ ＞ rpc</pre>
<pre>kuu 1585646103.110400: ですねー</pre>
<pre>kuu 1585646150.110600: これもか <https://github.com/roxma/nvim-yarp></pre>
<pre>tsuyoshi_cho 1585647202.111800: あると嬉しいけど、無理させたくないですし。
完全サポートより、buildで(事前に用意してあったら)組み込める(とその設定例)があると嬉しいかな...</pre>
<pre>tsuyoshi_cho 1585647256.112000: <https://github.com/vim-jp/vital.vim/pull/701>
です</pre>
{% endraw %}
